(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var np={exports:{}},Kl={},rp={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ni=Symbol.for("react.element"),Vy=Symbol.for("react.portal"),Wy=Symbol.for("react.fragment"),qy=Symbol.for("react.strict_mode"),Gy=Symbol.for("react.profiler"),Qy=Symbol.for("react.provider"),Yy=Symbol.for("react.context"),Ky=Symbol.for("react.forward_ref"),Zy=Symbol.for("react.suspense"),Jy=Symbol.for("react.memo"),Xy=Symbol.for("react.lazy"),_d=Symbol.iterator;function e0(t){return t===null||typeof t!="object"?null:(t=_d&&t[_d]||t["@@iterator"],typeof t=="function"?t:null)}var sp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ip=Object.assign,lp={};function Jr(t,e,n){this.props=t,this.context=e,this.refs=lp,this.updater=n||sp}Jr.prototype.isReactComponent={};Jr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function op(){}op.prototype=Jr.prototype;function Uc(t,e,n){this.props=t,this.context=e,this.refs=lp,this.updater=n||sp}var Hc=Uc.prototype=new op;Hc.constructor=Uc;ip(Hc,Jr.prototype);Hc.isPureReactComponent=!0;var Ed=Array.isArray,ap=Object.prototype.hasOwnProperty,zc={current:null},cp={key:!0,ref:!0,__self:!0,__source:!0};function up(t,e,n){var r,s={},i=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)ap.call(e,r)&&!cp.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:ni,type:t,key:i,ref:l,props:s,_owner:zc.current}}function t0(t,e){return{$$typeof:ni,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vc(t){return typeof t=="object"&&t!==null&&t.$$typeof===ni}function n0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kd=/\/+/g;function Co(t,e){return typeof t=="object"&&t!==null&&t.key!=null?n0(""+t.key):e.toString(36)}function Hi(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case ni:case Vy:l=!0}}if(l)return l=t,s=s(l),t=r===""?"."+Co(l,0):r,Ed(s)?(n="",t!=null&&(n=t.replace(kd,"$&/")+"/"),Hi(s,e,n,"",function(u){return u})):s!=null&&(Vc(s)&&(s=t0(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(kd,"$&/")+"/")+t)),e.push(s)),1;if(l=0,r=r===""?".":r+":",Ed(t))for(var o=0;o<t.length;o++){i=t[o];var c=r+Co(i,o);l+=Hi(i,e,n,c,s)}else if(c=e0(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=r+Co(i,o++),l+=Hi(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function pi(t,e,n){if(t==null)return t;var r=[],s=0;return Hi(t,r,"","",function(i){return e.call(n,i,s++)}),r}function r0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Be={current:null},zi={transition:null},s0={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:zi,ReactCurrentOwner:zc};function dp(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:pi,forEach:function(t,e,n){pi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return pi(t,function(){e++}),e},toArray:function(t){return pi(t,function(e){return e})||[]},only:function(t){if(!Vc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=Jr;Y.Fragment=Wy;Y.Profiler=Gy;Y.PureComponent=Uc;Y.StrictMode=qy;Y.Suspense=Zy;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s0;Y.act=dp;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ip({},t.props),s=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=zc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)ap.call(e,c)&&!cp.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:ni,type:t.type,key:s,ref:i,props:r,_owner:l}};Y.createContext=function(t){return t={$$typeof:Yy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Qy,_context:t},t.Consumer=t};Y.createElement=up;Y.createFactory=function(t){var e=up.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:Ky,render:t}};Y.isValidElement=Vc;Y.lazy=function(t){return{$$typeof:Xy,_payload:{_status:-1,_result:t},_init:r0}};Y.memo=function(t,e){return{$$typeof:Jy,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=zi.transition;zi.transition={};try{t()}finally{zi.transition=e}};Y.unstable_act=dp;Y.useCallback=function(t,e){return Be.current.useCallback(t,e)};Y.useContext=function(t){return Be.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return Be.current.useDeferredValue(t)};Y.useEffect=function(t,e){return Be.current.useEffect(t,e)};Y.useId=function(){return Be.current.useId()};Y.useImperativeHandle=function(t,e,n){return Be.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return Be.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return Be.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return Be.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return Be.current.useReducer(t,e,n)};Y.useRef=function(t){return Be.current.useRef(t)};Y.useState=function(t){return Be.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return Be.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return Be.current.useTransition()};Y.version="18.3.1";rp.exports=Y;var P=rp.exports;const ll=Hy(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0=P,l0=Symbol.for("react.element"),o0=Symbol.for("react.fragment"),a0=Object.prototype.hasOwnProperty,c0=i0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u0={key:!0,ref:!0,__self:!0,__source:!0};function hp(t,e,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)a0.call(e,r)&&!u0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:l0,type:t,key:i,ref:l,props:s,_owner:c0.current}}Kl.Fragment=o0;Kl.jsx=hp;Kl.jsxs=hp;np.exports=Kl;var a=np.exports,Sa={},fp={exports:{}},Xe={},pp={exports:{}},gp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(_,O){var F=_.length;_.push(O);e:for(;0<F;){var X=F-1>>>1,Z=_[X];if(0<s(Z,O))_[X]=O,_[F]=Z,F=X;else break e}}function n(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var O=_[0],F=_.pop();if(F!==O){_[0]=F;e:for(var X=0,Z=_.length,ct=Z>>>1;X<ct;){var Dt=2*(X+1)-1,Kt=_[Dt],Rt=Dt+1,fi=_[Rt];if(0>s(Kt,F))Rt<Z&&0>s(fi,Kt)?(_[X]=fi,_[Rt]=F,X=Rt):(_[X]=Kt,_[Dt]=F,X=Dt);else if(Rt<Z&&0>s(fi,F))_[X]=fi,_[Rt]=F,X=Rt;else break e}}return O}function s(_,O){var F=_.sortIndex-O.sortIndex;return F!==0?F:_.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],u=[],d=1,h=null,f=3,p=!1,y=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(_){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=_)r(u),O.sortIndex=O.expirationTime,e(c,O);else break;O=n(u)}}function w(_){if(x=!1,v(_),!y)if(n(c)!==null)y=!0,L(T);else{var O=n(u);O!==null&&V(w,O.startTime-_)}}function T(_,O){y=!1,x&&(x=!1,g(D),D=-1),p=!0;var F=f;try{for(v(O),h=n(c);h!==null&&(!(h.expirationTime>O)||_&&!B());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var Z=X(h.expirationTime<=O);O=t.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(c)&&r(c),v(O)}else r(c);h=n(c)}if(h!==null)var ct=!0;else{var Dt=n(u);Dt!==null&&V(w,Dt.startTime-O),ct=!1}return ct}finally{h=null,f=F,p=!1}}var N=!1,k=null,D=-1,H=5,C=-1;function B(){return!(t.unstable_now()-C<H)}function R(){if(k!==null){var _=t.unstable_now();C=_;var O=!0;try{O=k(!0,_)}finally{O?I():(N=!1,k=null)}}else N=!1}var I;if(typeof m=="function")I=function(){m(R)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,j=E.port2;E.port1.onmessage=R,I=function(){j.postMessage(null)}}else I=function(){b(R,0)};function L(_){k=_,N||(N=!0,I())}function V(_,O){D=b(function(){_(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,L(T))},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(_){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var F=f;f=O;try{return _()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(_,O){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var F=f;f=_;try{return O()}finally{f=F}},t.unstable_scheduleCallback=function(_,O,F){var X=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?X+F:X):F=X,_){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=F+Z,_={id:d++,callback:O,priorityLevel:_,startTime:F,expirationTime:Z,sortIndex:-1},F>X?(_.sortIndex=F,e(u,_),n(c)===null&&_===n(u)&&(x?(g(D),D=-1):x=!0,V(w,F-X))):(_.sortIndex=Z,e(c,_),y||p||(y=!0,L(T))),_},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(_){var O=f;return function(){var F=f;f=O;try{return _.apply(this,arguments)}finally{f=F}}}})(gp);pp.exports=gp;var d0=pp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0=P,Je=d0;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mp=new Set,Ps={};function tr(t,e){$r(t,e),$r(t+"Capture",e)}function $r(t,e){for(Ps[t]=e,t=0;t<e.length;t++)mp.add(e[t])}var Ht=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_a=Object.prototype.hasOwnProperty,f0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cd={},jd={};function p0(t){return _a.call(jd,t)?!0:_a.call(Cd,t)?!1:f0.test(t)?jd[t]=!0:(Cd[t]=!0,!1)}function g0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function m0(t,e,n,r){if(e===null||typeof e>"u"||g0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $e(t,e,n,r,s,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ne[t]=new $e(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ne[e]=new $e(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ne[t]=new $e(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ne[t]=new $e(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ne[t]=new $e(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ne[t]=new $e(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ne[t]=new $e(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ne[t]=new $e(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ne[t]=new $e(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wc=/[\-:]([a-z])/g;function qc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wc,qc);Ne[e]=new $e(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wc,qc);Ne[e]=new $e(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wc,qc);Ne[e]=new $e(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ne[t]=new $e(t,1,!1,t.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ne[t]=new $e(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gc(t,e,n,r){var s=Ne.hasOwnProperty(e)?Ne[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(m0(e,n,s,r)&&(n=null),r||s===null?p0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gt=h0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gi=Symbol.for("react.element"),mr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),Qc=Symbol.for("react.strict_mode"),Ea=Symbol.for("react.profiler"),vp=Symbol.for("react.provider"),yp=Symbol.for("react.context"),Yc=Symbol.for("react.forward_ref"),ka=Symbol.for("react.suspense"),Ca=Symbol.for("react.suspense_list"),Kc=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),xp=Symbol.for("react.offscreen"),Nd=Symbol.iterator;function is(t){return t===null||typeof t!="object"?null:(t=Nd&&t[Nd]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Object.assign,jo;function gs(t){if(jo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jo=e&&e[1]||""}return`
`+jo+t}var No=!1;function Ao(t,e){if(!t||No)return"";No=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),l=s.length-1,o=i.length-1;1<=l&&0<=o&&s[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(s[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||s[l]!==i[o]){var c=`
`+s[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{No=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?gs(t):""}function v0(t){switch(t.tag){case 5:return gs(t.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 2:case 15:return t=Ao(t.type,!1),t;case 11:return t=Ao(t.type.render,!1),t;case 1:return t=Ao(t.type,!0),t;default:return""}}function ja(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vr:return"Fragment";case mr:return"Portal";case Ea:return"Profiler";case Qc:return"StrictMode";case ka:return"Suspense";case Ca:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yp:return(t.displayName||"Context")+".Consumer";case vp:return(t._context.displayName||"Context")+".Provider";case Yc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kc:return e=t.displayName||null,e!==null?e:ja(t.type)||"Memo";case en:e=t._payload,t=t._init;try{return ja(t(e))}catch{}}return null}function y0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ja(e);case 8:return e===Qc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function x0(t){var e=wp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mi(t){t._valueTracker||(t._valueTracker=x0(t))}function bp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=wp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ol(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Na(t,e){var n=e.checked;return ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ad(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sp(t,e){e=e.checked,e!=null&&Gc(t,"checked",e,!1)}function Aa(t,e){Sp(t,e);var n=wn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ta(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ta(t,e.type,wn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Td(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ta(t,e,n){(e!=="number"||ol(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ms=Array.isArray;function Ar(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Da(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(ms(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wn(n)}}function _p(t,e){var n=wn(e.value),r=wn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ep(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ra(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ep(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vi,kp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vi=vi||document.createElement("div"),vi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ms(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ws={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w0=["Webkit","ms","Moz","O"];Object.keys(ws).forEach(function(t){w0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ws[e]=ws[t]})});function Cp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ws.hasOwnProperty(t)&&ws[t]?(""+e).trim():e+"px"}function jp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Cp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var b0=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ia(t,e){if(e){if(b0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Oa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pa=null;function Zc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ma=null,Tr=null,Dr=null;function Id(t){if(t=ii(t)){if(typeof Ma!="function")throw Error(M(280));var e=t.stateNode;e&&(e=to(e),Ma(t.stateNode,t.type,e))}}function Np(t){Tr?Dr?Dr.push(t):Dr=[t]:Tr=t}function Ap(){if(Tr){var t=Tr,e=Dr;if(Dr=Tr=null,Id(t),e)for(t=0;t<e.length;t++)Id(e[t])}}function Tp(t,e){return t(e)}function Dp(){}var To=!1;function Rp(t,e,n){if(To)return t(e,n);To=!0;try{return Tp(t,e,n)}finally{To=!1,(Tr!==null||Dr!==null)&&(Dp(),Ap())}}function Ls(t,e){var n=t.stateNode;if(n===null)return null;var r=to(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var La=!1;if(Ht)try{var ls={};Object.defineProperty(ls,"passive",{get:function(){La=!0}}),window.addEventListener("test",ls,ls),window.removeEventListener("test",ls,ls)}catch{La=!1}function S0(t,e,n,r,s,i,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var bs=!1,al=null,cl=!1,Ba=null,_0={onError:function(t){bs=!0,al=t}};function E0(t,e,n,r,s,i,l,o,c){bs=!1,al=null,S0.apply(_0,arguments)}function k0(t,e,n,r,s,i,l,o,c){if(E0.apply(this,arguments),bs){if(bs){var u=al;bs=!1,al=null}else throw Error(M(198));cl||(cl=!0,Ba=u)}}function nr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ip(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Od(t){if(nr(t)!==t)throw Error(M(188))}function C0(t){var e=t.alternate;if(!e){if(e=nr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Od(s),t;if(i===r)return Od(s),e;i=i.sibling}throw Error(M(188))}if(n.return!==r.return)n=s,r=i;else{for(var l=!1,o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function Op(t){return t=C0(t),t!==null?Pp(t):null}function Pp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pp(t);if(e!==null)return e;t=t.sibling}return null}var Mp=Je.unstable_scheduleCallback,Pd=Je.unstable_cancelCallback,j0=Je.unstable_shouldYield,N0=Je.unstable_requestPaint,ve=Je.unstable_now,A0=Je.unstable_getCurrentPriorityLevel,Jc=Je.unstable_ImmediatePriority,Lp=Je.unstable_UserBlockingPriority,ul=Je.unstable_NormalPriority,T0=Je.unstable_LowPriority,Bp=Je.unstable_IdlePriority,Zl=null,jt=null;function D0(t){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(Zl,t,void 0,(t.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:O0,R0=Math.log,I0=Math.LN2;function O0(t){return t>>>=0,t===0?32:31-(R0(t)/I0|0)|0}var yi=64,xi=4194304;function vs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~s;o!==0?r=vs(o):(i&=l,i!==0&&(r=vs(i)))}else l=n&~s,l!==0?r=vs(l):i!==0&&(r=vs(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vt(e),s=1<<n,r|=t[n],e&=~s;return r}function P0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-vt(i),o=1<<l,c=s[l];c===-1?(!(o&n)||o&r)&&(s[l]=P0(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}}function $a(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $p(){var t=yi;return yi<<=1,!(yi&4194240)&&(yi=64),t}function Do(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ri(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vt(e),t[e]=n}function L0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Xc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var te=0;function Fp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Up,eu,Hp,zp,Vp,Fa=!1,wi=[],dn=null,hn=null,fn=null,Bs=new Map,$s=new Map,nn=[],B0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Md(t,e){switch(t){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":Bs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$s.delete(e.pointerId)}}function os(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ii(e),e!==null&&eu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function $0(t,e,n,r,s){switch(e){case"focusin":return dn=os(dn,t,e,n,r,s),!0;case"dragenter":return hn=os(hn,t,e,n,r,s),!0;case"mouseover":return fn=os(fn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Bs.set(i,os(Bs.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,$s.set(i,os($s.get(i)||null,t,e,n,r,s)),!0}return!1}function Wp(t){var e=Bn(t.target);if(e!==null){var n=nr(e);if(n!==null){if(e=n.tag,e===13){if(e=Ip(n),e!==null){t.blockedOn=e,Vp(t.priority,function(){Hp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ua(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Pa=r,n.target.dispatchEvent(r),Pa=null}else return e=ii(n),e!==null&&eu(e),t.blockedOn=n,!1;e.shift()}return!0}function Ld(t,e,n){Vi(t)&&n.delete(e)}function F0(){Fa=!1,dn!==null&&Vi(dn)&&(dn=null),hn!==null&&Vi(hn)&&(hn=null),fn!==null&&Vi(fn)&&(fn=null),Bs.forEach(Ld),$s.forEach(Ld)}function as(t,e){t.blockedOn===e&&(t.blockedOn=null,Fa||(Fa=!0,Je.unstable_scheduleCallback(Je.unstable_NormalPriority,F0)))}function Fs(t){function e(s){return as(s,t)}if(0<wi.length){as(wi[0],t);for(var n=1;n<wi.length;n++){var r=wi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dn!==null&&as(dn,t),hn!==null&&as(hn,t),fn!==null&&as(fn,t),Bs.forEach(e),$s.forEach(e),n=0;n<nn.length;n++)r=nn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<nn.length&&(n=nn[0],n.blockedOn===null);)Wp(n),n.blockedOn===null&&nn.shift()}var Rr=Gt.ReactCurrentBatchConfig,hl=!0;function U0(t,e,n,r){var s=te,i=Rr.transition;Rr.transition=null;try{te=1,tu(t,e,n,r)}finally{te=s,Rr.transition=i}}function H0(t,e,n,r){var s=te,i=Rr.transition;Rr.transition=null;try{te=4,tu(t,e,n,r)}finally{te=s,Rr.transition=i}}function tu(t,e,n,r){if(hl){var s=Ua(t,e,n,r);if(s===null)Uo(t,e,r,fl,n),Md(t,r);else if($0(s,t,e,n,r))r.stopPropagation();else if(Md(t,r),e&4&&-1<B0.indexOf(t)){for(;s!==null;){var i=ii(s);if(i!==null&&Up(i),i=Ua(t,e,n,r),i===null&&Uo(t,e,r,fl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Uo(t,e,r,null,n)}}var fl=null;function Ua(t,e,n,r){if(fl=null,t=Zc(r),t=Bn(t),t!==null)if(e=nr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ip(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fl=t,null}function qp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A0()){case Jc:return 1;case Lp:return 4;case ul:case T0:return 16;case Bp:return 536870912;default:return 16}default:return 16}}var ln=null,nu=null,Wi=null;function Gp(){if(Wi)return Wi;var t,e=nu,n=e.length,r,s="value"in ln?ln.value:ln.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===s[i-r];r++);return Wi=s.slice(t,1<r?1-r:void 0)}function qi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bi(){return!0}function Bd(){return!1}function et(t){function e(n,r,s,i,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bi:Bd,this.isPropagationStopped=Bd,this}return ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),e}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ru=et(Xr),si=ge({},Xr,{view:0,detail:0}),z0=et(si),Ro,Io,cs,Jl=ge({},si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:su,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cs&&(cs&&t.type==="mousemove"?(Ro=t.screenX-cs.screenX,Io=t.screenY-cs.screenY):Io=Ro=0,cs=t),Ro)},movementY:function(t){return"movementY"in t?t.movementY:Io}}),$d=et(Jl),V0=ge({},Jl,{dataTransfer:0}),W0=et(V0),q0=ge({},si,{relatedTarget:0}),Oo=et(q0),G0=ge({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Q0=et(G0),Y0=ge({},Xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),K0=et(Y0),Z0=ge({},Xr,{data:0}),Fd=et(Z0),J0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ex={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ex[t])?!!e[t]:!1}function su(){return tx}var nx=ge({},si,{key:function(t){if(t.key){var e=J0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?X0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:su,charCode:function(t){return t.type==="keypress"?qi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rx=et(nx),sx=ge({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ud=et(sx),ix=ge({},si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:su}),lx=et(ix),ox=ge({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ax=et(ox),cx=ge({},Jl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ux=et(cx),dx=[9,13,27,32],iu=Ht&&"CompositionEvent"in window,Ss=null;Ht&&"documentMode"in document&&(Ss=document.documentMode);var hx=Ht&&"TextEvent"in window&&!Ss,Qp=Ht&&(!iu||Ss&&8<Ss&&11>=Ss),Hd=" ",zd=!1;function Yp(t,e){switch(t){case"keyup":return dx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yr=!1;function fx(t,e){switch(t){case"compositionend":return Kp(e);case"keypress":return e.which!==32?null:(zd=!0,Hd);case"textInput":return t=e.data,t===Hd&&zd?null:t;default:return null}}function px(t,e){if(yr)return t==="compositionend"||!iu&&Yp(t,e)?(t=Gp(),Wi=nu=ln=null,yr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qp&&e.locale!=="ko"?null:e.data;default:return null}}var gx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gx[t.type]:e==="textarea"}function Zp(t,e,n,r){Np(r),e=pl(e,"onChange"),0<e.length&&(n=new ru("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _s=null,Us=null;function mx(t){ag(t,0)}function Xl(t){var e=br(t);if(bp(e))return t}function vx(t,e){if(t==="change")return e}var Jp=!1;if(Ht){var Po;if(Ht){var Mo="oninput"in document;if(!Mo){var Wd=document.createElement("div");Wd.setAttribute("oninput","return;"),Mo=typeof Wd.oninput=="function"}Po=Mo}else Po=!1;Jp=Po&&(!document.documentMode||9<document.documentMode)}function qd(){_s&&(_s.detachEvent("onpropertychange",Xp),Us=_s=null)}function Xp(t){if(t.propertyName==="value"&&Xl(Us)){var e=[];Zp(e,Us,t,Zc(t)),Rp(mx,e)}}function yx(t,e,n){t==="focusin"?(qd(),_s=e,Us=n,_s.attachEvent("onpropertychange",Xp)):t==="focusout"&&qd()}function xx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xl(Us)}function wx(t,e){if(t==="click")return Xl(e)}function bx(t,e){if(t==="input"||t==="change")return Xl(e)}function Sx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xt=typeof Object.is=="function"?Object.is:Sx;function Hs(t,e){if(xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!_a.call(e,s)||!xt(t[s],e[s]))return!1}return!0}function Gd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qd(t,e){var n=Gd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gd(n)}}function eg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tg(){for(var t=window,e=ol();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ol(t.document)}return e}function lu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _x(t){var e=tg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eg(n.ownerDocument.documentElement,n)){if(r!==null&&lu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Qd(n,i);var l=Qd(n,r);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ex=Ht&&"documentMode"in document&&11>=document.documentMode,xr=null,Ha=null,Es=null,za=!1;function Yd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;za||xr==null||xr!==ol(r)||(r=xr,"selectionStart"in r&&lu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Es&&Hs(Es,r)||(Es=r,r=pl(Ha,"onSelect"),0<r.length&&(e=new ru("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xr)))}function Si(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:Si("Animation","AnimationEnd"),animationiteration:Si("Animation","AnimationIteration"),animationstart:Si("Animation","AnimationStart"),transitionend:Si("Transition","TransitionEnd")},Lo={},ng={};Ht&&(ng=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function eo(t){if(Lo[t])return Lo[t];if(!wr[t])return t;var e=wr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ng)return Lo[t]=e[n];return t}var rg=eo("animationend"),sg=eo("animationiteration"),ig=eo("animationstart"),lg=eo("transitionend"),og=new Map,Kd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(t,e){og.set(t,e),tr(e,[t])}for(var Bo=0;Bo<Kd.length;Bo++){var $o=Kd[Bo],kx=$o.toLowerCase(),Cx=$o[0].toUpperCase()+$o.slice(1);En(kx,"on"+Cx)}En(rg,"onAnimationEnd");En(sg,"onAnimationIteration");En(ig,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(lg,"onTransitionEnd");$r("onMouseEnter",["mouseout","mouseover"]);$r("onMouseLeave",["mouseout","mouseover"]);$r("onPointerEnter",["pointerout","pointerover"]);$r("onPointerLeave",["pointerout","pointerover"]);tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ys));function Zd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,k0(r,e,void 0,t),t.currentTarget=null}function ag(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&s.isPropagationStopped())break e;Zd(s,o,u),i=c}else for(l=0;l<r.length;l++){if(o=r[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&s.isPropagationStopped())break e;Zd(s,o,u),i=c}}}if(cl)throw t=Ba,cl=!1,Ba=null,t}function oe(t,e){var n=e[Qa];n===void 0&&(n=e[Qa]=new Set);var r=t+"__bubble";n.has(r)||(cg(e,t,2,!1),n.add(r))}function Fo(t,e,n){var r=0;e&&(r|=4),cg(n,t,r,e)}var _i="_reactListening"+Math.random().toString(36).slice(2);function zs(t){if(!t[_i]){t[_i]=!0,mp.forEach(function(n){n!=="selectionchange"&&(jx.has(n)||Fo(n,!1,t),Fo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_i]||(e[_i]=!0,Fo("selectionchange",!1,e))}}function cg(t,e,n,r){switch(qp(e)){case 1:var s=U0;break;case 4:s=H0;break;default:s=tu}n=s.bind(null,e,n,t),s=void 0,!La||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Uo(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;o!==null;){if(l=Bn(o),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}o=o.parentNode}}r=r.return}Rp(function(){var u=i,d=Zc(n),h=[];e:{var f=og.get(t);if(f!==void 0){var p=ru,y=t;switch(t){case"keypress":if(qi(n)===0)break e;case"keydown":case"keyup":p=rx;break;case"focusin":y="focus",p=Oo;break;case"focusout":y="blur",p=Oo;break;case"beforeblur":case"afterblur":p=Oo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=$d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=W0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=lx;break;case rg:case sg:case ig:p=Q0;break;case lg:p=ax;break;case"scroll":p=z0;break;case"wheel":p=ux;break;case"copy":case"cut":case"paste":p=K0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ud}var x=(e&4)!==0,b=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var m=u,v;m!==null;){v=m;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,g!==null&&(w=Ls(m,g),w!=null&&x.push(Vs(m,w,v)))),b)break;m=m.return}0<x.length&&(f=new p(f,y,null,n,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Pa&&(y=n.relatedTarget||n.fromElement)&&(Bn(y)||y[zt]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?Bn(y):null,y!==null&&(b=nr(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(x=$d,w="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(x=Ud,w="onPointerLeave",g="onPointerEnter",m="pointer"),b=p==null?f:br(p),v=y==null?f:br(y),f=new x(w,m+"leave",p,n,d),f.target=b,f.relatedTarget=v,w=null,Bn(d)===u&&(x=new x(g,m+"enter",y,n,d),x.target=v,x.relatedTarget=b,w=x),b=w,p&&y)t:{for(x=p,g=y,m=0,v=x;v;v=or(v))m++;for(v=0,w=g;w;w=or(w))v++;for(;0<m-v;)x=or(x),m--;for(;0<v-m;)g=or(g),v--;for(;m--;){if(x===g||g!==null&&x===g.alternate)break t;x=or(x),g=or(g)}x=null}else x=null;p!==null&&Jd(h,f,p,x,!1),y!==null&&b!==null&&Jd(h,b,y,x,!0)}}e:{if(f=u?br(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=vx;else if(Vd(f))if(Jp)T=bx;else{T=xx;var N=yx}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=wx);if(T&&(T=T(t,u))){Zp(h,T,n,d);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Ta(f,"number",f.value)}switch(N=u?br(u):window,t){case"focusin":(Vd(N)||N.contentEditable==="true")&&(xr=N,Ha=u,Es=null);break;case"focusout":Es=Ha=xr=null;break;case"mousedown":za=!0;break;case"contextmenu":case"mouseup":case"dragend":za=!1,Yd(h,n,d);break;case"selectionchange":if(Ex)break;case"keydown":case"keyup":Yd(h,n,d)}var k;if(iu)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else yr?Yp(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Qp&&n.locale!=="ko"&&(yr||D!=="onCompositionStart"?D==="onCompositionEnd"&&yr&&(k=Gp()):(ln=d,nu="value"in ln?ln.value:ln.textContent,yr=!0)),N=pl(u,D),0<N.length&&(D=new Fd(D,t,null,n,d),h.push({event:D,listeners:N}),k?D.data=k:(k=Kp(n),k!==null&&(D.data=k)))),(k=hx?fx(t,n):px(t,n))&&(u=pl(u,"onBeforeInput"),0<u.length&&(d=new Fd("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=k))}ag(h,e)})}function Vs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ls(t,n),i!=null&&r.unshift(Vs(t,i,s)),i=Ls(t,e),i!=null&&r.push(Vs(t,i,s))),t=t.return}return r}function or(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jd(t,e,n,r,s){for(var i=e._reactName,l=[];n!==null&&n!==r;){var o=n,c=o.alternate,u=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&u!==null&&(o=u,s?(c=Ls(n,i),c!=null&&l.unshift(Vs(n,c,o))):s||(c=Ls(n,i),c!=null&&l.push(Vs(n,c,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var Nx=/\r\n?/g,Ax=/\u0000|\uFFFD/g;function Xd(t){return(typeof t=="string"?t:""+t).replace(Nx,`
`).replace(Ax,"")}function Ei(t,e,n){if(e=Xd(e),Xd(t)!==e&&n)throw Error(M(425))}function gl(){}var Va=null,Wa=null;function qa(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ga=typeof setTimeout=="function"?setTimeout:void 0,Tx=typeof clearTimeout=="function"?clearTimeout:void 0,eh=typeof Promise=="function"?Promise:void 0,Dx=typeof queueMicrotask=="function"?queueMicrotask:typeof eh<"u"?function(t){return eh.resolve(null).then(t).catch(Rx)}:Ga;function Rx(t){setTimeout(function(){throw t})}function Ho(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fs(e)}function pn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function th(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var es=Math.random().toString(36).slice(2),Ct="__reactFiber$"+es,Ws="__reactProps$"+es,zt="__reactContainer$"+es,Qa="__reactEvents$"+es,Ix="__reactListeners$"+es,Ox="__reactHandles$"+es;function Bn(t){var e=t[Ct];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zt]||n[Ct]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=th(t);t!==null;){if(n=t[Ct])return n;t=th(t)}return e}t=n,n=t.parentNode}return null}function ii(t){return t=t[Ct]||t[zt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function br(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function to(t){return t[Ws]||null}var Ya=[],Sr=-1;function kn(t){return{current:t}}function ae(t){0>Sr||(t.current=Ya[Sr],Ya[Sr]=null,Sr--)}function se(t,e){Sr++,Ya[Sr]=t.current,t.current=e}var bn={},Ie=kn(bn),Ve=kn(!1),qn=bn;function Fr(t,e){var n=t.type.contextTypes;if(!n)return bn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function We(t){return t=t.childContextTypes,t!=null}function ml(){ae(Ve),ae(Ie)}function nh(t,e,n){if(Ie.current!==bn)throw Error(M(168));se(Ie,e),se(Ve,n)}function ug(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(M(108,y0(t)||"Unknown",s));return ge({},n,r)}function vl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bn,qn=Ie.current,se(Ie,t),se(Ve,Ve.current),!0}function rh(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=ug(t,e,qn),r.__reactInternalMemoizedMergedChildContext=t,ae(Ve),ae(Ie),se(Ie,t)):ae(Ve),se(Ve,n)}var Mt=null,no=!1,zo=!1;function dg(t){Mt===null?Mt=[t]:Mt.push(t)}function Px(t){no=!0,dg(t)}function Cn(){if(!zo&&Mt!==null){zo=!0;var t=0,e=te;try{var n=Mt;for(te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Mt=null,no=!1}catch(s){throw Mt!==null&&(Mt=Mt.slice(t+1)),Mp(Jc,Cn),s}finally{te=e,zo=!1}}return null}var _r=[],Er=0,yl=null,xl=0,nt=[],rt=0,Gn=null,Lt=1,Bt="";function Dn(t,e){_r[Er++]=xl,_r[Er++]=yl,yl=t,xl=e}function hg(t,e,n){nt[rt++]=Lt,nt[rt++]=Bt,nt[rt++]=Gn,Gn=t;var r=Lt;t=Bt;var s=32-vt(r)-1;r&=~(1<<s),n+=1;var i=32-vt(e)+s;if(30<i){var l=s-s%5;i=(r&(1<<l)-1).toString(32),r>>=l,s-=l,Lt=1<<32-vt(e)+s|n<<s|r,Bt=i+t}else Lt=1<<i|n<<s|r,Bt=t}function ou(t){t.return!==null&&(Dn(t,1),hg(t,1,0))}function au(t){for(;t===yl;)yl=_r[--Er],_r[Er]=null,xl=_r[--Er],_r[Er]=null;for(;t===Gn;)Gn=nt[--rt],nt[rt]=null,Bt=nt[--rt],nt[rt]=null,Lt=nt[--rt],nt[rt]=null}var Ye=null,Qe=null,ce=!1,gt=null;function fg(t,e){var n=st(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ye=t,Qe=pn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ye=t,Qe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gn!==null?{id:Lt,overflow:Bt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=st(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ye=t,Qe=null,!0):!1;default:return!1}}function Ka(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Za(t){if(ce){var e=Qe;if(e){var n=e;if(!sh(t,e)){if(Ka(t))throw Error(M(418));e=pn(n.nextSibling);var r=Ye;e&&sh(t,e)?fg(r,n):(t.flags=t.flags&-4097|2,ce=!1,Ye=t)}}else{if(Ka(t))throw Error(M(418));t.flags=t.flags&-4097|2,ce=!1,Ye=t}}}function ih(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ye=t}function ki(t){if(t!==Ye)return!1;if(!ce)return ih(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qa(t.type,t.memoizedProps)),e&&(e=Qe)){if(Ka(t))throw pg(),Error(M(418));for(;e;)fg(t,e),e=pn(e.nextSibling)}if(ih(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qe=pn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qe=null}}else Qe=Ye?pn(t.stateNode.nextSibling):null;return!0}function pg(){for(var t=Qe;t;)t=pn(t.nextSibling)}function Ur(){Qe=Ye=null,ce=!1}function cu(t){gt===null?gt=[t]:gt.push(t)}var Mx=Gt.ReactCurrentBatchConfig;function us(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var o=s.refs;l===null?delete o[i]:o[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Ci(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lh(t){var e=t._init;return e(t._payload)}function gg(t){function e(g,m){if(t){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=yn(g,m),g.index=0,g.sibling=null,g}function i(g,m,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function l(g){return t&&g.alternate===null&&(g.flags|=2),g}function o(g,m,v,w){return m===null||m.tag!==6?(m=Ko(v,g.mode,w),m.return=g,m):(m=s(m,v),m.return=g,m)}function c(g,m,v,w){var T=v.type;return T===vr?d(g,m,v.props.children,w,v.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===en&&lh(T)===m.type)?(w=s(m,v.props),w.ref=us(g,m,v),w.return=g,w):(w=Xi(v.type,v.key,v.props,null,g.mode,w),w.ref=us(g,m,v),w.return=g,w)}function u(g,m,v,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Zo(v,g.mode,w),m.return=g,m):(m=s(m,v.children||[]),m.return=g,m)}function d(g,m,v,w,T){return m===null||m.tag!==7?(m=Hn(v,g.mode,w,T),m.return=g,m):(m=s(m,v),m.return=g,m)}function h(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ko(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case gi:return v=Xi(m.type,m.key,m.props,null,g.mode,v),v.ref=us(g,null,m),v.return=g,v;case mr:return m=Zo(m,g.mode,v),m.return=g,m;case en:var w=m._init;return h(g,w(m._payload),v)}if(ms(m)||is(m))return m=Hn(m,g.mode,v,null),m.return=g,m;Ci(g,m)}return null}function f(g,m,v,w){var T=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return T!==null?null:o(g,m,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case gi:return v.key===T?c(g,m,v,w):null;case mr:return v.key===T?u(g,m,v,w):null;case en:return T=v._init,f(g,m,T(v._payload),w)}if(ms(v)||is(v))return T!==null?null:d(g,m,v,w,null);Ci(g,v)}return null}function p(g,m,v,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(v)||null,o(m,g,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case gi:return g=g.get(w.key===null?v:w.key)||null,c(m,g,w,T);case mr:return g=g.get(w.key===null?v:w.key)||null,u(m,g,w,T);case en:var N=w._init;return p(g,m,v,N(w._payload),T)}if(ms(w)||is(w))return g=g.get(v)||null,d(m,g,w,T,null);Ci(m,w)}return null}function y(g,m,v,w){for(var T=null,N=null,k=m,D=m=0,H=null;k!==null&&D<v.length;D++){k.index>D?(H=k,k=null):H=k.sibling;var C=f(g,k,v[D],w);if(C===null){k===null&&(k=H);break}t&&k&&C.alternate===null&&e(g,k),m=i(C,m,D),N===null?T=C:N.sibling=C,N=C,k=H}if(D===v.length)return n(g,k),ce&&Dn(g,D),T;if(k===null){for(;D<v.length;D++)k=h(g,v[D],w),k!==null&&(m=i(k,m,D),N===null?T=k:N.sibling=k,N=k);return ce&&Dn(g,D),T}for(k=r(g,k);D<v.length;D++)H=p(k,g,D,v[D],w),H!==null&&(t&&H.alternate!==null&&k.delete(H.key===null?D:H.key),m=i(H,m,D),N===null?T=H:N.sibling=H,N=H);return t&&k.forEach(function(B){return e(g,B)}),ce&&Dn(g,D),T}function x(g,m,v,w){var T=is(v);if(typeof T!="function")throw Error(M(150));if(v=T.call(v),v==null)throw Error(M(151));for(var N=T=null,k=m,D=m=0,H=null,C=v.next();k!==null&&!C.done;D++,C=v.next()){k.index>D?(H=k,k=null):H=k.sibling;var B=f(g,k,C.value,w);if(B===null){k===null&&(k=H);break}t&&k&&B.alternate===null&&e(g,k),m=i(B,m,D),N===null?T=B:N.sibling=B,N=B,k=H}if(C.done)return n(g,k),ce&&Dn(g,D),T;if(k===null){for(;!C.done;D++,C=v.next())C=h(g,C.value,w),C!==null&&(m=i(C,m,D),N===null?T=C:N.sibling=C,N=C);return ce&&Dn(g,D),T}for(k=r(g,k);!C.done;D++,C=v.next())C=p(k,g,D,C.value,w),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?D:C.key),m=i(C,m,D),N===null?T=C:N.sibling=C,N=C);return t&&k.forEach(function(R){return e(g,R)}),ce&&Dn(g,D),T}function b(g,m,v,w){if(typeof v=="object"&&v!==null&&v.type===vr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case gi:e:{for(var T=v.key,N=m;N!==null;){if(N.key===T){if(T=v.type,T===vr){if(N.tag===7){n(g,N.sibling),m=s(N,v.props.children),m.return=g,g=m;break e}}else if(N.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===en&&lh(T)===N.type){n(g,N.sibling),m=s(N,v.props),m.ref=us(g,N,v),m.return=g,g=m;break e}n(g,N);break}else e(g,N);N=N.sibling}v.type===vr?(m=Hn(v.props.children,g.mode,w,v.key),m.return=g,g=m):(w=Xi(v.type,v.key,v.props,null,g.mode,w),w.ref=us(g,m,v),w.return=g,g=w)}return l(g);case mr:e:{for(N=v.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=s(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=Zo(v,g.mode,w),m.return=g,g=m}return l(g);case en:return N=v._init,b(g,m,N(v._payload),w)}if(ms(v))return y(g,m,v,w);if(is(v))return x(g,m,v,w);Ci(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,v),m.return=g,g=m):(n(g,m),m=Ko(v,g.mode,w),m.return=g,g=m),l(g)):n(g,m)}return b}var Hr=gg(!0),mg=gg(!1),wl=kn(null),bl=null,kr=null,uu=null;function du(){uu=kr=bl=null}function hu(t){var e=wl.current;ae(wl),t._currentValue=e}function Ja(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ir(t,e){bl=t,uu=kr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(He=!0),t.firstContext=null)}function ot(t){var e=t._currentValue;if(uu!==t)if(t={context:t,memoizedValue:e,next:null},kr===null){if(bl===null)throw Error(M(308));kr=t,bl.dependencies={lanes:0,firstContext:t}}else kr=kr.next=t;return e}var $n=null;function fu(t){$n===null?$n=[t]:$n.push(t)}function vg(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,fu(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vt(t,r)}function Vt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var tn=!1;function pu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ft(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vt(t,n)}return s=r.interleaved,s===null?(e.next=e,fu(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vt(t,n)}function Gi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xc(t,n)}}function oh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sl(t,e,n,r){var s=t.updateQueue;tn=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?i=u:l.next=u,l=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==l&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;l=0,d=u=c=null,o=i;do{var f=o.lane,p=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,x=o;switch(f=e,p=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){h=y.call(p,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,f=typeof y=="function"?y.call(p,h,f):y,f==null)break e;h=ge({},h,f);break e;case 2:tn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,l|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Yn|=l,t.lanes=l,t.memoizedState=h}}function ah(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(M(191,s));s.call(r)}}}var li={},Nt=kn(li),qs=kn(li),Gs=kn(li);function Fn(t){if(t===li)throw Error(M(174));return t}function gu(t,e){switch(se(Gs,e),se(qs,t),se(Nt,li),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ra(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ra(e,t)}ae(Nt),se(Nt,e)}function zr(){ae(Nt),ae(qs),ae(Gs)}function xg(t){Fn(Gs.current);var e=Fn(Nt.current),n=Ra(e,t.type);e!==n&&(se(qs,t),se(Nt,n))}function mu(t){qs.current===t&&(ae(Nt),ae(qs))}var he=kn(0);function _l(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vo=[];function vu(){for(var t=0;t<Vo.length;t++)Vo[t]._workInProgressVersionPrimary=null;Vo.length=0}var Qi=Gt.ReactCurrentDispatcher,Wo=Gt.ReactCurrentBatchConfig,Qn=0,pe=null,be=null,_e=null,El=!1,ks=!1,Qs=0,Lx=0;function Ae(){throw Error(M(321))}function yu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xt(t[n],e[n]))return!1;return!0}function xu(t,e,n,r,s,i){if(Qn=i,pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qi.current=t===null||t.memoizedState===null?Ux:Hx,t=n(r,s),ks){i=0;do{if(ks=!1,Qs=0,25<=i)throw Error(M(301));i+=1,_e=be=null,e.updateQueue=null,Qi.current=zx,t=n(r,s)}while(ks)}if(Qi.current=kl,e=be!==null&&be.next!==null,Qn=0,_e=be=pe=null,El=!1,e)throw Error(M(300));return t}function wu(){var t=Qs!==0;return Qs=0,t}function St(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?pe.memoizedState=_e=t:_e=_e.next=t,_e}function at(){if(be===null){var t=pe.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=_e===null?pe.memoizedState:_e.next;if(e!==null)_e=e,be=t;else{if(t===null)throw Error(M(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},_e===null?pe.memoizedState=_e=t:_e=_e.next=t}return _e}function Ys(t,e){return typeof e=="function"?e(t):e}function qo(t){var e=at(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=l=null,c=null,u=i;do{var d=u.lane;if((Qn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,l=r):c=c.next=h,pe.lanes|=d,Yn|=d}u=u.next}while(u!==null&&u!==i);c===null?l=r:c.next=o,xt(r,e.memoizedState)||(He=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,pe.lanes|=i,Yn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Go(t){var e=at(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=t(i,l.action),l=l.next;while(l!==s);xt(i,e.memoizedState)||(He=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function wg(){}function bg(t,e){var n=pe,r=at(),s=e(),i=!xt(r.memoizedState,s);if(i&&(r.memoizedState=s,He=!0),r=r.queue,bu(Eg.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||_e!==null&&_e.memoizedState.tag&1){if(n.flags|=2048,Ks(9,_g.bind(null,n,r,s,e),void 0,null),Ee===null)throw Error(M(349));Qn&30||Sg(n,e,s)}return s}function Sg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pe.updateQueue,e===null?(e={lastEffect:null,stores:null},pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _g(t,e,n,r){e.value=n,e.getSnapshot=r,kg(e)&&Cg(t)}function Eg(t,e,n){return n(function(){kg(e)&&Cg(t)})}function kg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xt(t,n)}catch{return!0}}function Cg(t){var e=Vt(t,1);e!==null&&yt(e,t,1,-1)}function ch(t){var e=St();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:t},e.queue=t,t=t.dispatch=Fx.bind(null,pe,t),[e.memoizedState,t]}function Ks(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pe.updateQueue,e===null?(e={lastEffect:null,stores:null},pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jg(){return at().memoizedState}function Yi(t,e,n,r){var s=St();pe.flags|=t,s.memoizedState=Ks(1|e,n,void 0,r===void 0?null:r)}function ro(t,e,n,r){var s=at();r=r===void 0?null:r;var i=void 0;if(be!==null){var l=be.memoizedState;if(i=l.destroy,r!==null&&yu(r,l.deps)){s.memoizedState=Ks(e,n,i,r);return}}pe.flags|=t,s.memoizedState=Ks(1|e,n,i,r)}function uh(t,e){return Yi(8390656,8,t,e)}function bu(t,e){return ro(2048,8,t,e)}function Ng(t,e){return ro(4,2,t,e)}function Ag(t,e){return ro(4,4,t,e)}function Tg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dg(t,e,n){return n=n!=null?n.concat([t]):null,ro(4,4,Tg.bind(null,e,t),n)}function Su(){}function Rg(t,e){var n=at();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ig(t,e){var n=at();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Og(t,e,n){return Qn&21?(xt(n,e)||(n=$p(),pe.lanes|=n,Yn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,He=!0),t.memoizedState=n)}function Bx(t,e){var n=te;te=n!==0&&4>n?n:4,t(!0);var r=Wo.transition;Wo.transition={};try{t(!1),e()}finally{te=n,Wo.transition=r}}function Pg(){return at().memoizedState}function $x(t,e,n){var r=vn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mg(t))Lg(e,n);else if(n=vg(t,e,n,r),n!==null){var s=Me();yt(n,t,r,s),Bg(n,e,r)}}function Fx(t,e,n){var r=vn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mg(t))Lg(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,o=i(l,n);if(s.hasEagerState=!0,s.eagerState=o,xt(o,l)){var c=e.interleaved;c===null?(s.next=s,fu(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=vg(t,e,s,r),n!==null&&(s=Me(),yt(n,t,r,s),Bg(n,e,r))}}function Mg(t){var e=t.alternate;return t===pe||e!==null&&e===pe}function Lg(t,e){ks=El=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xc(t,n)}}var kl={readContext:ot,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useInsertionEffect:Ae,useLayoutEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useMutableSource:Ae,useSyncExternalStore:Ae,useId:Ae,unstable_isNewReconciler:!1},Ux={readContext:ot,useCallback:function(t,e){return St().memoizedState=[t,e===void 0?null:e],t},useContext:ot,useEffect:uh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yi(4194308,4,Tg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yi(4,2,t,e)},useMemo:function(t,e){var n=St();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=St();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=$x.bind(null,pe,t),[r.memoizedState,t]},useRef:function(t){var e=St();return t={current:t},e.memoizedState=t},useState:ch,useDebugValue:Su,useDeferredValue:function(t){return St().memoizedState=t},useTransition:function(){var t=ch(!1),e=t[0];return t=Bx.bind(null,t[1]),St().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pe,s=St();if(ce){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Ee===null)throw Error(M(349));Qn&30||Sg(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,uh(Eg.bind(null,r,i,t),[t]),r.flags|=2048,Ks(9,_g.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=St(),e=Ee.identifierPrefix;if(ce){var n=Bt,r=Lt;n=(r&~(1<<32-vt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Lx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Hx={readContext:ot,useCallback:Rg,useContext:ot,useEffect:bu,useImperativeHandle:Dg,useInsertionEffect:Ng,useLayoutEffect:Ag,useMemo:Ig,useReducer:qo,useRef:jg,useState:function(){return qo(Ys)},useDebugValue:Su,useDeferredValue:function(t){var e=at();return Og(e,be.memoizedState,t)},useTransition:function(){var t=qo(Ys)[0],e=at().memoizedState;return[t,e]},useMutableSource:wg,useSyncExternalStore:bg,useId:Pg,unstable_isNewReconciler:!1},zx={readContext:ot,useCallback:Rg,useContext:ot,useEffect:bu,useImperativeHandle:Dg,useInsertionEffect:Ng,useLayoutEffect:Ag,useMemo:Ig,useReducer:Go,useRef:jg,useState:function(){return Go(Ys)},useDebugValue:Su,useDeferredValue:function(t){var e=at();return be===null?e.memoizedState=t:Og(e,be.memoizedState,t)},useTransition:function(){var t=Go(Ys)[0],e=at().memoizedState;return[t,e]},useMutableSource:wg,useSyncExternalStore:bg,useId:Pg,unstable_isNewReconciler:!1};function ht(t,e){if(t&&t.defaultProps){e=ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xa(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var so={isMounted:function(t){return(t=t._reactInternals)?nr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Me(),s=vn(t),i=Ft(r,s);i.payload=e,n!=null&&(i.callback=n),e=gn(t,i,s),e!==null&&(yt(e,t,s,r),Gi(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Me(),s=vn(t),i=Ft(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gn(t,i,s),e!==null&&(yt(e,t,s,r),Gi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Me(),r=vn(t),s=Ft(n,r);s.tag=2,e!=null&&(s.callback=e),e=gn(t,s,r),e!==null&&(yt(e,t,r,n),Gi(e,t,r))}};function dh(t,e,n,r,s,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,l):e.prototype&&e.prototype.isPureReactComponent?!Hs(n,r)||!Hs(s,i):!0}function $g(t,e,n){var r=!1,s=bn,i=e.contextType;return typeof i=="object"&&i!==null?i=ot(i):(s=We(e)?qn:Ie.current,r=e.contextTypes,i=(r=r!=null)?Fr(t,s):bn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=so,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function hh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&so.enqueueReplaceState(e,e.state,null)}function ec(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},pu(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ot(i):(i=We(e)?qn:Ie.current,s.context=Fr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Xa(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&so.enqueueReplaceState(s,s.state,null),Sl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Vr(t,e){try{var n="",r=e;do n+=v0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Qo(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Vx=typeof WeakMap=="function"?WeakMap:Map;function Fg(t,e,n){n=Ft(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jl||(jl=!0,dc=r),tc(t,e)},n}function Ug(t,e,n){n=Ft(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){tc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){tc(t,e),typeof r!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function fh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Vx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=sw.bind(null,t,e,n),e.then(t,t))}function ph(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gh(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ft(-1,1),e.tag=2,gn(n,e,1))),n.lanes|=1),t)}var Wx=Gt.ReactCurrentOwner,He=!1;function Pe(t,e,n,r){e.child=t===null?mg(e,null,n,r):Hr(e,t.child,n,r)}function mh(t,e,n,r,s){n=n.render;var i=e.ref;return Ir(e,s),r=xu(t,e,n,r,i,s),n=wu(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wt(t,e,s)):(ce&&n&&ou(e),e.flags|=1,Pe(t,e,r,s),e.child)}function vh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Tu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Hg(t,e,i,r,s)):(t=Xi(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Hs,n(l,r)&&t.ref===e.ref)return Wt(t,e,s)}return e.flags|=1,t=yn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Hg(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Hs(i,r)&&t.ref===e.ref)if(He=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(He=!0);else return e.lanes=t.lanes,Wt(t,e,s)}return nc(t,e,n,r,s)}function zg(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(jr,Ge),Ge|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,se(jr,Ge),Ge|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,se(jr,Ge),Ge|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,se(jr,Ge),Ge|=r;return Pe(t,e,s,n),e.child}function Vg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nc(t,e,n,r,s){var i=We(n)?qn:Ie.current;return i=Fr(e,i),Ir(e,s),n=xu(t,e,n,r,i,s),r=wu(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wt(t,e,s)):(ce&&r&&ou(e),e.flags|=1,Pe(t,e,n,s),e.child)}function yh(t,e,n,r,s){if(We(n)){var i=!0;vl(e)}else i=!1;if(Ir(e,s),e.stateNode===null)Ki(t,e),$g(e,n,r),ec(e,n,r,s),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=ot(u):(u=We(n)?qn:Ie.current,u=Fr(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||c!==u)&&hh(e,l,r,u),tn=!1;var f=e.memoizedState;l.state=f,Sl(e,r,l,s),c=e.memoizedState,o!==r||f!==c||Ve.current||tn?(typeof d=="function"&&(Xa(e,n,d,r),c=e.memoizedState),(o=tn||dh(e,n,o,r,f,c,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),l.props=r,l.state=c,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,yg(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:ht(e.type,o),l.props=u,h=e.pendingProps,f=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=ot(c):(c=We(n)?qn:Ie.current,c=Fr(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==c)&&hh(e,l,r,c),tn=!1,f=e.memoizedState,l.state=f,Sl(e,r,l,s);var y=e.memoizedState;o!==h||f!==y||Ve.current||tn?(typeof p=="function"&&(Xa(e,n,p,r),y=e.memoizedState),(u=tn||dh(e,n,u,r,f,y,c)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,y,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),l.props=r,l.state=y,l.context=c,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return rc(t,e,n,r,i,s)}function rc(t,e,n,r,s,i){Vg(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return s&&rh(e,n,!1),Wt(t,e,i);r=e.stateNode,Wx.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=Hr(e,t.child,null,i),e.child=Hr(e,null,o,i)):Pe(t,e,o,i),e.memoizedState=r.state,s&&rh(e,n,!0),e.child}function Wg(t){var e=t.stateNode;e.pendingContext?nh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nh(t,e.context,!1),gu(t,e.containerInfo)}function xh(t,e,n,r,s){return Ur(),cu(s),e.flags|=256,Pe(t,e,n,r),e.child}var sc={dehydrated:null,treeContext:null,retryLane:0};function ic(t){return{baseLanes:t,cachePool:null,transitions:null}}function qg(t,e,n){var r=e.pendingProps,s=he.current,i=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),se(he,s&1),t===null)return Za(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,i?(r=e.mode,i=e.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=oo(l,r,0,null),t=Hn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ic(n),e.memoizedState=sc,t):_u(e,l));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return qx(t,e,l,r,o,s,n);if(i){i=r.fallback,l=e.mode,s=t.child,o=s.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=yn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=yn(o,i):(i=Hn(i,l,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,l=t.child.memoizedState,l=l===null?ic(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~n,e.memoizedState=sc,r}return i=t.child,t=i.sibling,r=yn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _u(t,e){return e=oo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ji(t,e,n,r){return r!==null&&cu(r),Hr(e,t.child,null,n),t=_u(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qx(t,e,n,r,s,i,l){if(n)return e.flags&256?(e.flags&=-257,r=Qo(Error(M(422))),ji(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=oo({mode:"visible",children:r.children},s,0,null),i=Hn(i,s,l,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Hr(e,t.child,null,l),e.child.memoizedState=ic(l),e.memoizedState=sc,i);if(!(e.mode&1))return ji(t,e,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(M(419)),r=Qo(i,r,void 0),ji(t,e,l,r)}if(o=(l&t.childLanes)!==0,He||o){if(r=Ee,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vt(t,s),yt(r,t,s,-1))}return Au(),r=Qo(Error(M(421))),ji(t,e,l,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=iw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Qe=pn(s.nextSibling),Ye=e,ce=!0,gt=null,t!==null&&(nt[rt++]=Lt,nt[rt++]=Bt,nt[rt++]=Gn,Lt=t.id,Bt=t.overflow,Gn=e),e=_u(e,r.children),e.flags|=4096,e)}function wh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ja(t.return,e,n)}function Yo(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Gg(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Pe(t,e,r.children,n),r=he.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wh(t,n,e);else if(t.tag===19)wh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(se(he,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&_l(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Yo(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&_l(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Yo(e,!0,n,null,i);break;case"together":Yo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ki(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=yn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Gx(t,e,n){switch(e.tag){case 3:Wg(e),Ur();break;case 5:xg(e);break;case 1:We(e.type)&&vl(e);break;case 4:gu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;se(wl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(se(he,he.current&1),e.flags|=128,null):n&e.child.childLanes?qg(t,e,n):(se(he,he.current&1),t=Wt(t,e,n),t!==null?t.sibling:null);se(he,he.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gg(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),se(he,he.current),r)break;return null;case 22:case 23:return e.lanes=0,zg(t,e,n)}return Wt(t,e,n)}var Qg,lc,Yg,Kg;Qg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lc=function(){};Yg=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Fn(Nt.current);var i=null;switch(n){case"input":s=Na(t,s),r=Na(t,r),i=[];break;case"select":s=ge({},s,{value:void 0}),r=ge({},r,{value:void 0}),i=[];break;case"textarea":s=Da(t,s),r=Da(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gl)}Ia(n,r);var l;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ps.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(o=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ps.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&oe("scroll",t),i||o===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Kg=function(t,e,n,r){n!==r&&(e.flags|=4)};function ds(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Te(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Qx(t,e,n){var r=e.pendingProps;switch(au(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(e),null;case 1:return We(e.type)&&ml(),Te(e),null;case 3:return r=e.stateNode,zr(),ae(Ve),ae(Ie),vu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ki(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gt!==null&&(pc(gt),gt=null))),lc(t,e),Te(e),null;case 5:mu(e);var s=Fn(Gs.current);if(n=e.type,t!==null&&e.stateNode!=null)Yg(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Te(e),null}if(t=Fn(Nt.current),ki(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ct]=e,r[Ws]=i,t=(e.mode&1)!==0,n){case"dialog":oe("cancel",r),oe("close",r);break;case"iframe":case"object":case"embed":oe("load",r);break;case"video":case"audio":for(s=0;s<ys.length;s++)oe(ys[s],r);break;case"source":oe("error",r);break;case"img":case"image":case"link":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"input":Ad(r,i),oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},oe("invalid",r);break;case"textarea":Dd(r,i),oe("invalid",r)}Ia(n,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Ei(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Ei(r.textContent,o,t),s=["children",""+o]):Ps.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&oe("scroll",r)}switch(n){case"input":mi(r),Td(r,i,!0);break;case"textarea":mi(r),Rd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=gl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ep(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Ct]=e,t[Ws]=r,Qg(t,e,!1,!1),e.stateNode=t;e:{switch(l=Oa(n,r),n){case"dialog":oe("cancel",t),oe("close",t),s=r;break;case"iframe":case"object":case"embed":oe("load",t),s=r;break;case"video":case"audio":for(s=0;s<ys.length;s++)oe(ys[s],t);s=r;break;case"source":oe("error",t),s=r;break;case"img":case"image":case"link":oe("error",t),oe("load",t),s=r;break;case"details":oe("toggle",t),s=r;break;case"input":Ad(t,r),s=Na(t,r),oe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ge({},r,{value:void 0}),oe("invalid",t);break;case"textarea":Dd(t,r),s=Da(t,r),oe("invalid",t);break;default:s=r}Ia(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?jp(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&kp(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ms(t,c):typeof c=="number"&&Ms(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ps.hasOwnProperty(i)?c!=null&&i==="onScroll"&&oe("scroll",t):c!=null&&Gc(t,i,c,l))}switch(n){case"input":mi(t),Td(t,r,!1);break;case"textarea":mi(t),Rd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ar(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ar(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Te(e),null;case 6:if(t&&e.stateNode!=null)Kg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=Fn(Gs.current),Fn(Nt.current),ki(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ct]=e,(i=r.nodeValue!==n)&&(t=Ye,t!==null))switch(t.tag){case 3:Ei(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ei(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ct]=e,e.stateNode=r}return Te(e),null;case 13:if(ae(he),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&Qe!==null&&e.mode&1&&!(e.flags&128))pg(),Ur(),e.flags|=98560,i=!1;else if(i=ki(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(M(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(M(317));i[Ct]=e}else Ur(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Te(e),i=!1}else gt!==null&&(pc(gt),gt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||he.current&1?Se===0&&(Se=3):Au())),e.updateQueue!==null&&(e.flags|=4),Te(e),null);case 4:return zr(),lc(t,e),t===null&&zs(e.stateNode.containerInfo),Te(e),null;case 10:return hu(e.type._context),Te(e),null;case 17:return We(e.type)&&ml(),Te(e),null;case 19:if(ae(he),i=e.memoizedState,i===null)return Te(e),null;if(r=(e.flags&128)!==0,l=i.rendering,l===null)if(r)ds(i,!1);else{if(Se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=_l(t),l!==null){for(e.flags|=128,ds(i,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return se(he,he.current&1|2),e.child}t=t.sibling}i.tail!==null&&ve()>Wr&&(e.flags|=128,r=!0,ds(i,!1),e.lanes=4194304)}else{if(!r)if(t=_l(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ds(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ce)return Te(e),null}else 2*ve()-i.renderingStartTime>Wr&&n!==1073741824&&(e.flags|=128,r=!0,ds(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(n=i.last,n!==null?n.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ve(),e.sibling=null,n=he.current,se(he,r?n&1|2:n&1),e):(Te(e),null);case 22:case 23:return Nu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ge&1073741824&&(Te(e),e.subtreeFlags&6&&(e.flags|=8192)):Te(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function Yx(t,e){switch(au(e),e.tag){case 1:return We(e.type)&&ml(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zr(),ae(Ve),ae(Ie),vu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mu(e),null;case 13:if(ae(he),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Ur()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ae(he),null;case 4:return zr(),null;case 10:return hu(e.type._context),null;case 22:case 23:return Nu(),null;case 24:return null;default:return null}}var Ni=!1,De=!1,Kx=typeof WeakSet=="function"?WeakSet:Set,$=null;function Cr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){me(t,e,r)}else n.current=null}function oc(t,e,n){try{n()}catch(r){me(t,e,r)}}var bh=!1;function Zx(t,e){if(Va=hl,t=tg(),lu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(o=l+s),h!==i||r!==0&&h.nodeType!==3||(c=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===s&&(o=l),f===i&&++d===r&&(c=l),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wa={focusedElem:t,selectionRange:n},hl=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,b=y.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:ht(e.type,x),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(w){me(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return y=bh,bh=!1,y}function Cs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&oc(e,n,i)}s=s.next}while(s!==r)}}function io(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ac(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Zg(t){var e=t.alternate;e!==null&&(t.alternate=null,Zg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ct],delete e[Ws],delete e[Qa],delete e[Ix],delete e[Ox])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jg(t){return t.tag===5||t.tag===3||t.tag===4}function Sh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gl));else if(r!==4&&(t=t.child,t!==null))for(cc(t,e,n),t=t.sibling;t!==null;)cc(t,e,n),t=t.sibling}function uc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(uc(t,e,n),t=t.sibling;t!==null;)uc(t,e,n),t=t.sibling}var Ce=null,ft=!1;function Zt(t,e,n){for(n=n.child;n!==null;)Xg(t,e,n),n=n.sibling}function Xg(t,e,n){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(Zl,n)}catch{}switch(n.tag){case 5:De||Cr(n,e);case 6:var r=Ce,s=ft;Ce=null,Zt(t,e,n),Ce=r,ft=s,Ce!==null&&(ft?(t=Ce,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ce.removeChild(n.stateNode));break;case 18:Ce!==null&&(ft?(t=Ce,n=n.stateNode,t.nodeType===8?Ho(t.parentNode,n):t.nodeType===1&&Ho(t,n),Fs(t)):Ho(Ce,n.stateNode));break;case 4:r=Ce,s=ft,Ce=n.stateNode.containerInfo,ft=!0,Zt(t,e,n),Ce=r,ft=s;break;case 0:case 11:case 14:case 15:if(!De&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&oc(n,e,l),s=s.next}while(s!==r)}Zt(t,e,n);break;case 1:if(!De&&(Cr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){me(n,e,o)}Zt(t,e,n);break;case 21:Zt(t,e,n);break;case 22:n.mode&1?(De=(r=De)||n.memoizedState!==null,Zt(t,e,n),De=r):Zt(t,e,n);break;default:Zt(t,e,n)}}function _h(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Kx),e.forEach(function(r){var s=lw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ut(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ce=o.stateNode,ft=!1;break e;case 3:Ce=o.stateNode.containerInfo,ft=!0;break e;case 4:Ce=o.stateNode.containerInfo,ft=!0;break e}o=o.return}if(Ce===null)throw Error(M(160));Xg(i,l,s),Ce=null,ft=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){me(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)em(e,t),e=e.sibling}function em(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ut(e,t),bt(t),r&4){try{Cs(3,t,t.return),io(3,t)}catch(x){me(t,t.return,x)}try{Cs(5,t,t.return)}catch(x){me(t,t.return,x)}}break;case 1:ut(e,t),bt(t),r&512&&n!==null&&Cr(n,n.return);break;case 5:if(ut(e,t),bt(t),r&512&&n!==null&&Cr(n,n.return),t.flags&32){var s=t.stateNode;try{Ms(s,"")}catch(x){me(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,l=n!==null?n.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Sp(s,i),Oa(o,l);var u=Oa(o,i);for(l=0;l<c.length;l+=2){var d=c[l],h=c[l+1];d==="style"?jp(s,h):d==="dangerouslySetInnerHTML"?kp(s,h):d==="children"?Ms(s,h):Gc(s,d,h,u)}switch(o){case"input":Aa(s,i);break;case"textarea":_p(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ar(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ar(s,!!i.multiple,i.defaultValue,!0):Ar(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ws]=i}catch(x){me(t,t.return,x)}}break;case 6:if(ut(e,t),bt(t),r&4){if(t.stateNode===null)throw Error(M(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){me(t,t.return,x)}}break;case 3:if(ut(e,t),bt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fs(e.containerInfo)}catch(x){me(t,t.return,x)}break;case 4:ut(e,t),bt(t);break;case 13:ut(e,t),bt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cu=ve())),r&4&&_h(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(De=(u=De)||d,ut(e,t),De=u):ut(e,t),bt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(h=$=d;$!==null;){switch(f=$,p=f.child,f.tag){case 0:case 11:case 14:case 15:Cs(4,f,f.return);break;case 1:Cr(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){me(r,n,x)}}break;case 5:Cr(f,f.return);break;case 22:if(f.memoizedState!==null){kh(h);continue}}p!==null?(p.return=f,$=p):kh(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Cp("display",l))}catch(x){me(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){me(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ut(e,t),bt(t),r&4&&_h(t);break;case 21:break;default:ut(e,t),bt(t)}}function bt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jg(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ms(s,""),r.flags&=-33);var i=Sh(t);uc(t,i,s);break;case 3:case 4:var l=r.stateNode.containerInfo,o=Sh(t);cc(t,o,l);break;default:throw Error(M(161))}}catch(c){me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Jx(t,e,n){$=t,tm(t)}function tm(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||Ni;if(!l){var o=s.alternate,c=o!==null&&o.memoizedState!==null||De;o=Ni;var u=De;if(Ni=l,(De=c)&&!u)for($=s;$!==null;)l=$,c=l.child,l.tag===22&&l.memoizedState!==null?Ch(s):c!==null?(c.return=l,$=c):Ch(s);for(;i!==null;)$=i,tm(i),i=i.sibling;$=s,Ni=o,De=u}Eh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):Eh(t)}}function Eh(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:De||io(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!De)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ht(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ah(e,i,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ah(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Fs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}De||e.flags&512&&ac(e)}catch(f){me(e,e.return,f)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function kh(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Ch(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{io(4,e)}catch(c){me(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){me(e,s,c)}}var i=e.return;try{ac(e)}catch(c){me(e,i,c)}break;case 5:var l=e.return;try{ac(e)}catch(c){me(e,l,c)}}}catch(c){me(e,e.return,c)}if(e===t){$=null;break}var o=e.sibling;if(o!==null){o.return=e.return,$=o;break}$=e.return}}var Xx=Math.ceil,Cl=Gt.ReactCurrentDispatcher,Eu=Gt.ReactCurrentOwner,it=Gt.ReactCurrentBatchConfig,J=0,Ee=null,ye=null,je=0,Ge=0,jr=kn(0),Se=0,Zs=null,Yn=0,lo=0,ku=0,js=null,Fe=null,Cu=0,Wr=1/0,Ot=null,jl=!1,dc=null,mn=null,Ai=!1,on=null,Nl=0,Ns=0,hc=null,Zi=-1,Ji=0;function Me(){return J&6?ve():Zi!==-1?Zi:Zi=ve()}function vn(t){return t.mode&1?J&2&&je!==0?je&-je:Mx.transition!==null?(Ji===0&&(Ji=$p()),Ji):(t=te,t!==0||(t=window.event,t=t===void 0?16:qp(t.type)),t):1}function yt(t,e,n,r){if(50<Ns)throw Ns=0,hc=null,Error(M(185));ri(t,n,r),(!(J&2)||t!==Ee)&&(t===Ee&&(!(J&2)&&(lo|=n),Se===4&&rn(t,je)),qe(t,r),n===1&&J===0&&!(e.mode&1)&&(Wr=ve()+500,no&&Cn()))}function qe(t,e){var n=t.callbackNode;M0(t,e);var r=dl(t,t===Ee?je:0);if(r===0)n!==null&&Pd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Pd(n),e===1)t.tag===0?Px(jh.bind(null,t)):dg(jh.bind(null,t)),Dx(function(){!(J&6)&&Cn()}),n=null;else{switch(Fp(r)){case 1:n=Jc;break;case 4:n=Lp;break;case 16:n=ul;break;case 536870912:n=Bp;break;default:n=ul}n=cm(n,nm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nm(t,e){if(Zi=-1,Ji=0,J&6)throw Error(M(327));var n=t.callbackNode;if(Or()&&t.callbackNode!==n)return null;var r=dl(t,t===Ee?je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Al(t,r);else{e=r;var s=J;J|=2;var i=sm();(Ee!==t||je!==e)&&(Ot=null,Wr=ve()+500,Un(t,e));do try{nw();break}catch(o){rm(t,o)}while(!0);du(),Cl.current=i,J=s,ye!==null?e=0:(Ee=null,je=0,e=Se)}if(e!==0){if(e===2&&(s=$a(t),s!==0&&(r=s,e=fc(t,s))),e===1)throw n=Zs,Un(t,0),rn(t,r),qe(t,ve()),n;if(e===6)rn(t,r);else{if(s=t.current.alternate,!(r&30)&&!ew(s)&&(e=Al(t,r),e===2&&(i=$a(t),i!==0&&(r=i,e=fc(t,i))),e===1))throw n=Zs,Un(t,0),rn(t,r),qe(t,ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:Rn(t,Fe,Ot);break;case 3:if(rn(t,r),(r&130023424)===r&&(e=Cu+500-ve(),10<e)){if(dl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Me(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ga(Rn.bind(null,t,Fe,Ot),e);break}Rn(t,Fe,Ot);break;case 4:if(rn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var l=31-vt(r);i=1<<l,l=e[l],l>s&&(s=l),r&=~i}if(r=s,r=ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Xx(r/1960))-r,10<r){t.timeoutHandle=Ga(Rn.bind(null,t,Fe,Ot),r);break}Rn(t,Fe,Ot);break;case 5:Rn(t,Fe,Ot);break;default:throw Error(M(329))}}}return qe(t,ve()),t.callbackNode===n?nm.bind(null,t):null}function fc(t,e){var n=js;return t.current.memoizedState.isDehydrated&&(Un(t,e).flags|=256),t=Al(t,e),t!==2&&(e=Fe,Fe=n,e!==null&&pc(e)),t}function pc(t){Fe===null?Fe=t:Fe.push.apply(Fe,t)}function ew(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!xt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rn(t,e){for(e&=~ku,e&=~lo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vt(e),r=1<<n;t[n]=-1,e&=~r}}function jh(t){if(J&6)throw Error(M(327));Or();var e=dl(t,0);if(!(e&1))return qe(t,ve()),null;var n=Al(t,e);if(t.tag!==0&&n===2){var r=$a(t);r!==0&&(e=r,n=fc(t,r))}if(n===1)throw n=Zs,Un(t,0),rn(t,e),qe(t,ve()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rn(t,Fe,Ot),qe(t,ve()),null}function ju(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(Wr=ve()+500,no&&Cn())}}function Kn(t){on!==null&&on.tag===0&&!(J&6)&&Or();var e=J;J|=1;var n=it.transition,r=te;try{if(it.transition=null,te=1,t)return t()}finally{te=r,it.transition=n,J=e,!(J&6)&&Cn()}}function Nu(){Ge=jr.current,ae(jr)}function Un(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Tx(n)),ye!==null)for(n=ye.return;n!==null;){var r=n;switch(au(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ml();break;case 3:zr(),ae(Ve),ae(Ie),vu();break;case 5:mu(r);break;case 4:zr();break;case 13:ae(he);break;case 19:ae(he);break;case 10:hu(r.type._context);break;case 22:case 23:Nu()}n=n.return}if(Ee=t,ye=t=yn(t.current,null),je=Ge=e,Se=0,Zs=null,ku=lo=Yn=0,Fe=js=null,$n!==null){for(e=0;e<$n.length;e++)if(n=$n[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=s,r.next=l}n.pending=r}$n=null}return t}function rm(t,e){do{var n=ye;try{if(du(),Qi.current=kl,El){for(var r=pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}El=!1}if(Qn=0,_e=be=pe=null,ks=!1,Qs=0,Eu.current=null,n===null||n.return===null){Se=1,Zs=e,ye=null;break}e:{var i=t,l=n.return,o=n,c=e;if(e=je,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ph(l);if(p!==null){p.flags&=-257,gh(p,l,o,i,e),p.mode&1&&fh(i,u,e),e=p,c=u;var y=e.updateQueue;if(y===null){var x=new Set;x.add(c),e.updateQueue=x}else y.add(c);break e}else{if(!(e&1)){fh(i,u,e),Au();break e}c=Error(M(426))}}else if(ce&&o.mode&1){var b=ph(l);if(b!==null){!(b.flags&65536)&&(b.flags|=256),gh(b,l,o,i,e),cu(Vr(c,o));break e}}i=c=Vr(c,o),Se!==4&&(Se=2),js===null?js=[i]:js.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Fg(i,c,e);oh(i,g);break e;case 1:o=c;var m=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(mn===null||!mn.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=Ug(i,o,e);oh(i,w);break e}}i=i.return}while(i!==null)}lm(n)}catch(T){e=T,ye===n&&n!==null&&(ye=n=n.return);continue}break}while(!0)}function sm(){var t=Cl.current;return Cl.current=kl,t===null?kl:t}function Au(){(Se===0||Se===3||Se===2)&&(Se=4),Ee===null||!(Yn&268435455)&&!(lo&268435455)||rn(Ee,je)}function Al(t,e){var n=J;J|=2;var r=sm();(Ee!==t||je!==e)&&(Ot=null,Un(t,e));do try{tw();break}catch(s){rm(t,s)}while(!0);if(du(),J=n,Cl.current=r,ye!==null)throw Error(M(261));return Ee=null,je=0,Se}function tw(){for(;ye!==null;)im(ye)}function nw(){for(;ye!==null&&!j0();)im(ye)}function im(t){var e=am(t.alternate,t,Ge);t.memoizedProps=t.pendingProps,e===null?lm(t):ye=e,Eu.current=null}function lm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Yx(n,e),n!==null){n.flags&=32767,ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Se=6,ye=null;return}}else if(n=Qx(n,e,Ge),n!==null){ye=n;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);Se===0&&(Se=5)}function Rn(t,e,n){var r=te,s=it.transition;try{it.transition=null,te=1,rw(t,e,n,r)}finally{it.transition=s,te=r}return null}function rw(t,e,n,r){do Or();while(on!==null);if(J&6)throw Error(M(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(L0(t,i),t===Ee&&(ye=Ee=null,je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ai||(Ai=!0,cm(ul,function(){return Or(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=it.transition,it.transition=null;var l=te;te=1;var o=J;J|=4,Eu.current=null,Zx(t,n),em(n,t),_x(Wa),hl=!!Va,Wa=Va=null,t.current=n,Jx(n),N0(),J=o,te=l,it.transition=i}else t.current=n;if(Ai&&(Ai=!1,on=t,Nl=s),i=t.pendingLanes,i===0&&(mn=null),D0(n.stateNode),qe(t,ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jl)throw jl=!1,t=dc,dc=null,t;return Nl&1&&t.tag!==0&&Or(),i=t.pendingLanes,i&1?t===hc?Ns++:(Ns=0,hc=t):Ns=0,Cn(),null}function Or(){if(on!==null){var t=Fp(Nl),e=it.transition,n=te;try{if(it.transition=null,te=16>t?16:t,on===null)var r=!1;else{if(t=on,on=null,Nl=0,J&6)throw Error(M(331));var s=J;for(J|=4,$=t.current;$!==null;){var i=$,l=i.child;if($.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for($=u;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:Cs(8,d,i)}var h=d.child;if(h!==null)h.return=d,$=h;else for(;$!==null;){d=$;var f=d.sibling,p=d.return;if(Zg(d),d===u){$=null;break}if(f!==null){f.return=p,$=f;break}$=p}}}var y=i.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}$=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,$=l;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Cs(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,$=g;break e}$=i.return}}var m=t.current;for($=m;$!==null;){l=$;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,$=v;else e:for(l=m;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:io(9,o)}}catch(T){me(o,o.return,T)}if(o===l){$=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,$=w;break e}$=o.return}}if(J=s,Cn(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(Zl,t)}catch{}r=!0}return r}finally{te=n,it.transition=e}}return!1}function Nh(t,e,n){e=Vr(n,e),e=Fg(t,e,1),t=gn(t,e,1),e=Me(),t!==null&&(ri(t,1,e),qe(t,e))}function me(t,e,n){if(t.tag===3)Nh(t,t,n);else for(;e!==null;){if(e.tag===3){Nh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mn===null||!mn.has(r))){t=Vr(n,t),t=Ug(e,t,1),e=gn(e,t,1),t=Me(),e!==null&&(ri(e,1,t),qe(e,t));break}}e=e.return}}function sw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Me(),t.pingedLanes|=t.suspendedLanes&n,Ee===t&&(je&n)===n&&(Se===4||Se===3&&(je&130023424)===je&&500>ve()-Cu?Un(t,0):ku|=n),qe(t,e)}function om(t,e){e===0&&(t.mode&1?(e=xi,xi<<=1,!(xi&130023424)&&(xi=4194304)):e=1);var n=Me();t=Vt(t,e),t!==null&&(ri(t,e,n),qe(t,n))}function iw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),om(t,n)}function lw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),om(t,n)}var am;am=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ve.current)He=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return He=!1,Gx(t,e,n);He=!!(t.flags&131072)}else He=!1,ce&&e.flags&1048576&&hg(e,xl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ki(t,e),t=e.pendingProps;var s=Fr(e,Ie.current);Ir(e,n),s=xu(null,e,r,t,s,n);var i=wu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,We(r)?(i=!0,vl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pu(e),s.updater=so,e.stateNode=s,s._reactInternals=e,ec(e,r,t,n),e=rc(null,e,r,!0,i,n)):(e.tag=0,ce&&i&&ou(e),Pe(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ki(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=aw(r),t=ht(r,t),s){case 0:e=nc(null,e,r,t,n);break e;case 1:e=yh(null,e,r,t,n);break e;case 11:e=mh(null,e,r,t,n);break e;case 14:e=vh(null,e,r,ht(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ht(r,s),nc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ht(r,s),yh(t,e,r,s,n);case 3:e:{if(Wg(e),t===null)throw Error(M(387));r=e.pendingProps,i=e.memoizedState,s=i.element,yg(t,e),Sl(e,r,null,n);var l=e.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Vr(Error(M(423)),e),e=xh(t,e,r,n,s);break e}else if(r!==s){s=Vr(Error(M(424)),e),e=xh(t,e,r,n,s);break e}else for(Qe=pn(e.stateNode.containerInfo.firstChild),Ye=e,ce=!0,gt=null,n=mg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ur(),r===s){e=Wt(t,e,n);break e}Pe(t,e,r,n)}e=e.child}return e;case 5:return xg(e),t===null&&Za(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,l=s.children,qa(r,s)?l=null:i!==null&&qa(r,i)&&(e.flags|=32),Vg(t,e),Pe(t,e,l,n),e.child;case 6:return t===null&&Za(e),null;case 13:return qg(t,e,n);case 4:return gu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hr(e,null,r,n):Pe(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ht(r,s),mh(t,e,r,s,n);case 7:return Pe(t,e,e.pendingProps,n),e.child;case 8:return Pe(t,e,e.pendingProps.children,n),e.child;case 12:return Pe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,l=s.value,se(wl,r._currentValue),r._currentValue=l,i!==null)if(xt(i.value,l)){if(i.children===s.children&&!Ve.current){e=Wt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ft(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ja(i.return,n,e),o.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(M(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Ja(l,n,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Pe(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ir(e,n),s=ot(s),r=r(s),e.flags|=1,Pe(t,e,r,n),e.child;case 14:return r=e.type,s=ht(r,e.pendingProps),s=ht(r.type,s),vh(t,e,r,s,n);case 15:return Hg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ht(r,s),Ki(t,e),e.tag=1,We(r)?(t=!0,vl(e)):t=!1,Ir(e,n),$g(e,r,s),ec(e,r,s,n),rc(null,e,r,!0,t,n);case 19:return Gg(t,e,n);case 22:return zg(t,e,n)}throw Error(M(156,e.tag))};function cm(t,e){return Mp(t,e)}function ow(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function st(t,e,n,r){return new ow(t,e,n,r)}function Tu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aw(t){if(typeof t=="function")return Tu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yc)return 11;if(t===Kc)return 14}return 2}function yn(t,e){var n=t.alternate;return n===null?(n=st(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xi(t,e,n,r,s,i){var l=2;if(r=t,typeof t=="function")Tu(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case vr:return Hn(n.children,s,i,e);case Qc:l=8,s|=8;break;case Ea:return t=st(12,n,e,s|2),t.elementType=Ea,t.lanes=i,t;case ka:return t=st(13,n,e,s),t.elementType=ka,t.lanes=i,t;case Ca:return t=st(19,n,e,s),t.elementType=Ca,t.lanes=i,t;case xp:return oo(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vp:l=10;break e;case yp:l=9;break e;case Yc:l=11;break e;case Kc:l=14;break e;case en:l=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=st(l,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Hn(t,e,n,r){return t=st(7,t,r,e),t.lanes=n,t}function oo(t,e,n,r){return t=st(22,t,r,e),t.elementType=xp,t.lanes=n,t.stateNode={isHidden:!1},t}function Ko(t,e,n){return t=st(6,t,null,e),t.lanes=n,t}function Zo(t,e,n){return e=st(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Do(0),this.expirationTimes=Do(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Do(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Du(t,e,n,r,s,i,l,o,c){return t=new cw(t,e,n,o,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=st(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pu(i),t}function uw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function um(t){if(!t)return bn;t=t._reactInternals;e:{if(nr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(We(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(We(n))return ug(t,n,e)}return e}function dm(t,e,n,r,s,i,l,o,c){return t=Du(n,r,!0,t,s,i,l,o,c),t.context=um(null),n=t.current,r=Me(),s=vn(n),i=Ft(r,s),i.callback=e??null,gn(n,i,s),t.current.lanes=s,ri(t,s,r),qe(t,r),t}function ao(t,e,n,r){var s=e.current,i=Me(),l=vn(s);return n=um(n),e.context===null?e.context=n:e.pendingContext=n,e=Ft(i,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gn(s,e,l),t!==null&&(yt(t,s,l,i),Gi(t,s,l)),l}function Tl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ah(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ru(t,e){Ah(t,e),(t=t.alternate)&&Ah(t,e)}function dw(){return null}var hm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Iu(t){this._internalRoot=t}co.prototype.render=Iu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));ao(t,e,null,null)};co.prototype.unmount=Iu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kn(function(){ao(null,t,null,null)}),e[zt]=null}};function co(t){this._internalRoot=t}co.prototype.unstable_scheduleHydration=function(t){if(t){var e=zp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<nn.length&&e!==0&&e<nn[n].priority;n++);nn.splice(n,0,t),n===0&&Wp(t)}};function Ou(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Th(){}function hw(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Tl(l);i.call(u)}}var l=dm(e,r,t,0,null,!1,!1,"",Th);return t._reactRootContainer=l,t[zt]=l.current,zs(t.nodeType===8?t.parentNode:t),Kn(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var u=Tl(c);o.call(u)}}var c=Du(t,0,!1,null,null,!1,!1,"",Th);return t._reactRootContainer=c,t[zt]=c.current,zs(t.nodeType===8?t.parentNode:t),Kn(function(){ao(e,c,n,r)}),c}function ho(t,e,n,r,s){var i=n._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var o=s;s=function(){var c=Tl(l);o.call(c)}}ao(e,l,t,s)}else l=hw(n,e,t,s,r);return Tl(l)}Up=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vs(e.pendingLanes);n!==0&&(Xc(e,n|1),qe(e,ve()),!(J&6)&&(Wr=ve()+500,Cn()))}break;case 13:Kn(function(){var r=Vt(t,1);if(r!==null){var s=Me();yt(r,t,1,s)}}),Ru(t,1)}};eu=function(t){if(t.tag===13){var e=Vt(t,134217728);if(e!==null){var n=Me();yt(e,t,134217728,n)}Ru(t,134217728)}};Hp=function(t){if(t.tag===13){var e=vn(t),n=Vt(t,e);if(n!==null){var r=Me();yt(n,t,e,r)}Ru(t,e)}};zp=function(){return te};Vp=function(t,e){var n=te;try{return te=t,e()}finally{te=n}};Ma=function(t,e,n){switch(e){case"input":if(Aa(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=to(r);if(!s)throw Error(M(90));bp(r),Aa(r,s)}}}break;case"textarea":_p(t,n);break;case"select":e=n.value,e!=null&&Ar(t,!!n.multiple,e,!1)}};Tp=ju;Dp=Kn;var fw={usingClientEntryPoint:!1,Events:[ii,br,to,Np,Ap,ju]},hs={findFiberByHostInstance:Bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pw={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Op(t),t===null?null:t.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||dw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ti=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ti.isDisabled&&Ti.supportsFiber)try{Zl=Ti.inject(pw),jt=Ti}catch{}}Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fw;Xe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ou(e))throw Error(M(200));return uw(t,e,null,n)};Xe.createRoot=function(t,e){if(!Ou(t))throw Error(M(299));var n=!1,r="",s=hm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Du(t,1,!1,null,null,n,!1,r,s),t[zt]=e.current,zs(t.nodeType===8?t.parentNode:t),new Iu(e)};Xe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=Op(e),t=t===null?null:t.stateNode,t};Xe.flushSync=function(t){return Kn(t)};Xe.hydrate=function(t,e,n){if(!uo(e))throw Error(M(200));return ho(null,t,e,!0,n)};Xe.hydrateRoot=function(t,e,n){if(!Ou(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",l=hm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=dm(e,null,t,1,n??null,s,!1,i,l),t[zt]=e.current,zs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new co(e)};Xe.render=function(t,e,n){if(!uo(e))throw Error(M(200));return ho(null,t,e,!1,n)};Xe.unmountComponentAtNode=function(t){if(!uo(t))throw Error(M(40));return t._reactRootContainer?(Kn(function(){ho(null,null,t,!1,function(){t._reactRootContainer=null,t[zt]=null})}),!0):!1};Xe.unstable_batchedUpdates=ju;Xe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!uo(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return ho(t,e,n,!1,r)};Xe.version="18.3.1-next-f1338f8080-20240426";function fm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fm)}catch(t){console.error(t)}}fm(),fp.exports=Xe;var Dl=fp.exports,Dh=Dl;Sa.createRoot=Dh.createRoot,Sa.hydrateRoot=Dh.hydrateRoot;/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ne=(t,e)=>{const n=P.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...u},d)=>P.createElement("svg",{ref:d,...gw,width:s,height:s,stroke:r,strokeWidth:l?Number(i)*24/Number(s):i,className:["lucide",`lucide-${mw(t)}`,o].join(" "),...u},[...e.map(([h,f])=>P.createElement(h,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=ne("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=ne("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=ne("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=ne("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=ne("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=ne("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=ne("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=ne("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=ne("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=ne("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=ne("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=ne("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=ne("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=ne("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=ne("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ew="modulepreload",kw=function(t){return"/"+t},Ph={},oi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=kw(c),c in Ph)return;Ph[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Ew,u||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return s.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},Cw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>oi(async()=>{const{default:r}=await Promise.resolve().then(()=>ts);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Bu extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class jw extends Bu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Mh extends Bu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Lh extends Bu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(gc||(gc={}));var Nw=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(d){try{u(r.next(d))}catch(h){l(h)}}function c(d){try{u(r.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(t,e||[])).next())})};class Aw{constructor(e,{headers:n={},customFetch:r,region:s=gc.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Cw(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Nw(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:l}=n;let o={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(o["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=l):typeof l=="string"?(o["Content-Type"]="text/plain",d=l):typeof FormData<"u"&&l instanceof FormData?d=l:(o["Content-Type"]="application/json",d=JSON.stringify(l)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:d}).catch(x=>{throw new jw(x)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Mh(h);if(!h.ok)throw new Lh(h);let p=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return p==="application/json"?y=yield h.json():p==="application/octet-stream"?y=yield h.blob():p==="text/event-stream"?y=h:p==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof Lh||s instanceof Mh?s.context:void 0}}})}}var Ue={},$u={},fo={},ai={},po={},go={},Tw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Gr=Tw();const Dw=Gr.fetch,Em=Gr.fetch.bind(Gr),km=Gr.Headers,Rw=Gr.Request,Iw=Gr.Response,ts=Object.freeze(Object.defineProperty({__proto__:null,Headers:km,Request:Rw,Response:Iw,default:Em,fetch:Dw},Symbol.toStringTag,{value:"Module"})),Ow=zy(ts);var mo={};Object.defineProperty(mo,"__esModule",{value:!0});let Pw=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};mo.default=Pw;var Cm=lt&&lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(go,"__esModule",{value:!0});const Mw=Cm(Ow),Lw=Cm(mo);let Bw=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Mw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,c,u;let d=null,h=null,f=null,p=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const b=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&g&&g.length>1&&(f=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{d=JSON.parse(b),Array.isArray(d)&&i.status===404&&(h=[],d=null,p=200,y="OK")}catch{i.status===404&&b===""?(p=204,y="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,y="OK"),d&&this.shouldThrowOnError)throw new Lw.default(d)}return{error:d,data:h,count:f,status:p,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var l,o,c;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};go.default=Bw;var $w=lt&&lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(po,"__esModule",{value:!0});const Fw=$w(go);let Uw=class extends Fw.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(l,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:l="text"}={}){var o;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${u}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};po.default=Uw;var Hw=lt&&lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ai,"__esModule",{value:!0});const zw=Hw(po);let Vw=class extends zw.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${l}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};ai.default=Vw;var Ww=lt&&lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fo,"__esModule",{value:!0});const fs=Ww(ai);let qw=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const l=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),r&&this.headers.append("Prefer",`count=${r}`),new fs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new fs.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new fs.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new fs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new fs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};fo.default=qw;var jm=lt&&lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($u,"__esModule",{value:!0});const Gw=jm(fo),Qw=jm(ai);let Yw=class Nm{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new Gw.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Nm(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var l;let o;const c=new URL(`${this.url}/rpc/${e}`);let u;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(o="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Qw.default({method:o,url:c,headers:d,schema:this.schemaName,body:u,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};$u.default=Yw;var ns=lt&&lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.PostgrestError=Ue.PostgrestBuilder=Ue.PostgrestTransformBuilder=Ue.PostgrestFilterBuilder=Ue.PostgrestQueryBuilder=Ue.PostgrestClient=void 0;const Am=ns($u);Ue.PostgrestClient=Am.default;const Tm=ns(fo);Ue.PostgrestQueryBuilder=Tm.default;const Dm=ns(ai);Ue.PostgrestFilterBuilder=Dm.default;const Rm=ns(po);Ue.PostgrestTransformBuilder=Rm.default;const Im=ns(go);Ue.PostgrestBuilder=Im.default;const Om=ns(mo);Ue.PostgrestError=Om.default;var Kw=Ue.default={PostgrestClient:Am.default,PostgrestQueryBuilder:Tm.default,PostgrestFilterBuilder:Dm.default,PostgrestTransformBuilder:Rm.default,PostgrestBuilder:Im.default,PostgrestError:Om.default};const{PostgrestClient:Zw,PostgrestQueryBuilder:qA,PostgrestFilterBuilder:GA,PostgrestTransformBuilder:QA,PostgrestBuilder:YA,PostgrestError:KA}=Kw;class Jw{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Xw="2.15.1",eb=`realtime-js/${Xw}`,tb="1.0.0",mc=1e4,nb=1e3,rb=100;var As;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(As||(As={}));var xe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(xe||(xe={}));var pt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(pt||(pt={}));var vc;(function(t){t.websocket="websocket"})(vc||(vc={}));var Mn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Mn||(Mn={}));class sb{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let l=this.HEADER_LENGTH+2;const o=r.decode(e.slice(l,l+s));l=l+s;const c=r.decode(e.slice(l,l+i));l=l+i;const u=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class Pm{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var re;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(re||(re={}));const Bh=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,l)=>(i[l]=ib(l,t,e,s),i),{})},ib=(t,e,n,r)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,l=n[t];return i&&!r.includes(i)?Mm(i,l):yc(l)},Mm=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return cb(e,n)}switch(t){case re.bool:return lb(e);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return ob(e);case re.json:case re.jsonb:return ab(e);case re.timestamp:return ub(e);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return yc(e);default:return yc(e)}},yc=t=>t,lb=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ob=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ab=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},cb=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const l=t.slice(1,n);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>Mm(e,o))}return t},ub=t=>typeof t=="string"?t.replace(" ","T"):t,Lm=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Jo{constructor(e,n,r={},s=mc){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var $h;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})($h||($h={}));class Ts{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ts.syncState(this.state,s,i,l),this.pendingDiffs.forEach(c=>{this.state=Ts.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ts.syncDiff(this.state,s,i,l),o())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),l=this.transformState(n),o={},c={};return this.map(i,(u,d)=>{l[u]||(c[u]=d)}),this.map(l,(u,d)=>{const h=i[u];if(h){const f=d.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),y=d.filter(b=>p.indexOf(b.presence_ref)<0),x=h.filter(b=>f.indexOf(b.presence_ref)<0);y.length>0&&(o[u]=y),x.length>0&&(c[u]=x)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),d.length>0){const h=e[o].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[o].unshift(...f)}r(o,d,c)}),this.map(l,(o,c)=>{let u=e[o];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[o]=u,s(o,u,c),u.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Fh||(Fh={}));var Ds;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ds||(Ds={}));var Pt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Pt||(Pt={}));class Fu{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Jo(this,pt.join,this.params,this.timeout),this.rejoinTimer=new Pm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ts(this),this.broadcastEndpointURL=Lm(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==xe.closed){const{config:{broadcast:i,presence:l,private:o}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[Ds.PRESENCE]&&this.bindings[Ds.PRESENCE].length>0,d={},h={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:c,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Pt.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Pt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){e==null||e(Pt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(p=y==null?void 0:y.length)!==null&&p!==void 0?p:0,b=[];for(let g=0;g<x;g++){const m=y[g],{filter:{event:v,schema:w,table:T,filter:N}}=m,k=f&&f[g];if(k&&k.event===v&&k.schema===w&&k.table===T&&k.filter===N)b.push(Object.assign(Object.assign({},m),{id:k.id}));else{this.unsubscribe(),this.state=xe.errored,e==null||e(Pt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(Pt.SUBSCRIBED);return}}).receive("error",f=>{this.state=xe.errored,e==null||e(Pt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Pt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===xe.joined&&e===Ds.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=xe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Jo(this,pt.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xe.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Jo(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>rb){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const l=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=pt;if(r&&[o,c,u,d].indexOf(l)>=0&&r!==this._joinRef())return;let f=this._onMessage(l,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,x,b;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(x=p.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===l}).map(p=>p.callback(f,r)):(i=this.bindings[l])===null||i===void 0||i.filter(p=>{var y,x,b,g,m,v;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in p){const w=p.id,T=(y=p.filter)===null||y===void 0?void 0:y.event;return w&&((x=n.ids)===null||x===void 0?void 0:x.includes(w))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const w=(m=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return w==="*"||w===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===l}).map(p=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:x,table:b,commit_timestamp:g,type:m,errors:v}=y;f=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:g,eventType:m,new:{},old:{},errors:v}),this._getPayloadRecords(y))}p.callback(f,r)})}_isClosed(){return this.state===xe.closed}_isJoined(){return this.state===xe.joined}_isJoining(){return this.state===xe.joining}_isLeaving(){return this.state===xe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Fu.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pt.close,{},e)}_onError(e){this._on(pt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Bh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Bh(e.columns,e.old_record)),n}}const Uh=()=>{},Di={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},db=[1e3,2e3,5e3,1e4],hb=1e4,fb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class pb{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mc,this.transport=null,this.heartbeatIntervalMs=Di.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Uh,this.ref=0,this.reconnectTimer=null,this.logger=Uh,this.conn=null,this.sendBuffer=[],this.serializer=new sb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>oi(async()=>{const{default:o}=await Promise.resolve().then(()=>ts);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${vc.websocket}`,this.httpEndpoint=Lm(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Jw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:tb}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case As.connecting:return Mn.Connecting;case As.open:return Mn.Open;case As.closing:return Mn.Closing;default:return Mn.Closed}}isConnected(){return this.connectionState()===Mn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Fu(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,l=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(nb,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Di.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:l}=n,o=l?`(${l})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(pt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([fb],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:eb};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(pt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Pm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Di.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,l,o,c,u;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:mc,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Di.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=e==null?void 0:e.reconnectAfterMs)!==null&&o!==void 0?o:d=>db[d-1]||hb,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(d,h)=>h(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Uu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function we(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class gb extends Uu{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class xc extends Uu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var mb=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(d){try{u(r.next(d))}catch(h){l(h)}}function c(d){try{u(r.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(t,e||[])).next())})};const Bm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>oi(async()=>{const{default:r}=await Promise.resolve().then(()=>ts);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},vb=()=>mb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield oi(()=>Promise.resolve().then(()=>ts),void 0)).Response:Response}),wc=t=>{if(Array.isArray(t))return t.map(n=>wc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=wc(r)}),e},yb=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var rr=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(d){try{u(r.next(d))}catch(h){l(h)}}function c(d){try{u(r.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(t,e||[])).next())})};const Xo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xb=(t,e,n)=>rr(void 0,void 0,void 0,function*(){const r=yield vb();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,l=(s==null?void 0:s.statusCode)||i+"";e(new gb(Xo(s),i,l))}).catch(s=>{e(new xc(Xo(s),s))}):e(new xc(Xo(t),t))}),wb=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(yb(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function ci(t,e,n,r,s,i){return rr(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(n,wb(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>xb(c,o,r))})})}function Rl(t,e,n,r){return rr(this,void 0,void 0,function*(){return ci(t,"GET",e,n,r)})}function _t(t,e,n,r,s){return rr(this,void 0,void 0,function*(){return ci(t,"POST",e,r,s,n)})}function bc(t,e,n,r,s){return rr(this,void 0,void 0,function*(){return ci(t,"PUT",e,r,s,n)})}function bb(t,e,n,r){return rr(this,void 0,void 0,function*(){return ci(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function $m(t,e,n,r,s){return rr(this,void 0,void 0,function*(){return ci(t,"DELETE",e,r,s,n)})}var Oe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(d){try{u(r.next(d))}catch(h){l(h)}}function c(d){try{u(r.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(t,e||[])).next())})};const Sb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _b{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Bm(s)}uploadOrUpdate(e,n,r,s){return Oe(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Hh),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?bc:_t)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(we(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Oe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Hh.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield bc(this.fetch,o.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(we(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Oe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield _t(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new Uu("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:o},error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}update(e,n,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Oe(this,void 0,void 0,function*(){try{return{data:yield _t(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Oe(this,void 0,void 0,function*(){try{return{data:{path:(yield _t(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Oe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield _t(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Oe(this,void 0,void 0,function*(){try{const s=yield _t(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}download(e,n){return Oe(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Rl(this.fetch,`${this.url}/${s}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(we(o))return{data:null,error:o};throw o}})}info(e){return Oe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Rl(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:wc(r),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}exists(e){return Oe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield bb(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(we(r)&&r instanceof xc){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield $m(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}list(e,n,r){return Oe(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Sb),n),{prefix:e||""});return{data:yield _t(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}listV2(e,n){return Oe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield _t(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Eb="2.11.0",kb={"X-Client-Info":`storage-js/${Eb}`};var ar=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(d){try{u(r.next(d))}catch(h){l(h)}}function c(d){try{u(r.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(t,e||[])).next())})};class Cb{constructor(e,n={},r,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},kb),n),this.fetch=Bm(r)}listBuckets(){return ar(this,void 0,void 0,function*(){try{return{data:yield Rl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(we(e))return{data:null,error:e};throw e}})}getBucket(e){return ar(this,void 0,void 0,function*(){try{return{data:yield Rl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return ar(this,void 0,void 0,function*(){try{return{data:yield _t(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return ar(this,void 0,void 0,function*(){try{return{data:yield bc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ar(this,void 0,void 0,function*(){try{return{data:yield _t(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ar(this,void 0,void 0,function*(){try{return{data:yield $m(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}}class jb extends Cb{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new _b(this.url,this.headers,e,this.fetch)}}const Nb="2.56.0";let xs="";typeof Deno<"u"?xs="deno":typeof document<"u"?xs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xs="react-native":xs="node";const Ab={"X-Client-Info":`supabase-js-${xs}/${Nb}`},Tb={headers:Ab},Db={schema:"public"},Rb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ib={};var Ob=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(d){try{u(r.next(d))}catch(h){l(h)}}function c(d){try{u(r.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(t,e||[])).next())})};const Pb=t=>{let e;return t?e=t:typeof fetch>"u"?e=Em:e=fetch,(...n)=>e(...n)},Mb=()=>typeof Headers>"u"?km:Headers,Lb=(t,e,n)=>{const r=Pb(n),s=Mb();return(i,l)=>Ob(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:t;let u=new s(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},l),{headers:u}))})};var Bb=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(d){try{u(r.next(d))}catch(h){l(h)}}function c(d){try{u(r.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(t,e||[])).next())})};function $b(t){return t.endsWith("/")?t:t+"/"}function Fb(t,e){var n,r;const{db:s,auth:i,realtime:l,global:o}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),l),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Bb(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Fm="2.71.1",fr=30*1e3,Sc=3,ea=Sc*fr,Ub="http://localhost:9999",Hb="supabase.auth.token",zb={"X-Client-Info":`gotrue-js/${Fm}`},_c="X-Supabase-Api-Version",Um={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Vb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Wb=10*60*1e3;class Hu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class qb extends Hu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Gb(t){return q(t)&&t.name==="AuthApiError"}class Hm extends Hu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class jn extends Hu{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Xt extends jn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Qb(t){return q(t)&&t.name==="AuthSessionMissingError"}class Ri extends jn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ii extends jn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Oi extends jn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Yb(t){return q(t)&&t.name==="AuthImplicitGrantRedirectError"}class zh extends jn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ec extends jn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ta(t){return q(t)&&t.name==="AuthRetryableFetchError"}class Vh extends jn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class kc extends jn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Il="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wh=` 	
\r=`.split(""),Kb=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Wh.length;e+=1)t[Wh[e].charCodeAt(0)]=-2;for(let e=0;e<Il.length;e+=1)t[Il[e].charCodeAt(0)]=e;return t})();function qh(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Il[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Il[r]),e.queuedBits-=6}}function zm(t,e,n){const r=Kb[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Gh(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{Xb(l,r,n)};for(let l=0;l<t.length;l+=1)zm(t.charCodeAt(l),s,i);return e.join("")}function Zb(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Jb(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Zb(r,e)}}function Xb(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function eS(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)zm(t.charCodeAt(s),n,r);return new Uint8Array(e)}function tS(t){const e=[];return Jb(t,n=>e.push(n)),new Uint8Array(e)}function nS(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>qh(s,n,r)),qh(null,n,r),e.join("")}function rS(t){return Math.round(Date.now()/1e3)+t}function sS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const dt=()=>typeof window<"u"&&typeof document<"u",An={tested:!1,writable:!1},Vm=()=>{if(!dt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(An.tested)return An.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),An.tested=!0,An.writable=!0}catch{An.tested=!0,An.writable=!1}return An.writable};function iS(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Wm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>oi(async()=>{const{default:r}=await Promise.resolve().then(()=>ts);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},lS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",pr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Tn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Jt=async(t,e)=>{await t.removeItem(e)};class vo{constructor(){this.promise=new vo.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}vo.promiseConstructor=Promise;function na(t){const e=t.split(".");if(e.length!==3)throw new kc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Vb.test(e[r]))throw new kc("JWT not in base64url format");return{header:JSON.parse(Gh(e[0])),payload:JSON.parse(Gh(e[1])),signature:eS(e[2]),raw:{header:e[0],payload:e[1]}}}async function oS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function aS(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await t(i);if(!e(i,null,l)){r(l);return}}catch(l){if(!e(i,l)){s(l);return}}})()})}function cS(t){return("0"+t.toString(16)).substr(-2)}function uS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,cS).join("")}async function dS(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function hS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await dS(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function cr(t,e,n=!1){const r=uS();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await pr(t,`${e}-code-verifier`,s);const i=await hS(r);return[i,r===i?"plain":"s256"]}const fS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pS(t){const e=t.headers.get(_c);if(!e||!e.match(fS))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gS(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function mS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ur(t){if(!vS.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ra(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Qh(t){return JSON.parse(JSON.stringify(t))}var yS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const In=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xS=[502,503,504];async function Yh(t){var e;if(!lS(t))throw new Ec(In(t),0);if(xS.includes(t.status))throw new Ec(In(t),t.status);let n;try{n=await t.json()}catch(i){throw new Hm(In(i),i)}let r;const s=pS(t);if(s&&s.getTime()>=Um["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Vh(In(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Xt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Vh(In(n),t.status,n.weak_password.reasons);throw new qb(In(n),t.status||500,r)}const wS=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Q(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[_c]||(i[_c]=Um["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await bS(t,e,n+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function bS(t,e,n,r,s,i){const l=wS(e,r,s,i);let o;try{o=await t(n,Object.assign({},l))}catch(c){throw console.error(c),new Ec(In(c),0)}if(o.ok||await Yh(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(c){await Yh(c)}}function It(t){var e;let n=null;kS(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=rS(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Kh(t){const e=It(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function sn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function SS(t){return{data:t,error:null}}function _S(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,l=yS(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function ES(t){return t}function kS(t){return t.access_token&&t.refresh_token&&t.expires_in}const sa=["global","local","others"];var CS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class jS{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Wm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=sa[0]){if(sa.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sa.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:sn})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=CS(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:_S,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(q(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:sn})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ES});if(d.error)throw d.error;const h=await d.json(),f=(l=d.headers.get("x-total-count"))!==null&&l!==void 0?l:0,p=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(q(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ur(e);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:sn})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ur(e);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:sn})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){ur(e);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:sn})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ur(e.userId);try{const{data:n,error:r}=await Q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(q(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ur(e.userId),ur(e.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}}function Zh(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function NS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const dr={debug:!!(globalThis&&Vm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class qm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class AS extends qm{}async function TS(t,e,n){dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),dr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new AS(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(dr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}NS();const DS={url:Ub,storageKey:Hb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jh(t,e,n){return await n()}const hr={};class Js{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Js.nextInstanceID,Js.nextInstanceID+=1,this.instanceID>0&&dt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},DS),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new jS({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Wm(s.fetch),this.lock=s.lock||Jh,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:dt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=TS:this.lock=Jh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Vm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zh(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Zh(this.memoryStorage)),dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=hr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){hr[this.storageKey]=Object.assign(Object.assign({},hr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=hr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){hr[this.storageKey]=Object.assign(Object.assign({},hr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Fm}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=iS(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),dt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Yb(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return q(n)?{error:n}:{error:new Hm("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:It}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await cr(this.storage,this.storageKey)),i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},xform:It})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:It})}else throw new Ii("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:l,options:o}=e;n=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Kh})}else if("phone"in e){const{phone:i,password:l,options:o}=e;n=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Kh})}else throw new Ii("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ri}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,l,o,c,u,d,h,f,p;let y,x;if("message"in e)y=e.message,x=e.signature;else{const{chain:b,wallet:g,statement:m,options:v}=e;let w;if(dt())if(typeof g=="object")w=g;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))w=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const T=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const N=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),m?{statement:m}:null));let k;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")k=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)k=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)y=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),x=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${T.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const N=await w.signMessage(new TextEncoder().encode(y),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:b,error:g}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:nS(x)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:It});if(g)throw g;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ri}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:g})}catch(b){if(q(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const n=await Tn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:l}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:It});if(await Jt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ri}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:l}=e,o=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:It}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ri}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,l;try{if("email"in e){const{email:o,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await cr(this.storage,this.storageKey));const{error:h}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:c}=e,{data:u,error:d}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ii("You must provide either an email or phone number.")}catch(o){if(q(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:o}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:It});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await cr(this.storage,this.storageKey)),await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:SS})}catch(i){if(q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Xt;const{error:s}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:l}=await Q(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:l,error:o}=await Q(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new Ii("You must provide either an email or phone number and a type")}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Tn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ea:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await Tn(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=ra()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!l&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:sn}):await this._useSession(async n=>{var r,s,i;const{data:l,error:o}=n;if(o)throw o;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xt}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:sn})})}catch(n){if(q(n))return Qb(n)&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Xt;const l=s.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await cr(this.storage,this.storageKey));const{data:u,error:d}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:sn});if(d)throw d;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:l}=na(e.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(q(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:o}=n;if(o)throw o;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Xt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!dt())throw new Oi("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Oi(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new zh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Oi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new zh("No code detected.");const{data:m,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:u}=e;if(!i||!o||!l||!u)throw new Oi("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=fr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:x,error:b}=await this._getUser(i);if(b)throw b;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:l,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(q(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Tn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:o}=await this.admin.signOut(l,e);if(o&&!(Gb(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=sS(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await cr(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var l,o,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return dt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(q(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:l}=n;if(l)throw l;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await aS(async s=>(s>0&&await oS(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:It})),(s,i)=>{const l=200*Math.pow(2,s);return i&&ta(i)&&Date.now()+l-r<fr})}catch(r){if(this._debug(n,"error",r),q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),dt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Tn(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Tn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await pr(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:ra()}else if(s&&!s.user&&!s.user){const l=await Tn(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Jt(this.storage,this.storageKey+"-user"),await pr(this.storage,this.storageKey,s)):s.user=ra()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ea;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${ea}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),ta(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(s.access_token);!o&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Xt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new vo;const{data:i,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!i.session)throw new Xt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),q(i)){const l={session:null,error:i};return ta(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await pr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Qh(s);await pr(this.storage,this.storageKey,i)}else{const s=Qh(n);await pr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Jt(this.storage,this.storageKey),await Jt(this.storage,this.storageKey+"-code-verifier"),await Jt(this.storage,this.storageKey+"-user"),this.userStorage&&await Jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&dt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/fr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${fr}ms, refresh threshold is ${Sc} ticks`),s<=Sc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof qm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!dt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,l]=await cr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:l}=n;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:l,error:o}=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(n){if(q(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(q(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=na(s.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Wb>s)return r;const{data:i,error:l}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};r=p.session.access_token}const{header:s,payload:i,signature:l,raw:{header:o,payload:c}}=na(r);n!=null&&n.allowExpired||gS(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:l},error:null}}const d=mS(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,l,tS(`${o}.${c}`)))throw new kc("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}}Js.nextInstanceID=0;const RS=Js;class IS extends RS{constructor(e){super(e)}}var OS=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(d){try{u(r.next(d))}catch(h){l(h)}}function c(d){try{u(r.throw(d))}catch(h){l(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(t,e||[])).next())})};class PS{constructor(e,n,r){var s,i,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=$b(e),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Db,realtime:Ib,auth:Object.assign(Object.assign({},Rb),{storageKey:u}),global:Tb},h=Fb(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=Lb(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Zw(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new jb(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Aw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return OS(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:l,lock:o,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new IS({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:l,lock:o,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new pb(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const MS=(t,e,n)=>new PS(t,e,n);function LS(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}LS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const BS="https://libpiqpetkiojiqzzlpa.supabase.co",$S="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxpYnBpcXBldGtpb2ppcXp6bHBhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyMTkwMTMsImV4cCI6MjA3MTc5NTAxM30.7NCI5kRr0BHI-X1vW5Lb1YfOolVH0x-XvYVVjSCobhI",G=MS(BS,$S);class FS{async register(e){try{const{data:n}=await G.from("users").select("*").eq("email",e.email).single();if(n)throw new Error("User with this email already exists");if(e.role==="Owner"){const{data:i}=await G.from("users").select("*").eq("role","Owner").single();if(i)throw new Error("There can only be one shop owner. Please register as a Barber or Apprentice.")}const{data:r,error:s}=await G.from("users").insert([e]).select().single();if(s)throw s;return r}catch(n){throw console.error("Registration error:",n),n}}async login(e,n){try{const{data:r,error:s}=await G.from("users").select("*").eq("email",e).eq("password",n).single();if(s)throw s;return r}catch(r){return console.error("Login error:",r),null}}async addCustomer(e){try{const{data:n,error:r}=await G.from("customers").insert([e]).select().single();if(r)throw r;return n}catch(n){return console.error("Add customer error:",n),null}}async getCustomers(e){try{const{data:n,error:r}=await G.from("customers").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw r;return n||[]}catch(n){return console.error("Get customers error:",n),[]}}async updateCustomer(e,n){try{const{data:r,error:s}=await G.from("customers").update(n).eq("id",e).select().single();if(s)throw s;return r}catch(r){return console.error("Update customer error:",r),null}}async deleteCustomer(e){try{const{error:n}=await G.from("customers").delete().eq("id",e);if(n)throw n;return!0}catch(n){return console.error("Delete customer error:",n),!1}}async getCustomerBookings(e){try{const{data:n,error:r}=await G.from("bookings").select("*").eq("customer_id",e).order("date",{ascending:!1});if(r)throw r;return n||[]}catch(n){return console.error("Get customer bookings error:",n),[]}}async addBooking(e){var n,r;try{console.log("addBooking called with:",e);const s={...e,customer_id:e.customer_id||null};if(console.log("Processed booking data:",s),!s.user_id)throw new Error("user_id is required");if(!((n=s.customer_name)!=null&&n.trim()))throw new Error("customer_name is required");if(!((r=s.service)!=null&&r.trim()))throw new Error("service is required");if(!s.date)throw new Error("date is required");if(!s.time)throw new Error("time is required");const{data:i,error:l}=await G.from("bookings").insert([s]).select().single();if(console.log("Supabase insert result:",{data:i,error:l}),l)throw console.error("Supabase error details:",l),l;return console.log("Booking created successfully:",i),i}catch(s){throw console.error("Add booking error:",s),s}}async getBookings(e){try{const{data:n,error:r}=await G.from("bookings").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw r;return n||[]}catch(n){return console.error("Get bookings error:",n),[]}}async createBookingWithCustomer(e,n){try{let r=null;if(n.phone){const{data:i}=await G.from("customers").select("*").eq("user_id",e.user_id).eq("phone",n.phone).limit(1);i&&i.length>0&&(r=i[0])}return r||(r=await this.addCustomer({user_id:e.user_id,name:n.name,phone:n.phone||"",email:n.email||""})),{booking:await this.addBooking({...e,customer_id:(r==null?void 0:r.id)||null,customer_name:n.name}),customer:r}}catch(r){return console.error("Create booking with customer error:",r),{booking:null,customer:null}}}async getAllShopBookings(e){try{const r=(await this.getAllUsers()).map(l=>l.id),{data:s,error:i}=await G.from("bookings").select(`
          *,
          users:user_id (name, role)
        `).in("user_id",r).order("date",{ascending:!1}).order("time",{ascending:!1});if(i)throw i;return s||[]}catch(n){return console.error("Get all shop bookings error:",n),[]}}async updateBooking(e,n){try{const{data:r,error:s}=await G.from("bookings").update(n).eq("id",e).select().single();if(s)throw s;return r}catch(r){return console.error("Update booking error:",r),null}}async deleteBooking(e){try{const{error:n}=await G.from("bookings").delete().eq("id",e);if(n)throw n;return!0}catch(n){return console.error("Delete booking error:",n),!1}}async getTodayEarnings(e){try{const n=new Date().toISOString().split("T")[0],{data:r,error:s}=await G.from("bookings").select("price").eq("user_id",e).eq("status","completed").gte("date",n).lt("date",new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0]);if(s)throw s;const i=(r==null?void 0:r.reduce((o,c)=>o+c.price,0))||0,l=(r==null?void 0:r.length)||0;return{total:i,bookings:l}}catch(n){return console.error("Get today earnings error:",n),{total:0,bookings:0}}}async getWeekEarnings(e){try{const n=new Date(Date.now()-6048e5).toISOString().split("T")[0],{data:r,error:s}=await G.from("bookings").select("price").eq("user_id",e).eq("status","completed").gte("date",n);if(s)throw s;const i=(r==null?void 0:r.reduce((o,c)=>o+c.price,0))||0,l=(r==null?void 0:r.length)||0;return{total:i,bookings:l}}catch(n){return console.error("Get week earnings error:",n),{total:0,bookings:0}}}async getMonthEarnings(e){try{const n=new Date(Date.now()-2592e6).toISOString().split("T")[0],{data:r,error:s}=await G.from("bookings").select("price").eq("user_id",e).eq("status","completed").gte("date",n);if(s)throw s;const i=(r==null?void 0:r.reduce((o,c)=>o+c.price,0))||0,l=(r==null?void 0:r.length)||0;return{total:i,bookings:l}}catch(n){return console.error("Get month earnings error:",n),{total:0,bookings:0}}}async getRecentTransactions(e,n=10){try{const{data:r,error:s}=await G.from("bookings").select("*").eq("user_id",e).eq("status","completed").order("created_at",{ascending:!1}).limit(n);if(s)throw s;return r||[]}catch(r){return console.error("Get recent transactions error:",r),[]}}async getAllUsers(){try{const{data:e,error:n}=await G.from("users").select("*").order("created_at",{ascending:!1});if(n)throw n;return e||[]}catch(e){return console.error("Get all users error:",e),[]}}async getUserById(e){try{const{data:n,error:r}=await G.from("users").select("*").eq("id",e).single();if(r)throw r;return n}catch(n){return console.error("Get user by ID error:",n),null}}async updateUserRole(e,n){try{const{error:r}=await G.from("users").update({role:n}).eq("id",e);if(r)throw r}catch(r){throw console.error("Update user role error:",r),r}}async deleteUser(e){try{await G.from("bookings").delete().eq("user_id",e),await G.from("customers").delete().eq("user_id",e);const{error:n}=await G.from("users").delete().eq("id",e);if(n)throw n}catch(n){throw console.error("Delete user error:",n),n}}async updateShopSettings(e,n){try{const{error:r}=await G.from("users").update({shop_settings:JSON.stringify(n),updated_at:new Date().toISOString()}).eq("id",e);if(r)throw r}catch(r){throw console.error("Update shop settings error:",r),r}}async getDailySalesReport(){try{const{data:e,error:n}=await G.from("bookings").select("date, price").eq("status","completed").gte("date",new Date(Date.now()-2592e6).toISOString().split("T")[0]);if(n)throw n;const r={};return e==null||e.forEach(s=>{const i=s.date;r[i]||(r[i]={total:0,bookings:0}),r[i].total+=s.price,r[i].bookings+=1}),Object.entries(r).map(([s,i])=>({date:s,total:i.total,bookings:i.bookings}))}catch(e){return console.error("Get daily sales report error:",e),[]}}async generateXReport(){try{const e=new Date().toISOString().split("T")[0],{data:n,error:r}=await G.from("bookings").select("*, users(name)").eq("date",e).eq("status","completed");if(r)throw r;const s=(n==null?void 0:n.reduce((c,u)=>c+u.price,0))||0,i=(n==null?void 0:n.length)||0,l=i>0?s/i:0,o={};return n==null||n.forEach(c=>{var h;const u=c.user_id,d=((h=c.users)==null?void 0:h.name)||"Unknown";o[u]||(o[u]={name:d,sales:0,bookings:0}),o[u].sales+=c.price,o[u].bookings+=1}),{totalSales:s,totalBookings:i,averageValue:l,barberSales:Object.values(o)}}catch(e){throw console.error("Generate X report error:",e),e}}async generateZReport(){try{const e=new Date().toISOString().split("T")[0],{data:n,error:r}=await G.from("bookings").select("*").eq("date",e).eq("status","completed");if(r)throw r;const s=(n==null?void 0:n.reduce((c,u)=>c+u.price,0))||0,i=(n==null?void 0:n.length)||0;return{totalSales:s,totalBookings:i,cashSales:s,cardSales:0}}catch(e){throw console.error("Generate Z report error:",e),e}}async createBookingForBarber(e,n){try{const r={...e,user_id:n,status:"scheduled"},{data:s,error:i}=await G.from("bookings").insert([r]).select().single();if(i)throw i;return s}catch(r){throw console.error("Create booking for barber error:",r),r}}async getAllBarbers(){try{const{data:e,error:n}=await G.from("users").select("*").in("role",["Barber","Apprentice"]).order("name");if(n)throw n;return e||[]}catch(e){return console.error("Get all barbers error:",e),[]}}async getShopSettings(e){try{const{data:n,error:r}=await G.from("users").select("shop_settings").eq("id",e).eq("role","Owner").single();if(r)throw r;return n!=null&&n.shop_settings?JSON.parse(n.shop_settings):{dailyTarget:500,weeklyTarget:3e3,monthlyTarget:12e3,openTime:"09:00",closeTime:"18:00",appointmentDuration:30,walkInAllowed:!0,barberCommission:60,apprenticeCommission:40,ownerCommission:100}}catch(n){return console.error("Get shop settings error:",n),{dailyTarget:500,weeklyTarget:3e3,monthlyTarget:12e3,openTime:"09:00",closeTime:"18:00",appointmentDuration:30,walkInAllowed:!0,barberCommission:60,apprenticeCommission:40,ownerCommission:100}}}async getCommissionRate(e){try{const{data:n,error:r}=await G.from("users").select("role").eq("id",e).single();if(r)throw r;const{data:s,error:i}=await G.from("users").select("shop_settings").eq("role","Owner").single();if(i)switch(n.role){case"Owner":return 100;case"Barber":return 60;case"Apprentice":return 40;default:return 0}const l=s.shop_settings?JSON.parse(s.shop_settings):{};switch(n.role){case"Owner":return l.ownerCommission||100;case"Barber":return l.barberCommission||60;case"Apprentice":return l.apprenticeCommission||40;default:return 0}}catch(n){return console.error("Get commission rate error:",n),0}}async getBookingsByDateRange(e,n,r){try{const i=(await this.getAllUsers()).map(c=>c.id),{data:l,error:o}=await G.from("bookings").select("*").in("user_id",i).gte("date",n).lte("date",r).order("date",{ascending:!0});if(o)throw o;return l||[]}catch(s){return console.error("Error getting bookings by date range:",s),[]}}async getEarningsByDateRange(e,n,r){try{const{data:s,error:i}=await G.from("bookings").select("price").eq("user_id",e).eq("status","completed").gte("date",n).lte("date",r);if(i)throw i;const l=(s==null?void 0:s.reduce((c,u)=>c+u.price,0))||0,o=(s==null?void 0:s.length)||0;return{total:l,bookings:o}}catch(s){return console.error("Error getting earnings by date range:",s),{total:0,bookings:0}}}async getTransactionDetails(e,n,r){try{const i=(await this.getAllUsers()).map(c=>c.id),{data:l,error:o}=await G.from("bookings").select(`
          *,
          users:user_id (name, role)
        `).in("user_id",i).gte("date",n).lte("date",r).order("date",{ascending:!0});if(o)throw o;return l||[]}catch(s){return console.error("Error getting transaction details:",s),[]}}async calculateTaxObligations(e,n,r){try{const i=(await this.getBookingsByDateRange(e,n,r)).filter(p=>p.status==="completed"),l=i.reduce((p,y)=>p+y.price,0);let o=0;for(const p of i){const y=await this.getUserById(p.user_id);if(y&&y.role!=="Owner"){const x=y.role==="Barber"?60:40;o+=p.price*x/100}}const u=l*.18,d=o*.2,h=l-o,f=h>1e3?h*.15:0;return{totalRevenue:l,totalExpenses:o,vatCollected:u,socialInsurance:d,incomeTax:f}}catch(s){return console.error("Error calculating tax obligations:",s),{totalRevenue:0,totalExpenses:0,vatCollected:0,socialInsurance:0,incomeTax:0}}}generateReceiptNumber(e){const n="RCP",r=new Date,s=r.getFullYear().toString().slice(-2),i=(r.getMonth()+1).toString().padStart(2,"0"),l=e.slice(-6).toUpperCase();return`${n}-${s}${i}-${l}`}async addExpenseRecord(e,n){try{const{data:r,error:s}=await G.from("users").select("shop_settings").eq("id",e).eq("role","Owner").single();if(s)throw s;const i=r!=null&&r.shop_settings?JSON.parse(r.shop_settings):{},l=i.expenses||[],o={...n,id:`exp_${Date.now()}`,created_at:new Date().toISOString()},c={...i,expenses:[...l,o]},{error:u}=await G.from("users").update({shop_settings:JSON.stringify(c)}).eq("id",e).eq("role","Owner");if(u)throw u}catch(r){throw console.error("Error adding expense record:",r),r}}async getExpenseRecords(e,n,r){try{const{data:s,error:i}=await G.from("users").select("shop_settings").eq("id",e).eq("role","Owner").single();if(i)throw i;let o=(s!=null&&s.shop_settings?JSON.parse(s.shop_settings):{}).expenses||[];return n&&r&&(o=o.filter(c=>c.date>=n&&c.date<=r)),o}catch(s){return console.error("Error getting expense records:",s),[]}}}const W=new FS;var yo,U,Gm,Qm,Qr,Ln,Xh,Ym,Km,Ol={},Zm=[],US=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function an(t,e){for(var n in e)t[n]=e[n];return t}function Jm(t){var e=t.parentNode;e&&e.removeChild(t)}function S(t,e,n){var r,s,i,l={};for(i in e)i=="key"?r=e[i]:i=="ref"?s=e[i]:l[i]=e[i];if(arguments.length>2&&(l.children=arguments.length>3?yo.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)l[i]===void 0&&(l[i]=t.defaultProps[i]);return el(t,l,r,s,null)}function el(t,e,n,r,s){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++Gm};return s==null&&U.vnode!=null&&U.vnode(i),i}function Le(){return{current:null}}function ie(t){return t.children}function HS(t,e,n,r,s){var i;for(i in n)i==="children"||i==="key"||i in e||Pl(t,i,null,n[i],r);for(i in e)s&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||n[i]===e[i]||Pl(t,i,e[i],n[i],r)}function ef(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||US.test(e)?n:n+"px"}function Pl(t,e,n,r,s){var i;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||ef(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||ef(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r||t.addEventListener(e,i?nf:tf,i):t.removeEventListener(e,i?nf:tf,i);else if(e!=="dangerouslySetInnerHTML"){if(s)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function tf(t){Qr=!0;try{return this.l[t.type+!1](U.event?U.event(t):t)}finally{Qr=!1}}function nf(t){Qr=!0;try{return this.l[t.type+!0](U.event?U.event(t):t)}finally{Qr=!1}}function Ke(t,e){this.props=t,this.context=e}function Xs(t,e){if(e==null)return t.__?Xs(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Xs(t):null}function Xm(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Xm(t)}}function zS(t){Qr?setTimeout(t):Ym(t)}function Cc(t){(!t.__d&&(t.__d=!0)&&Ln.push(t)&&!Ml.__r++||Xh!==U.debounceRendering)&&((Xh=U.debounceRendering)||zS)(Ml)}function Ml(){var t,e,n,r,s,i,l,o;for(Ln.sort(function(c,u){return c.__v.__b-u.__v.__b});t=Ln.shift();)t.__d&&(e=Ln.length,r=void 0,s=void 0,l=(i=(n=t).__v).__e,(o=n.__P)&&(r=[],(s=an({},i)).__v=i.__v+1,zu(o,i,s,n.__n,o.ownerSVGElement!==void 0,i.__h!=null?[l]:null,r,l??Xs(i),i.__h),sv(r,i),i.__e!=l&&Xm(i)),Ln.length>e&&Ln.sort(function(c,u){return c.__v.__b-u.__v.__b}));Ml.__r=0}function ev(t,e,n,r,s,i,l,o,c,u){var d,h,f,p,y,x,b,g=r&&r.__k||Zm,m=g.length;for(n.__k=[],d=0;d<e.length;d++)if((p=n.__k[d]=(p=e[d])==null||typeof p=="boolean"?null:typeof p=="string"||typeof p=="number"||typeof p=="bigint"?el(null,p,null,null,p):Array.isArray(p)?el(ie,{children:p},null,null,null):p.__b>0?el(p.type,p.props,p.key,p.ref?p.ref:null,p.__v):p)!=null){if(p.__=n,p.__b=n.__b+1,(f=g[d])===null||f&&p.key==f.key&&p.type===f.type)g[d]=void 0;else for(h=0;h<m;h++){if((f=g[h])&&p.key==f.key&&p.type===f.type){g[h]=void 0;break}f=null}zu(t,p,f=f||Ol,s,i,l,o,c,u),y=p.__e,(h=p.ref)&&f.ref!=h&&(b||(b=[]),f.ref&&b.push(f.ref,null,p),b.push(h,p.__c||y,p)),y!=null?(x==null&&(x=y),typeof p.type=="function"&&p.__k===f.__k?p.__d=c=tv(p,c,t):c=nv(t,p,f,g,y,c),typeof n.type=="function"&&(n.__d=c)):c&&f.__e==c&&c.parentNode!=t&&(c=Xs(f))}for(n.__e=x,d=m;d--;)g[d]!=null&&(typeof n.type=="function"&&g[d].__e!=null&&g[d].__e==n.__d&&(n.__d=rv(r).nextSibling),lv(g[d],g[d]));if(b)for(d=0;d<b.length;d++)iv(b[d],b[++d],b[++d])}function tv(t,e,n){for(var r,s=t.__k,i=0;s&&i<s.length;i++)(r=s[i])&&(r.__=t,e=typeof r.type=="function"?tv(r,e,n):nv(n,r,r,s,r.__e,e));return e}function Ll(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){Ll(n,e)}):e.push(t)),e}function nv(t,e,n,r,s,i){var l,o,c;if(e.__d!==void 0)l=e.__d,e.__d=void 0;else if(n==null||s!=i||s.parentNode==null)e:if(i==null||i.parentNode!==t)t.appendChild(s),l=null;else{for(o=i,c=0;(o=o.nextSibling)&&c<r.length;c+=1)if(o==s)break e;t.insertBefore(s,i),l=i}return l!==void 0?l:s.nextSibling}function rv(t){var e,n,r;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(r=rv(n)))return r}return null}function zu(t,e,n,r,s,i,l,o,c){var u,d,h,f,p,y,x,b,g,m,v,w,T,N,k,D=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(c=n.__h,o=e.__e=n.__e,e.__h=null,i=[o]),(u=U.__b)&&u(e);try{e:if(typeof D=="function"){if(b=e.props,g=(u=D.contextType)&&r[u.__c],m=u?g?g.props.value:u.__:r,n.__c?x=(d=e.__c=n.__c).__=d.__E:("prototype"in D&&D.prototype.render?e.__c=d=new D(b,m):(e.__c=d=new Ke(b,m),d.constructor=D,d.render=WS),g&&g.sub(d),d.props=b,d.state||(d.state={}),d.context=m,d.__n=r,h=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),D.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=an({},d.__s)),an(d.__s,D.getDerivedStateFromProps(b,d.__s))),f=d.props,p=d.state,d.__v=e,h)D.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(D.getDerivedStateFromProps==null&&b!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(b,m),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(b,d.__s,m)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(d.props=b,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(H){H&&(H.__=e)}),v=0;v<d._sb.length;v++)d.__h.push(d._sb[v]);d._sb=[],d.__h.length&&l.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(b,d.__s,m),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,p,y)})}if(d.context=m,d.props=b,d.__P=t,w=U.__r,T=0,"prototype"in D&&D.prototype.render){for(d.state=d.__s,d.__d=!1,w&&w(e),u=d.render(d.props,d.state,d.context),N=0;N<d._sb.length;N++)d.__h.push(d._sb[N]);d._sb=[]}else do d.__d=!1,w&&w(e),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++T<25);d.state=d.__s,d.getChildContext!=null&&(r=an(an({},r),d.getChildContext())),h||d.getSnapshotBeforeUpdate==null||(y=d.getSnapshotBeforeUpdate(f,p)),k=u!=null&&u.type===ie&&u.key==null?u.props.children:u,ev(t,Array.isArray(k)?k:[k],e,n,r,s,i,l,o,c),d.base=e.__e,e.__h=null,d.__h.length&&l.push(d),x&&(d.__E=d.__=null),d.__e=!1}else i==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=VS(n.__e,e,n,r,s,i,l,c);(u=U.diffed)&&u(e)}catch(H){e.__v=null,(c||i!=null)&&(e.__e=o,e.__h=!!c,i[i.indexOf(o)]=null),U.__e(H,e,n)}}function sv(t,e){U.__c&&U.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(r){r.call(n)})}catch(r){U.__e(r,n.__v)}})}function VS(t,e,n,r,s,i,l,o){var c,u,d,h=n.props,f=e.props,p=e.type,y=0;if(p==="svg"&&(s=!0),i!=null){for(;y<i.length;y++)if((c=i[y])&&"setAttribute"in c==!!p&&(p?c.localName===p:c.nodeType===3)){t=c,i[y]=null;break}}if(t==null){if(p===null)return document.createTextNode(f);t=s?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,f.is&&f),i=null,o=!1}if(p===null)h===f||o&&t.data===f||(t.data=f);else{if(i=i&&yo.call(t.childNodes),u=(h=n.props||Ol).dangerouslySetInnerHTML,d=f.dangerouslySetInnerHTML,!o){if(i!=null)for(h={},y=0;y<t.attributes.length;y++)h[t.attributes[y].name]=t.attributes[y].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===t.innerHTML)||(t.innerHTML=d&&d.__html||""))}if(HS(t,f,h,s,o),d)e.__k=[];else if(y=e.props.children,ev(t,Array.isArray(y)?y:[y],e,n,r,s&&p!=="foreignObject",i,l,i?i[0]:n.__k&&Xs(n,0),o),i!=null)for(y=i.length;y--;)i[y]!=null&&Jm(i[y]);o||("value"in f&&(y=f.value)!==void 0&&(y!==t.value||p==="progress"&&!y||p==="option"&&y!==h.value)&&Pl(t,"value",y,h.value,!1),"checked"in f&&(y=f.checked)!==void 0&&y!==t.checked&&Pl(t,"checked",y,h.checked,!1))}return t}function iv(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){U.__e(r,n)}}function lv(t,e,n){var r,s;if(U.unmount&&U.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||iv(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){U.__e(i,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&lv(r[s],e,n||typeof t.type!="function");n||t.__e==null||Jm(t.__e),t.__=t.__e=t.__d=void 0}function WS(t,e,n){return this.constructor(t,n)}function ei(t,e,n){var r,s,i;U.__&&U.__(t,e),s=(r=!1)?null:e.__k,i=[],zu(e,t=e.__k=S(ie,null,[t]),s||Ol,Ol,e.ownerSVGElement!==void 0,s?null:e.firstChild?yo.call(e.childNodes):null,i,s?s.__e:e.firstChild,r),sv(i,t)}function qS(t,e){var n={__c:e="__cC"+Km++,__:t,Consumer:function(r,s){return r.children(s)},Provider:function(r){var s,i;return this.getChildContext||(s=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&s.some(function(o){o.__e=!0,Cc(o)})},this.sub=function(l){s.push(l);var o=l.componentWillUnmount;l.componentWillUnmount=function(){s.splice(s.indexOf(l),1),o&&o.call(l)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}yo=Zm.slice,U={__e:function(t,e,n,r){for(var s,i,l;e=e.__;)if((s=e.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(t)),l=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),l=s.__d),l)return s.__E=s}catch(o){t=o}throw t}},Gm=0,Qm=function(t){return t!=null&&t.constructor===void 0},Qr=!1,Ke.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=an({},this.state),typeof t=="function"&&(t=t(an({},n),this.props)),t&&an(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Cc(this))},Ke.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Cc(this))},Ke.prototype.render=ie,Ln=[],Ym=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ml.__r=0,Km=0;var kt,ia,rf,ov=[],la=[],sf=U.__b,lf=U.__r,of=U.diffed,af=U.__c,cf=U.unmount;function GS(){for(var t;t=ov.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(tl),t.__H.__h.forEach(jc),t.__H.__h=[]}catch(e){t.__H.__h=[],U.__e(e,t.__v)}}U.__b=function(t){kt=null,sf&&sf(t)},U.__r=function(t){lf&&lf(t);var e=(kt=t.__c).__H;e&&(ia===kt?(e.__h=[],kt.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=la,n.__N=n.i=void 0})):(e.__h.forEach(tl),e.__h.forEach(jc),e.__h=[])),ia=kt},U.diffed=function(t){of&&of(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(ov.push(e)!==1&&rf===U.requestAnimationFrame||((rf=U.requestAnimationFrame)||QS)(GS)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==la&&(n.__=n.__V),n.i=void 0,n.__V=la})),ia=kt=null},U.__c=function(t,e){e.some(function(n){try{n.__h.forEach(tl),n.__h=n.__h.filter(function(r){return!r.__||jc(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],U.__e(r,n.__v)}}),af&&af(t,e)},U.unmount=function(t){cf&&cf(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{tl(r)}catch(s){e=s}}),n.__H=void 0,e&&U.__e(e,n.__v))};var uf=typeof requestAnimationFrame=="function";function QS(t){var e,n=function(){clearTimeout(r),uf&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);uf&&(e=requestAnimationFrame(n))}function tl(t){var e=kt,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),kt=e}function jc(t){var e=kt;t.__c=t.__(),kt=e}function YS(t,e){for(var n in e)t[n]=e[n];return t}function df(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function hf(t){this.props=t}(hf.prototype=new Ke).isPureReactComponent=!0,hf.prototype.shouldComponentUpdate=function(t,e){return df(this.props,t)||df(this.state,e)};var ff=U.__b;U.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),ff&&ff(t)};var KS=U.__e;U.__e=function(t,e,n,r){if(t.then){for(var s,i=e;i=i.__;)if((s=i.__c)&&s.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),s.__c(t,e)}KS(t,e,n,r)};var pf=U.unmount;function av(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=YS({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return av(r,e,n)})),t}function cv(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return cv(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function oa(){this.__u=0,this.t=null,this.__b=null}function uv(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Pi(){this.u=null,this.o=null}U.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),pf&&pf(t)},(oa.prototype=new Ke).__c=function(t,e){var n=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var s=uv(r.__v),i=!1,l=function(){i||(i=!0,n.__R=null,s?s(o):o())};n.__R=l;var o=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=cv(u,u.__c.__P,u.__c.__O)}var d;for(r.setState({__a:r.__b=null});d=r.t.pop();)d.forceUpdate()}},c=e.__h===!0;r.__u++||c||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(l,l)},oa.prototype.componentWillUnmount=function(){this.t=[]},oa.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=av(this.__b,n,r.__O=r.__P)}this.__b=null}var s=e.__a&&S(ie,null,t.fallback);return s&&(s.__h=null),[S(ie,null,e.__a?null:t.children),s]};var gf=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function ZS(t){return this.getChildContext=function(){return t.context},t.children}function JS(t){var e=this,n=t.i;e.componentWillUnmount=function(){ei(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,s){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),ei(S(ZS,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function XS(t,e){var n=S(JS,{__v:t,i:e});return n.containerInfo=e,n}(Pi.prototype=new Ke).__a=function(t){var e=this,n=uv(e.__v),r=e.o.get(t);return r[0]++,function(s){var i=function(){e.props.revealOrder?(r.push(s),gf(e,t,r)):s()};n?n(i):i()}},Pi.prototype.render=function(t){this.u=null,this.o=new Map;var e=Ll(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},Pi.prototype.componentDidUpdate=Pi.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){gf(t,n,e)})};var e_=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,t_=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,n_=typeof document<"u",r_=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};Ke.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Ke.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var mf=U.event;function s_(){}function i_(){return this.cancelBubble}function l_(){return this.defaultPrevented}U.event=function(t){return mf&&(t=mf(t)),t.persist=s_,t.isPropagationStopped=i_,t.isDefaultPrevented=l_,t.nativeEvent=t};var vf={configurable:!0,get:function(){return this.class}},yf=U.vnode;U.vnode=function(t){var e=t.type,n=t.props,r=n;if(typeof e=="string"){var s=e.indexOf("-")===-1;for(var i in r={},n){var l=n[i];n_&&i==="children"&&e==="noscript"||i==="value"&&"defaultValue"in n&&l==null||(i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&l===!0?l="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!r_(n.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():s&&t_.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():l===null&&(l=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),r[i]&&(i="oninputCapture")),r[i]=l)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=Ll(n.children).forEach(function(o){o.props.selected=r.value.indexOf(o.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=Ll(n.children).forEach(function(o){o.props.selected=r.multiple?r.defaultValue.indexOf(o.props.value)!=-1:r.defaultValue==o.props.value})),t.props=r,n.class!=n.className&&(vf.enumerable="className"in n,n.className!=null&&(r.class=n.className),Object.defineProperty(r,"className",vf))}t.$$typeof=e_,yf&&yf(t)};var xf=U.__r;U.__r=function(t){xf&&xf(t),t.__c};const dv=[],Nc=new Map;function Vu(t){dv.push(t),Nc.forEach(e=>{fv(e,t)})}function o_(t){t.isConnected&&t.getRootNode&&hv(t.getRootNode())}function hv(t){let e=Nc.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=c_();n&&(e.nonce=n);const r=t===document?document.head:t,s=t===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(e,s)}Nc.set(t,e),a_(e)}}function a_(t){for(const e of dv)fv(t,e)}function fv(t,e){const{sheet:n}=t,r=n.cssRules.length;e.split("}").forEach((s,i)=>{s=s.trim(),s&&n.insertRule(s+"}",r+i)})}let aa;function c_(){return aa===void 0&&(aa=u_()),aa}function u_(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&hv(document);var d_=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';Vu(d_);class Wu{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:r}=this;e in r&&(n?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function qu(t){t.parentNode&&t.parentNode.removeChild(t)}function Re(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(h_(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function h_(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function f_(t,e){let n=t instanceof HTMLElement?[t]:t,r=[];for(let s=0;s<n.length;s+=1){let i=n[s].querySelectorAll(e);for(let l=0;l<i.length;l+=1)r.push(i[l])}return r}const p_=/(top|left|right|bottom|width|height)$/i;function Rs(t,e){for(let n in e)pv(t,n,e[n])}function pv(t,e,n){n==null?t.style[e]="":typeof n=="number"&&p_.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function gv(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let wf=0;function xo(){return wf+=1,"fc-dom-"+wf}function wo(t){t.preventDefault()}function g_(t,e){return n=>{let r=Re(n.target,t);r&&e.call(r,n,r)}}function mv(t,e,n,r){let s=g_(n,r);return t.addEventListener(e,s),()=>{t.removeEventListener(e,s)}}function m_(t,e,n,r){let s;return mv(t,"mouseover",e,(i,l)=>{if(l!==s){s=l,n(i,l);let o=c=>{s=null,r(c,l),l.removeEventListener("mouseleave",o)};l.addEventListener("mouseleave",o)}})}const bf=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function v_(t,e){let n=r=>{e(r),bf.forEach(s=>{t.removeEventListener(s,n)})};bf.forEach(r=>{t.addEventListener(r,n)})}function vv(t){return Object.assign({onClick:t},yv(t))}function yv(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let Sf=0;function sr(){return Sf+=1,String(Sf)}function Gu(){document.body.classList.add("fc-not-allowed")}function Qu(){document.body.classList.remove("fc-not-allowed")}function y_(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",wo)}function x_(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",wo)}function w_(t){t.addEventListener("contextmenu",wo)}function b_(t){t.removeEventListener("contextmenu",wo)}function S_(t){let e=[],n=[],r,s;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),r=0;r<n.length;r+=1)s=n[r],typeof s=="string"?e.push(s.charAt(0)==="-"?{field:s.substring(1),order:-1}:{field:s,order:1}):typeof s=="function"&&e.push({func:s});return e}function __(t,e,n){let r,s;for(r=0;r<n.length;r+=1)if(s=E_(t,e,n[r]),s)return s;return 0}function E_(t,e,n){return n.func?n.func(t,e):k_(t[n.field],e[n.field])*(n.order||1)}function k_(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function Mr(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function Is(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((r,s,i)=>r.replace("$"+i,s||""),t):n}function C_(t,e){return t-e}function nl(t){return t%1===0}function j_(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const _f=["years","months","days","milliseconds"],N_=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function K(t,e){return typeof t=="string"?A_(t):typeof t=="object"&&t?Ef(t):typeof t=="number"?Ef({[e||"milliseconds"]:t}):null}function A_(t){let e=N_.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function Ef(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function T_(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function Ac(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function D_(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function R_(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function I_(t){return Lr(t)/365}function O_(t){return Lr(t)/30}function Lr(t){return mt(t)/864e5}function mt(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function Yu(t,e){let n=null;for(let r=0;r<_f.length;r+=1){let s=_f[r];if(e[s]){let i=t[s]/e[s];if(!nl(i)||n!==null&&n!==i)return null;n=i}else if(t[s])return null}return n}function Tc(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function Sn(t,e,n){if(t===e)return!0;let r=t.length,s;if(r!==e.length)return!1;for(s=0;s<r;s+=1)if(!(n?n(t[s],e[s]):t[s]===e[s]))return!1;return!0}const P_=["sun","mon","tue","wed","thu","fri","sat"];function kf(t,e){let n=cn(t);return n[2]+=e*7,ze(n)}function ke(t,e){let n=cn(t);return n[2]+=e,ze(n)}function _n(t,e){let n=cn(t);return n[6]+=e,ze(n)}function M_(t,e){return ir(t,e)/7}function ir(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function L_(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function B_(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function $_(t,e){return(e.valueOf()-t.valueOf())/1e3}function F_(t,e){let n=le(t),r=le(e);return{years:0,months:0,days:Math.round(ir(n,r)),milliseconds:e.valueOf()-r.valueOf()-(t.valueOf()-n.valueOf())}}function U_(t,e){let n=Bl(t,e);return n!==null&&n%7===0?n/7:null}function Bl(t,e){return un(t)===un(e)?Math.round(ir(t,e)):null}function le(t){return ze([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function H_(t){return ze([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function z_(t){return ze([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function V_(t){return ze([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function W_(t,e,n){let r=t.getUTCFullYear(),s=ca(t,r,e,n);if(s<1)return ca(t,r-1,e,n);let i=ca(t,r+1,e,n);return i>=1?Math.min(s,i):s}function ca(t,e,n,r){let s=ze([e,0,1+q_(e,n,r)]),i=le(t),l=Math.round(ir(s,i));return Math.floor(l/7)+1}function q_(t,e,n){let r=7+e-n;return-((7+ze([t,0,r]).getUTCDay()-e)%7)+r-1}function Cf(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function jf(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function cn(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function ze(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function xv(t){return!isNaN(t.valueOf())}function un(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function wv(t,e,n=!1){let r=t.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(e==null?r=r.replace("Z",""):e!==0&&(r=r.replace("Z",Zu(e,!0)))),r}function Ku(t){return t.toISOString().replace(/T.*$/,"")}function G_(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function Q_(t){return Mr(t.getUTCHours(),2)+":"+Mr(t.getUTCMinutes(),2)+":"+Mr(t.getUTCSeconds(),2)}function Zu(t,e=!1){let n=t<0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=Math.round(r%60);return e?`${n+Mr(s,2)}:${Mr(i,2)}`:`GMT${n}${s}${i?`:${Mr(i,2)}`:""}`}function z(t,e,n){let r,s;return function(...i){if(!r)s=t.apply(this,i);else if(!Sn(r,i)){let l=t.apply(this,i);(!e||!e(l,s))&&(s=l)}return r=i,s}}function rl(t,e,n){let r,s;return i=>(r?wt(r,i)||(s=t.call(this,i)):s=t.call(this,i),r=i,s)}const ua={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},$l={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Mi=/\s*([ap])\.?m\.?/i,Y_=/,/g,K_=/\s+/g,Z_=/\u200e/g,J_=/UTC|GMT/;class X_{constructor(e){let n={},r={},s=9;for(let i in e)i in ua?(r[i]=e[i],ua[i]<9&&(s=Math.min(ua[i],s))):(n[i]=e[i],i in $l&&(s=Math.min($l[i],s)));this.standardDateProps=n,this.extendedSettings=r,this.smallestUnitNum=s,this.buildFormattingFunc=z(Nf)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,r,s){let{standardDateProps:i,extendedSettings:l}=this,o=iE(e.marker,n.marker,r.calendarSystem);if(!o)return this.format(e,r);let c=o;c>1&&(i.year==="numeric"||i.year==="2-digit")&&(i.month==="numeric"||i.month==="2-digit")&&(i.day==="numeric"||i.day==="2-digit")&&(c=1);let u=this.format(e,r),d=this.format(n,r);if(u===d)return u;let h=lE(i,c),f=Nf(h,l,r),p=f(e),y=f(n),x=oE(u,p,d,y),b=l.separator||s||r.defaultSeparator||"";return x?x.before+p+b+y+x.after:u+b+d}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function Nf(t,e,n){let r=Object.keys(t).length;return r===1&&t.timeZoneName==="short"?s=>Zu(s.timeZoneOffset):r===0&&e.week?s=>sE(n.computeWeekNumber(s.marker),n.weekText,n.weekTextLong,n.locale,e.week):eE(t,e,n)}function eE(t,e,n){t=Object.assign({},t),e=Object.assign({},e),tE(t,e),t.timeZone="UTC";let r=new Intl.DateTimeFormat(n.locale.codes,t),s;if(e.omitZeroMinute){let i=Object.assign({},t);delete i.minute,s=new Intl.DateTimeFormat(n.locale.codes,i)}return i=>{let{marker:l}=i,o;s&&!l.getUTCMinutes()?o=s:o=r;let c=o.format(l);return nE(c,i,t,e,n)}}function tE(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function nE(t,e,n,r,s){return t=t.replace(Z_,""),n.timeZoneName==="short"&&(t=rE(t,s.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":Zu(e.timeZoneOffset))),r.omitCommas&&(t=t.replace(Y_,"").trim()),r.omitZeroMinute&&(t=t.replace(":00","")),r.meridiem===!1?t=t.replace(Mi,"").trim():r.meridiem==="narrow"?t=t.replace(Mi,(i,l)=>l.toLocaleLowerCase()):r.meridiem==="short"?t=t.replace(Mi,(i,l)=>`${l.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(t=t.replace(Mi,i=>i.toLocaleLowerCase())),t=t.replace(K_," "),t=t.trim(),t}function rE(t,e){let n=!1;return t=t.replace(J_,()=>(n=!0,e)),n||(t+=` ${e}`),t}function sE(t,e,n,r,s){let i=[];return s==="long"?i.push(n):(s==="short"||s==="narrow")&&i.push(e),(s==="long"||s==="short")&&i.push(" "),i.push(r.simpleNumberFormat.format(t)),r.options.direction==="rtl"&&i.reverse(),i.join("")}function iE(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:un(t)!==un(e)?1:0}function lE(t,e){let n={};for(let r in t)(!(r in $l)||$l[r]<=e)&&(n[r]=t[r]);return n}function oE(t,e,n,r){let s=0;for(;s<t.length;){let i=t.indexOf(e,s);if(i===-1)break;let l=t.substr(0,i);s=i+e.length;let o=t.substr(s),c=0;for(;c<n.length;){let u=n.indexOf(r,c);if(u===-1)break;let d=n.substr(0,u);c=u+r.length;let h=n.substr(c);if(l===d&&o===h)return{before:l,after:o}}}return null}function Af(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function Fl(t,e,n,r){let s=Af(t,n.calendarSystem),i=e?Af(e,n.calendarSystem):null;return{date:s,start:s,end:i,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}class aE{constructor(e){this.cmdStr=e}format(e,n,r){return n.cmdFormatter(this.cmdStr,Fl(e,null,n,r))}formatRange(e,n,r,s){return r.cmdFormatter(this.cmdStr,Fl(e,n,r,s))}}class cE{constructor(e){this.func=e}format(e,n,r){return this.func(Fl(e,null,n,r))}formatRange(e,n,r,s){return this.func(Fl(e,n,r,s))}}function fe(t){return typeof t=="object"&&t?new X_(t):typeof t=="string"?new aE(t):typeof t=="function"?new cE(t):null}const Tf={navLinkDayClick:A,navLinkWeekClick:A,duration:K,bootstrapFontAwesome:A,buttonIcons:A,customButtons:A,defaultAllDayEventDuration:K,defaultTimedEventDuration:K,nextDayThreshold:K,scrollTime:K,scrollTimeReset:Boolean,slotMinTime:K,slotMaxTime:K,dayPopoverFormat:fe,slotDuration:K,snapDuration:K,headerToolbar:A,footerToolbar:A,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:fe,dayHeaderClassNames:A,dayHeaderContent:A,dayHeaderDidMount:A,dayHeaderWillUnmount:A,dayCellClassNames:A,dayCellContent:A,dayCellDidMount:A,dayCellWillUnmount:A,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:A,weekNumbers:Boolean,weekNumberClassNames:A,weekNumberContent:A,weekNumberDidMount:A,weekNumberWillUnmount:A,editable:Boolean,viewClassNames:A,viewDidMount:A,viewWillUnmount:A,nowIndicator:Boolean,nowIndicatorSnap:A,nowIndicatorClassNames:A,nowIndicatorContent:A,nowIndicatorDidMount:A,nowIndicatorWillUnmount:A,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:A,locale:A,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:A,eventOrder:S_,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:A,contentHeight:A,direction:String,weekNumberFormat:fe,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:A,initialDate:A,now:A,eventDataTransform:A,stickyHeaderDates:A,stickyFooterScrollbar:A,viewHeight:A,defaultAllDay:Boolean,eventSourceFailure:A,eventSourceSuccess:A,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:A,eventConstraint:A,eventAllow:A,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:A,eventContent:A,eventDidMount:A,eventWillUnmount:A,selectConstraint:A,selectOverlap:A,selectAllow:A,droppable:Boolean,unselectCancel:String,slotLabelFormat:A,slotLaneClassNames:A,slotLaneContent:A,slotLaneDidMount:A,slotLaneWillUnmount:A,slotLabelClassNames:A,slotLabelContent:A,slotLabelDidMount:A,slotLabelWillUnmount:A,dayMaxEvents:A,dayMaxEventRows:A,dayMinWidth:Number,slotLabelInterval:K,allDayText:String,allDayClassNames:A,allDayContent:A,allDayDidMount:A,allDayWillUnmount:A,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:fe,rerenderDelay:Number,moreLinkText:A,moreLinkHint:A,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:A,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:K,hiddenDays:A,fixedWeekCount:Boolean,validRange:A,visibleRange:A,titleFormat:A,eventInteractive:Boolean,noEventsText:String,viewHint:A,navLinkHint:A,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:A,moreLinkClassNames:A,moreLinkContent:A,moreLinkDidMount:A,moreLinkWillUnmount:A,monthStartFormat:fe,handleCustomRendering:A,customRenderingMetaMap:A,customRenderingReplaces:Boolean},Os={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},Df={datesSet:A,eventsSet:A,eventAdd:A,eventChange:A,eventRemove:A,windowResize:A,eventClick:A,eventMouseEnter:A,eventMouseLeave:A,select:A,unselect:A,loading:A,_unmount:A,_beforeprint:A,_afterprint:A,_noEventDrop:A,_noEventResize:A,_resize:A,_scrollRequest:A},Rf={buttonText:A,buttonHints:A,views:A,plugins:A,initialEvents:A,events:A,eventSources:A},On={headerToolbar:Pn,footerToolbar:Pn,buttonText:Pn,buttonHints:Pn,buttonIcons:Pn,dateIncrement:Pn,plugins:Li,events:Li,eventSources:Li,resources:Li};function Pn(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?wt(t,e):t===e}function Li(t,e){return Array.isArray(t)&&Array.isArray(e)?Sn(t,e):t===e}const uE={type:String,component:A,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:A,usesMinMaxTime:Boolean,classNames:A,content:A,didMount:A,willUnmount:A};function da(t){return Xu(t,On)}function Ju(t,e){let n={},r={};for(let s in e)s in t&&(n[s]=e[s](t[s]));for(let s in t)s in e||(r[s]=t[s]);return{refined:n,extra:r}}function A(t){return t}const{hasOwnProperty:Ul}=Object.prototype;function Xu(t,e){let n={};if(e){for(let r in e)if(e[r]===Pn){let s=[];for(let i=t.length-1;i>=0;i-=1){let l=t[i][r];if(typeof l=="object"&&l)s.unshift(l);else if(l!==void 0){n[r]=l;break}}s.length&&(n[r]=Xu(s))}}for(let r=t.length-1;r>=0;r-=1){let s=t[r];for(let i in s)i in n||(n[i]=s[i])}return n}function Jn(t,e){let n={};for(let r in t)e(t[r],r)&&(n[r]=t[r]);return n}function qt(t,e){let n={};for(let r in t)n[r]=e(t[r],r);return n}function bv(t){let e={};for(let n of t)e[n]=!0;return e}function ed(t){let e=[];for(let n in t)e.push(t[n]);return e}function wt(t,e){if(t===e)return!0;for(let n in t)if(Ul.call(t,n)&&!(n in e))return!1;for(let n in e)if(Ul.call(e,n)&&t[n]!==e[n])return!1;return!0}const dE=/^on[A-Z]/;function hE(t,e){const n=fE(t,e);for(let r of n)if(!dE.test(r))return!1;return!0}function fE(t,e){let n=[];for(let r in t)Ul.call(t,r)&&(r in e||n.push(r));for(let r in e)Ul.call(e,r)&&t[r]!==e[r]&&n.push(r);return n}function ha(t,e,n={}){if(t===e)return!0;for(let r in e)if(!(r in t&&pE(t[r],e[r],n[r])))return!1;for(let r in t)if(!(r in e))return!1;return!0}function pE(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function gE(t,e=0,n,r=1){let s=[];n==null&&(n=Object.keys(t).length);for(let i=e;i<n;i+=r){let l=t[i];l!==void 0&&s.push(l)}return s}let Sv={};function mE(t,e){Sv[t]=e}function vE(t){return new Sv[t]}class yE{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return ze(e)}markerToArray(e){return cn(e)}}mE("gregory",yE);const xE=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function wE(t){let e=xE.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(xv(n)){let r=null;return e[13]&&(r=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}class bE{constructor(e){let n=this.timeZone=e.timeZone,r=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=vE(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):ze(Cf(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=ze(e)),n===null||!xv(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=wE(e);if(n===null)return null;let{marker:r}=n,s=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-n.timeZoneOffset*60*1e3):s=n.timeZoneOffset),{marker:r,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:s}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n.years,r[1]+=n.months,r[2]+=n.days,r[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]-=n.years,r[1]-=n.months,r[2]-=n.days,r[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n,this.calendarSystem.arrayToMarker(r)}addMonths(e,n){let r=this.calendarSystem.markerToArray(e);return r[1]+=n,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,n){let{calendarSystem:r}=this;return un(e)===un(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)&&r.getMarkerMonth(e)===r.getMarkerMonth(n)?r.getMarkerYear(n)-r.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:r}=this;return un(e)===un(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)?r.getMarkerMonth(n)-r.getMarkerMonth(e)+(r.getMarkerYear(n)-r.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let r=this.diffWholeYears(e,n);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(e,n),r!==null?{unit:"month",value:r}:(r=U_(e,n),r!==null?{unit:"week",value:r}:(r=Bl(e,n),r!==null?{unit:"day",value:r}:(r=L_(e,n),nl(r)?{unit:"hour",value:r}:(r=B_(e,n),nl(r)?{unit:"minute",value:r}:(r=$_(e,n),nl(r)?{unit:"second",value:r}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,r){let s;return r.years&&(s=this.diffWholeYears(e,n),s!==null)?s/I_(r):r.months&&(s=this.diffWholeMonths(e,n),s!==null)?s/O_(r):r.days&&(s=Bl(e,n),s!==null)?s/Lr(r):(n.valueOf()-e.valueOf())/mt(r)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?le(e):n==="hour"?H_(e):n==="minute"?z_(e):n==="second"?V_(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):W_(e,this.weekDow,this.weekDoy)}format(e,n,r={}){return n.format({marker:e,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,r,s={}){return s.isEndExclusive&&(n=_n(n,-1)),r.formatRange({marker:e,timeZoneOffset:s.forcedStartTzo!=null?s.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:s.forcedEndTzo!=null?s.forcedEndTzo:this.offsetForMarker(n)},this,s.defaultSeparator)}formatIso(e,n={}){let r=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?r=n.forcedTzo:r=this.offsetForMarker(e)),wv(e,r,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?ze(Cf(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):ze(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-jf(cn(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(cn(e)):null}toDate(e,n){return this.timeZone==="local"?jf(cn(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(cn(e))*1e3*60):new Date(e.valueOf()-(n||0))}}class ui{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,r;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(r in e)n[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let r;return n&&this.rtlIconClasses?r=this.rtlIconClasses[e]||this.iconClasses[e]:r=this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}}ui.prototype.classes={};ui.prototype.iconClasses={};ui.prototype.baseIconClass="";ui.prototype.iconOverridePrefix="";function Hl(t){t();let e=U.debounceRendering,n=[];function r(s){n.push(s)}for(U.debounceRendering=r,ei(S(SE,{}),document.createElement("div"));n.length;)n.shift()();U.debounceRendering=e}class SE extends Ke{render(){return S("div",{})}componentDidMount(){this.setState({})}}function _v(t){let e=qS(t),n=e.Provider;return e.Provider=function(){let r=!this.getChildContext,s=n.apply(this,arguments);if(r){let i=[];this.shouldComponentUpdate=l=>{this.props.value!==l.value&&i.forEach(o=>{o.context=l.value,o.forceUpdate()})},this.sub=l=>{i.push(l);let o=l.componentWillUnmount;l.componentWillUnmount=()=>{i.splice(i.indexOf(l),1),o&&o.call(l)}}}return s},e}class _E{constructor(e,n,r,s){this.execFunc=e,this.emitter=n,this.scrollTime=r,this.scrollTimeReset=s,this.handleScrollRequest=i=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},i),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Qt=_v({});function EE(t,e,n,r,s,i,l,o,c,u,d,h,f,p){return{dateEnv:s,nowManager:i,options:n,pluginHooks:o,emitter:d,dispatch:c,getCurrentData:u,calendarApi:h,viewSpec:t,viewApi:e,dateProfileGenerator:r,theme:l,isRtl:n.direction==="rtl",addResizeHandler(y){d.on("_resize",y)},removeResizeHandler(y){d.off("_resize",y)},createScrollResponder(y){return new _E(y,d,K(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:f,unregisterInteractiveComponent:p}}class lr extends Ke{shouldComponentUpdate(e,n){return!ha(this.props,e,this.propEquality)||!ha(this.state,n,this.stateEquality)}safeSetState(e){ha(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}lr.addPropsEquality=kE;lr.addStateEquality=CE;lr.contextType=Qt;lr.prototype.propEquality={};lr.prototype.stateEquality={};class ee extends lr{}ee.contextType=Qt;function kE(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function CE(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function At(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class td extends ee{constructor(){super(...arguments),this.id=sr(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:r}=this.props;(!n.customRenderingReplaces||!Dc(r,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&At(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:r}=n,{customGenerator:s,defaultGenerator:i,renderProps:l}=e,o=Ev(e,[],this.handleEl);let c=!1,u,d=[],h;if(s!=null){const f=typeof s=="function"?s(l,S):s;if(f===!0)c=!0;else{const p=f&&typeof f=="object";p&&"html"in f?o.dangerouslySetInnerHTML={__html:f.html}:p&&"domNodes"in f?d=Array.prototype.slice.call(f.domNodes):(p?Qm(f):typeof f!="function")?u=f:h=f}}else c=!Dc(e.generatorName,r);return c&&i&&(u=i(l)),this.queuedDomNodes=d,this.currentGeneratorMeta=h,S(e.elTag,o,u)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:r,context:s}=this,{handleCustomRendering:i,customRenderingMetaMap:l}=s.options;if(i){const o=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:l==null?void 0:l[r.generatorName];o&&i(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:o},r),{elClasses:(r.elClasses||[]).filter(jE)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,r=this.base;if(!Sn(e,n)){n.forEach(qu);for(let s of e)r.appendChild(s);this.currentDomNodes=e}}}td.addPropsEquality({elClasses:Sn,elStyle:wt,elAttrs:hE,renderProps:wt});function Dc(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function Ev(t,e,n){const r=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(r.className=(t.elClasses||[]).concat(e||[]).concat(r.className||[]).filter(Boolean).join(" ")),t.elStyle&&(r.style=t.elStyle),r}function jE(t){return!!t}const kv=_v(0);class tt extends Ke{constructor(){super(...arguments),this.InnerContent=NE.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(At(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=AE(e.classNameGenerator,e.renderProps);if(e.children){const r=Ev(e,n,this.handleEl),s=e.children(this.InnerContent,e.renderProps,r);return e.elTag?S(e.elTag,r,s):s}else return S(td,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}tt.contextType=kv;function NE(t,e){const n=t.props;return S(td,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function AE(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class zl extends ee{render(){let{props:e,context:n}=this,{options:r}=n,s={view:n.viewApi};return S(tt,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...Cv(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:s,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount},()=>e.children)}}function Cv(t){return[`fc-${t.type}-view`,"fc-view"]}function TE(t,e){let n=null,r=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(r=e.createMarker(t.end)),!n&&!r||n&&r&&r<n?null:{start:n,end:r}}function If(t,e){let n=[],{start:r}=e,s,i;for(t.sort(DE),s=0;s<t.length;s+=1)i=t[s],i.start>r&&n.push({start:r,end:i.start}),i.end>r&&(r=i.end);return r<e.end&&n.push({start:r,end:e.end}),n}function DE(t,e){return t.start.valueOf()-e.start.valueOf()}function Xn(t,e){let{start:n,end:r}=t,s=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(r===null?r=e.end:r=new Date(Math.min(r.valueOf(),e.end.valueOf()))),(n===null||r===null||n<r)&&(s={start:n,end:r}),s}function RE(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function nd(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function bo(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function Ut(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function IE(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function jv(t){let e=Math.floor(ir(t.start,t.end))||1,n=le(t.start),r=ke(n,e);return{start:n,end:r}}function Nv(t,e=K(0)){let n=null,r=null;if(t.end){r=le(t.end);let s=t.end.valueOf()-r.valueOf();s&&s>=mt(e)&&(r=ke(r,1))}return t.start&&(n=le(t.start),r&&r<=n&&(r=ke(n,1))),{start:n,end:r}}function Nr(t,e,n,r){return r==="year"?K(n.diffWholeYears(t,e),"year"):r==="month"?K(n.diffWholeMonths(t,e),"month"):F_(t,e)}class Av{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,n,r){let{dateEnv:s}=this.props,i=s.subtract(s.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(i,-1,r)}buildNext(e,n,r){let{dateEnv:s}=this.props,i=s.add(s.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(i,1,r)}build(e,n,r=!0){let{props:s}=this,i,l,o,c,u,d;return i=this.buildValidRange(),i=this.trimHiddenDays(i),r&&(e=IE(e,i)),l=this.buildCurrentRangeInfo(e,n),o=/^(year|month|week|day)$/.test(l.unit),c=this.buildRenderRange(this.trimHiddenDays(l.range),l.unit,o),c=this.trimHiddenDays(c),u=c,s.showNonCurrentDates||(u=Xn(u,l.range)),u=this.adjustActiveRange(u),u=Xn(u,i),d=nd(l.range,i),Ut(c,e)||(e=c.start),{currentDate:e,validRange:i,currentRange:l.range,currentRangeUnit:l.unit,isRangeAllDay:o,activeRange:u,renderRange:c,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,isValid:d,dateIncrement:this.buildDateIncrement(l.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:r}=this,s=null,i=null,l=null,o;return r.duration?(s=r.duration,i=r.durationUnit,l=this.buildRangeFromDuration(e,n,s,i)):(o=this.props.dayCount)?(i="day",l=this.buildRangeFromDayCount(e,n,o)):(l=this.buildCustomVisibleRange(e))?i=r.dateEnv.greatestWholeUnit(l.start,l.end).unit:(s=this.getFallbackDuration(),i=Tc(s).unit,l=this.buildRangeFromDuration(e,n,s,i)),{duration:s,unit:i,range:l}}getFallbackDuration(){return K({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:r,slotMinTime:s,slotMaxTime:i}=this.props,{start:l,end:o}=e;return r&&(Lr(s)<0&&(l=le(l),l=n.add(l,s)),Lr(i)>1&&(o=le(o),o=ke(o,-1),o=n.add(o,i))),{start:l,end:o}}buildRangeFromDuration(e,n,r,s){let{dateEnv:i,dateAlignment:l}=this.props,o,c,u;if(!l){let{dateIncrement:h}=this.props;h&&mt(h)<mt(r)?l=Tc(h).unit:l=s}Lr(r)<=1&&this.isHiddenDay(o)&&(o=this.skipHiddenDays(o,n),o=le(o));function d(){o=i.startOf(e,l),c=i.add(o,r),u={start:o,end:c}}return d(),this.trimHiddenDays(u)||(e=this.skipHiddenDays(e,n),d()),u}buildRangeFromDayCount(e,n,r){let{dateEnv:s,dateAlignment:i}=this.props,l=0,o=e,c;i&&(o=s.startOf(o,i)),o=le(o),o=this.skipHiddenDays(o,n),c=o;do c=ke(c,1),this.isHiddenDay(c)||(l+=1);while(l<r);return{start:o,end:c}}buildCustomVisibleRange(e){let{props:n}=this,r=n.visibleRangeInput,s=typeof r=="function"?r.call(n.calendarApi,n.dateEnv.toDate(e)):r,i=this.refineRange(s);return i&&(i.start==null||i.end==null)?null:i}buildRenderRange(e,n,r){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,r;return n||((r=this.props.dateAlignment)?K(1,r):e||K({days:1}))}refineRange(e){if(e){let n=TE(e,this.props.dateEnv);return n&&(n=Nv(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],r=0,s;for(this.props.weekends===!1&&e.push(0,6),s=0;s<7;s+=1)(n[s]=e.indexOf(s)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:r}=e;return n&&(n=this.skipHiddenDays(n)),r&&(r=this.skipHiddenDays(r,-1,!0)),n==null||r==null||n<r?{start:n,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?n:0)+7)%7];)e=ke(e,n);return e}}function rd(t,e,n,r){return{instanceId:sr(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:r??null}}function OE(t,e,n,r){for(let s=0;s<r.length;s+=1){let i=r[s].parse(t,n);if(i){let{allDay:l}=t;return l==null&&(l=e,l==null&&(l=i.allDayGuess,l==null&&(l=!1))),{allDay:l,duration:i.duration,typeData:i.typeData,typeId:s}}}return null}function er(t,e,n){let{dateEnv:r,pluginHooks:s,options:i}=n,{defs:l,instances:o}=t;o=Jn(o,c=>!l[c.defId].recurringDef);for(let c in l){let u=l[c];if(u.recurringDef){let{duration:d}=u.recurringDef;d||(d=u.allDay?i.defaultAllDayEventDuration:i.defaultTimedEventDuration);let h=PE(u,d,e,r,s.recurringTypes);for(let f of h){let p=rd(c,{start:f,end:r.add(f,d)});o[p.instanceId]=p}}}return{defs:l,instances:o}}function PE(t,e,n,r,s){let l=s[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:r.subtract(n.start,e),end:n.end},r);return t.allDay&&(l=l.map(le)),l}const sl={id:String,groupId:String,title:String,url:String,interactive:Boolean},Tv={start:A,end:A,date:A,allDay:Boolean},ME=Object.assign(Object.assign(Object.assign({},sl),Tv),{extendedProps:A});function Dv(t,e,n,r,s=sd(n),i,l){let{refined:o,extra:c}=Rv(t,n,s),u=BE(e,n),d=OE(o,u,n.dateEnv,n.pluginHooks.recurringTypes);if(d){let f=Rc(o,c,e?e.sourceId:"",d.allDay,!!d.duration,n,i);return f.recurringDef={typeId:d.typeId,typeData:d.typeData,duration:d.duration},{def:f,instance:null}}let h=LE(o,u,n,r);if(h){let f=Rc(o,c,e?e.sourceId:"",h.allDay,h.hasEnd,n,i),p=rd(f.defId,h.range,h.forcedStartTzo,h.forcedEndTzo);return l&&f.publicId&&l[f.publicId]&&(p.instanceId=l[f.publicId]),{def:f,instance:p}}return null}function Rv(t,e,n=sd(e)){return Ju(t,n)}function sd(t){return Object.assign(Object.assign(Object.assign({},Vl),ME),t.pluginHooks.eventRefiners)}function Rc(t,e,n,r,s,i,l){let o={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(l&&t.id?l[t.id]:"")||sr(),sourceId:n,allDay:r,hasEnd:s,interactive:t.interactive,ui:Wl(t,i),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let c of i.pluginHooks.eventDefMemberAdders)Object.assign(o,c(t));return Object.freeze(o.ui.classNames),Object.freeze(o.extendedProps),o}function LE(t,e,n,r){let{allDay:s}=t,i,l=null,o=!1,c,u=null,d=t.start!=null?t.start:t.date;if(i=n.dateEnv.createMarkerMeta(d),i)l=i.marker;else if(!r)return null;return t.end!=null&&(c=n.dateEnv.createMarkerMeta(t.end)),s==null&&(e!=null?s=e:s=(!i||i.isTimeUnspecified)&&(!c||c.isTimeUnspecified)),s&&l&&(l=le(l)),c&&(u=c.marker,s&&(u=le(u)),l&&u<=l&&(u=null)),u?o=!0:r||(o=n.options.forceEventDuration||!1,u=n.dateEnv.add(l,s?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:s,hasEnd:o,range:{start:l,end:u},forcedStartTzo:i?i.forcedTzo:null,forcedEndTzo:c?c.forcedTzo:null}}function BE(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function ti(t,e,n,r,s,i){let l=Ze(),o=sd(n);for(let c of t){let u=Dv(c,e,n,r,o,s,i);u&&Ic(u,l)}return l}function Ic(t,e=Ze()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function id(t,e){let n=t.instances[e];if(n){let r=t.defs[n.defId],s=So(t,i=>$E(r,i));return s.defs[r.defId]=r,s.instances[n.instanceId]=n,s}return Ze()}function $E(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function Ze(){return{defs:{},instances:{}}}function ld(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function So(t,e){let n=Jn(t.defs,e),r=Jn(t.instances,s=>n[s.defId]);return{defs:n,instances:r}}function FE(t,e){let{defs:n,instances:r}=t,s={},i={};for(let l in n)e.defs[l]||(s[l]=n[l]);for(let l in r)!e.instances[l]&&s[r[l].defId]&&(i[l]=r[l]);return{defs:s,instances:i}}function UE(t,e){return Array.isArray(t)?ti(t,null,e,!0):typeof t=="object"&&t?ti([t],null,e,!0):t!=null?String(t):null}function Of(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const Vl={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:A,overlap:A,allow:A,className:Of,classNames:Of,color:String,backgroundColor:String,borderColor:String,textColor:String},HE={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Wl(t,e){let n=UE(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function Iv(t){return t.reduce(zE,HE)}function zE(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const VE={id:String,defaultAllDay:Boolean,url:String,format:String,events:A,eventDataTransform:A,success:A,failure:A};function Ov(t,e,n=Pv(e)){let r;if(typeof t=="string"?r={url:t}:typeof t=="function"||Array.isArray(t)?r={events:t}:typeof t=="object"&&t&&(r=t),r){let{refined:s,extra:i}=Ju(r,n),l=WE(s,e);if(l)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:s.defaultAllDay,eventDataTransform:s.eventDataTransform,success:s.success,failure:s.failure,publicId:s.id||"",sourceId:sr(),sourceDefId:l.sourceDefId,meta:l.meta,ui:Wl(s,e),extendedProps:i}}return null}function Pv(t){return Object.assign(Object.assign(Object.assign({},Vl),VE),t.pluginHooks.eventSourceRefiners)}function WE(t,e){let n=e.pluginHooks.eventSourceDefs;for(let r=n.length-1;r>=0;r-=1){let i=n[r].parseMeta(t);if(i)return{sourceDefId:r,meta:i}}return null}function qE(t,e,n,r,s){switch(e.type){case"RECEIVE_EVENTS":return GE(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,s);case"RESET_RAW_EVENTS":return QE(t,n[e.sourceId],e.rawEvents,r.activeRange,s);case"ADD_EVENTS":return YE(t,e.eventStore,r?r.activeRange:null,s);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return ld(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?er(t,r.activeRange,s):t;case"REMOVE_EVENTS":return FE(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return Lv(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return So(t,i=>!i.sourceId);case"REMOVE_ALL_EVENTS":return Ze();default:return t}}function GE(t,e,n,r,s,i){if(e&&n===e.latestFetchId){let l=ti(Mv(s,e,i),e,i);return r&&(l=er(l,r,i)),ld(Lv(t,e.sourceId),l)}return t}function QE(t,e,n,r,s){const{defIdMap:i,instanceIdMap:l}=ZE(t);let o=ti(Mv(n,e,s),e,s,!1,i,l);return er(o,r,s)}function Mv(t,e,n){let r=n.options.eventDataTransform,s=e?e.eventDataTransform:null;return s&&(t=Pf(t,s)),r&&(t=Pf(t,r)),t}function Pf(t,e){let n;if(!e)n=t;else{n=[];for(let r of t){let s=e(r);s?n.push(s):s==null&&n.push(r)}}return n}function YE(t,e,n,r){return n&&(e=er(e,n,r)),ld(t,e)}function Mf(t,e,n){let{defs:r}=t,s=qt(t.instances,i=>r[i.defId].allDay?i:Object.assign(Object.assign({},i),{range:{start:n.createMarker(e.toDate(i.range.start,i.forcedStartTzo)),end:n.createMarker(e.toDate(i.range.end,i.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:i.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:i.forcedEndTzo}));return{defs:r,instances:s}}function Lv(t,e){return So(t,n=>n.sourceId!==e)}function KE(t,e){return{defs:t.defs,instances:Jn(t.instances,n=>!e[n.instanceId])}}function ZE(t){const{defs:e,instances:n}=t,r={},s={};for(let i in e){const l=e[i],{publicId:o}=l;o&&(r[o]=i)}for(let i in n){const l=n[i],o=e[l.defId],{publicId:c}=o;c&&(s[c]=i)}return{defIdMap:r,instanceIdMap:s}}class _o{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){JE(this.handlers,e,n)}off(e,n){XE(this.handlers,e,n)}trigger(e,...n){let r=this.handlers[e]||[],s=this.options&&this.options[e],i=[].concat(s||[],r);for(let l of i)l.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function JE(t,e,n){(t[e]||(t[e]=[])).push(n)}function XE(t,e,n){n?t[e]&&(t[e]=t[e].filter(r=>r!==n)):delete t[e]}const ek={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function tk(t,e){return ti(nk(t),null,e)}function nk(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},ek),n)),e}function Bv(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},od(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function rk(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function od(t,e){let n={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(n,r(t,e));return Object.assign(n,vk(t,e.dateEnv)),n}function Lf(t,e,n){let{dateEnv:r,options:s}=n,i=e;return t?(i=le(i),i=r.add(i,s.defaultAllDayEventDuration)):i=r.add(i,s.defaultTimedEventDuration),i}function ad(t,e,n,r){let s=ql(t.defs,e),i=Ze();for(let l in t.defs){let o=t.defs[l];i.defs[l]=sk(o,s[l],n,r)}for(let l in t.instances){let o=t.instances[l],c=i.defs[o.defId];i.instances[l]=ik(o,c,s[o.defId],n,r)}return i}function sk(t,e,n,r){let s=n.standardProps||{};s.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(s.hasEnd=!0);let i=Object.assign(Object.assign(Object.assign({},t),s),{ui:Object.assign(Object.assign({},t.ui),s.ui)});n.extendedProps&&(i.extendedProps=Object.assign(Object.assign({},i.extendedProps),n.extendedProps));for(let l of r.pluginHooks.eventDefMutationAppliers)l(i,n,r);return!i.hasEnd&&r.options.forceEventDuration&&(i.hasEnd=!0),i}function ik(t,e,n,r,s){let{dateEnv:i}=s,l=r.standardProps&&r.standardProps.allDay===!0,o=r.standardProps&&r.standardProps.hasEnd===!1,c=Object.assign({},t);return l&&(c.range=jv(c.range)),r.datesDelta&&n.startEditable&&(c.range={start:i.add(c.range.start,r.datesDelta),end:i.add(c.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(c.range={start:i.add(c.range.start,r.startDelta),end:c.range.end}),r.endDelta&&n.durationEditable&&(c.range={start:c.range.start,end:i.add(c.range.end,r.endDelta)}),o&&(c.range={start:c.range.start,end:Lf(e.allDay,c.range.start,s)}),e.allDay&&(c.range={start:le(c.range.start),end:le(c.range.end)}),c.range.end<c.range.start&&(c.range.end=Lf(e.allDay,c.range.start,s)),c}class gr{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class ue{constructor(e,n,r){this._context=e,this._def=n,this._instance=r||null}setProp(e,n){if(e in Tv)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=sl[e](n),this.mutate({standardProps:{publicId:n}});else if(e in sl)n=sl[e](n),this.mutate({standardProps:{[e]:n}});else if(e in Vl){let r=Vl[e](n);e==="color"?r={backgroundColor:n,borderColor:n}:e==="editable"?r={startEditable:n,durationEditable:n}:r={[e]:n},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:r}=this._context,s=r.createMarker(e);if(s&&this._instance){let i=this._instance.range,l=Nr(i.start,s,r,n.granularity);n.maintainDuration?this.mutate({datesDelta:l}):this.mutate({startDelta:l})}}setEnd(e,n={}){let{dateEnv:r}=this._context,s;if(!(e!=null&&(s=r.createMarker(e),!s))&&this._instance)if(s){let i=Nr(this._instance.range.end,s,r,n.granularity);this.mutate({endDelta:i})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,r={}){let{dateEnv:s}=this._context,i={allDay:r.allDay},l=s.createMarker(e),o;if(l&&!(n!=null&&(o=s.createMarker(n),!o))&&this._instance){let c=this._instance.range;r.allDay===!0&&(c=jv(c));let u=Nr(c.start,l,s,r.granularity);if(o){let d=Nr(c.end,o,s,r.granularity);T_(u,d)?this.mutate({datesDelta:u,standardProps:i}):this.mutate({startDelta:u,endDelta:d,standardProps:i})}else i.hasEnd=!1,this.mutate({datesDelta:u,standardProps:i})}}moveStart(e){let n=K(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=K(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=K(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let r={allDay:e},{maintainDuration:s}=n;s==null&&(s=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=s),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:n}=this._context,r=this._instance,s=fe(e);return this._def.hasEnd?n.formatRange(r.range.start,r.range.end,s,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):n.format(r.range.start,s,{forcedTzo:r.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let r=this._def,s=this._context,{eventStore:i}=s.getCurrentData(),l=id(i,n.instanceId);l=ad(l,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,s);let c=new ue(s,r,n);this._def=l.defs[r.defId],this._instance=l.instances[n.instanceId],s.dispatch({type:"MERGE_EVENTS",eventStore:l}),s.emitter.trigger("eventChange",{oldEvent:c,event:this,relatedEvents:Vn(l,s,n),revert(){s.dispatch({type:"RESET_EVENTS",eventStore:i})}})}}remove(){let e=this._context,n=$v(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new gr(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:r}=n,{startStr:s,endStr:i}=this,l={allDay:n.allDay};return n.title&&(l.title=n.title),s&&(l.start=s),i&&(l.end=i),n.publicId&&(l.id=n.publicId),n.groupId&&(l.groupId=n.groupId),n.url&&(l.url=n.url),r.display&&r.display!=="auto"&&(l.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?l.color=r.backgroundColor:(r.backgroundColor&&(l.backgroundColor=r.backgroundColor),r.borderColor&&(l.borderColor=r.borderColor)),r.textColor&&(l.textColor=r.textColor),r.classNames.length&&(l.classNames=r.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(l,n.extendedProps):l.extendedProps=n.extendedProps),l}toJSON(){return this.toPlainObject()}}function $v(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function Vn(t,e,n){let{defs:r,instances:s}=t,i=[],l=n?n.instanceId:"";for(let o in s){let c=s[o],u=r[c.defId];c.instanceId!==l&&i.push(new ue(e,u,c))}return i}function Bf(t,e,n,r){let s={},i={},l={},o=[],c=[],u=ql(t.defs,e);for(let d in t.defs){let h=t.defs[d];u[h.defId].display==="inverse-background"&&(h.groupId?(s[h.groupId]=[],l[h.groupId]||(l[h.groupId]=h)):i[d]=[])}for(let d in t.instances){let h=t.instances[d],f=t.defs[h.defId],p=u[f.defId],y=h.range,x=!f.allDay&&r?Nv(y,r):y,b=Xn(x,n);b&&(p.display==="inverse-background"?f.groupId?s[f.groupId].push(b):i[h.defId].push(b):p.display!=="none"&&(p.display==="background"?o:c).push({def:f,ui:p,instance:h,range:b,isStart:x.start&&x.start.valueOf()===b.start.valueOf(),isEnd:x.end&&x.end.valueOf()===b.end.valueOf()}))}for(let d in s){let h=s[d],f=If(h,n);for(let p of f){let y=l[d],x=u[y.defId];o.push({def:y,ui:x,instance:null,range:p,isStart:!1,isEnd:!1})}}for(let d in i){let h=i[d],f=If(h,n);for(let p of f)o.push({def:t.defs[d],ui:u[d],instance:null,range:p,isStart:!1,isEnd:!1})}return{bg:o,fg:c}}function lk(t){return t.ui.display==="background"||t.ui.display==="inverse-background"}function $f(t,e){t.fcSeg=e}function Yr(t){return t.fcSeg||t.parentNode.fcSeg||null}function ql(t,e){return qt(t,n=>Fv(n,e))}function Fv(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),Iv(n)}function Uv(t,e){let n=t.map(ok);return n.sort((r,s)=>__(r,s,e)),n.map(r=>r._seg)}function ok(t){let{eventRange:e}=t,n=e.def,r=e.instance?e.instance.range:e.range,s=r.start?r.start.valueOf():0,i=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:s,end:i,duration:i-s,allDay:Number(n.allDay),_seg:t})}function ak(t,e){let{pluginHooks:n}=e,r=n.isDraggableTransformers,{def:s,ui:i}=t.eventRange,l=i.startEditable;for(let o of r)l=o(l,s,i,e);return l}function ck(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function uk(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function Hv(t,e,n,r,s,i,l){let{dateEnv:o,options:c}=n,{displayEventTime:u,displayEventEnd:d}=c,h=t.eventRange.def,f=t.eventRange.instance;u==null&&(u=r!==!1),d==null&&(d=s!==!1);let p=f.range.start,y=f.range.end,x=t.start||t.eventRange.range.start,b=t.end||t.eventRange.range.end,g=le(p).valueOf()===le(x).valueOf(),m=le(_n(y,-1)).valueOf()===le(_n(b,-1)).valueOf();return u&&!h.allDay&&(g||m)?(x=g?p:x,b=m?y:b,d&&h.hasEnd?o.formatRange(x,b,e,{forcedStartTzo:f.forcedStartTzo,forcedEndTzo:f.forcedEndTzo}):o.format(x,e,{forcedTzo:f.forcedStartTzo})):""}function xn(t,e,n){let r=t.eventRange.range;return{isPast:r.end<=(n||e.start),isFuture:r.start>=(n||e.end),isToday:e&&Ut(e,r.start)}}function dk(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function zv(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function Vv(t,e){let{def:n,instance:r}=t.eventRange,{url:s}=n;if(s)return{href:s};let{emitter:i,options:l}=e,{eventInteractive:o}=l;return o==null&&(o=n.interactive,o==null&&(o=!!i.hasHandlers("eventClick"))),o?yv(c=>{i.trigger("eventClick",{el:c.target,event:new ue(e,n,r),jsEvent:c,view:e.viewApi})}):{}}const hk={start:A,end:A,allDay:Boolean};function fk(t,e,n){let r=pk(t,e),{range:s}=r;if(!s.start)return null;if(!s.end){if(n==null)return null;s.end=e.add(s.start,n)}return r}function pk(t,e){let{refined:n,extra:r}=Ju(t,hk),s=n.start?e.createMarkerMeta(n.start):null,i=n.end?e.createMarkerMeta(n.end):null,{allDay:l}=n;return l==null&&(l=s&&s.isTimeUnspecified&&(!i||i.isTimeUnspecified)),Object.assign({range:{start:s?s.marker:null,end:i?i.marker:null},allDay:l},r)}function gk(t,e){return RE(t.range,e.range)&&t.allDay===e.allDay&&mk(t,e)}function mk(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function vk(t,e){return Object.assign(Object.assign({},qv(t.range,e,t.allDay)),{allDay:t.allDay})}function Wv(t,e,n){return Object.assign(Object.assign({},qv(t,e,n)),{timeZone:e.timeZone})}function qv(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function yk(t,e,n){let r=Rv({editable:!1},n),s=Rc(r.refined,r.extra,"",t.allDay,!0,n);return{def:s,ui:Fv(s,e),instance:rd(s.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function xk(t,e,n){let r=!1,s=function(o){r||(r=!0,e(o))},i=function(o){r||(r=!0,n(o))},l=t(s,i);l&&typeof l.then=="function"&&l.then(s,i)}class Ff extends Error{constructor(e,n){super(e),this.response=n}}function wk(t,e,n){t=t.toUpperCase();const r={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(r.body=new URLSearchParams(n),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(s=>{if(s.ok)return s.json().then(i=>[i,s],()=>{throw new Ff("Failure parsing JSON",s)});throw new Ff("Request failed",s)})}let fa;function Gv(){return fa==null&&(fa=bk()),fa}function bk(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class Sk extends ee{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Hl(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Hl(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:r}=this.state,s=r||n.height==="auto"||n.contentHeight==="auto",i=!s&&n.height!=null?n.height:"",l=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return Gv()||l.push("fc-liquid-hack"),e.children(l,i,s,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class rs{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function _k(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function cd(t){return{[t.component.uid]:t}}const Oc={};class ss extends Ke{constructor(e,n){super(e,n),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:n}=this,r=n.nowManager.getDateMarker(),{nowIndicatorSnap:s}=n.options;s==="auto"&&(s=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let i,l;return s?(i=n.dateEnv.startOf(r,e.unit),l=n.dateEnv.add(i,K(1,e.unit)).valueOf()-r.valueOf()):(i=r,l=1e3*60),l=Math.min(1e3*60*60*24,l),{state:{nowDate:i,todayRange:Ek(i)},waitMs:l}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}ss.contextType=Qt;function Ek(t){let e=le(t),n=ke(e,1);return{start:e,end:n}}class kk{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let r=this.getCurrentData(),s;n=n||"day",s=r.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),s?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:s.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:r}=this.getCurrentData(),s=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),i,l;for(let o in n)s.push(o);for(i=0;i<s.length;i+=1)if(l=n[s[i]],l&&l.singleUnit===e)return l;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),r=K(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),fe(n))}formatRange(e,n,r){let{dateEnv:s}=this.getCurrentData();return s.formatRange(s.createMarker(e),s.createMarker(n),fe(r),r)}formatIso(e,n){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:n})}select(e,n){let r;n==null?e.start!=null?r=e:r={start:e,end:null}:r={start:e,end:n};let s=this.getCurrentData(),i=fk(r,s.dateEnv,K({days:1}));i&&(this.dispatch({type:"SELECT_DATES",selection:i}),Bv(i,null,s))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),rk(e,n))}addEvent(e,n){if(e instanceof ue){let l=e._def,o=e._instance;return this.getCurrentData().eventStore.defs[l.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Ic({def:l,instance:o})}),this.triggerEventAdd(e)),e}let r=this.getCurrentData(),s;if(n instanceof gr)s=n.internalEventSource;else if(typeof n=="boolean")n&&([s]=ed(r.eventSources));else if(n!=null){let l=this.getEventSourceById(n);if(!l)return console.warn(`Could not find an event source with ID "${n}"`),null;s=l.internalEventSource}let i=Dv(e,s,r,!1);if(i){let l=new ue(r,i.def,i.def.recurringDef?null:i.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Ic(i)}),this.triggerEventAdd(l),l}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:$v(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:r,instances:s}=n.eventStore;e=String(e);for(let i in r){let l=r[i];if(l.publicId===e){if(l.recurringDef)return new ue(n,l,null);for(let o in s){let c=s[o];if(c.defId===l.defId)return new ue(n,l,c)}}}return null}getEvents(){let e=this.getCurrentData();return Vn(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,r=[];for(let s in n)r.push(new gr(e,n[s]));return r}getEventSourceById(e){let n=this.getCurrentData(),r=n.eventSources;e=String(e);for(let s in r)if(r[s].publicId===e)return new gr(n,r[s]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof gr)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=Ov(e,n);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new gr(n,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=K(e);n&&this.trigger("_scrollRequest",{time:n})}}function Ck(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function Qv(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function jk(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function Nk(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function Ak(t,e){return{left:t.left-e.left,top:t.top-e.top}}const pa=Ze();class Tk{constructor(){this.getKeysForEventDefs=z(this._getKeysForEventDefs),this.splitDateSelection=z(this._splitDateSpan),this.splitEventStore=z(this._splitEventStore),this.splitIndividualUi=z(this._splitIndividualUi),this.splitEventDrag=z(this._splitInteraction),this.splitEventResize=z(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let n=this.getKeyInfo(e),r=this.getKeysForEventDefs(e.eventStore),s=this.splitDateSelection(e.dateSelection),i=this.splitIndividualUi(e.eventUiBases,r),l=this.splitEventStore(e.eventStore,r),o=this.splitEventDrag(e.eventDrag),c=this.splitEventResize(e.eventResize),u={};this.eventUiBuilders=qt(n,(d,h)=>this.eventUiBuilders[h]||z(Dk));for(let d in n){let h=n[d],f=l[d]||pa,p=this.eventUiBuilders[d];u[d]={businessHours:h.businessHours||e.businessHours,dateSelection:s[d]||null,eventStore:f,eventUiBases:p(e.eventUiBases[""],h.ui,i[d]),eventSelection:f.instances[e.eventSelection]?e.eventSelection:"",eventDrag:o[d]||null,eventResize:c[d]||null}}return u}_splitDateSpan(e){let n={};if(e){let r=this.getKeysForDateSpan(e);for(let s of r)n[s]=e}return n}_getKeysForEventDefs(e){return qt(e.defs,n=>this.getKeysForEventDef(n))}_splitEventStore(e,n){let{defs:r,instances:s}=e,i={};for(let l in r)for(let o of n[l])i[o]||(i[o]=Ze()),i[o].defs[l]=r[l];for(let l in s){let o=s[l];for(let c of n[o.defId])i[c]&&(i[c].instances[l]=o)}return i}_splitIndividualUi(e,n){let r={};for(let s in e)if(s)for(let i of n[s])r[i]||(r[i]={}),r[i][s]=e[s];return r}_splitInteraction(e){let n={};if(e){let r=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),s=this._getKeysForEventDefs(e.mutatedEvents),i=this._splitEventStore(e.mutatedEvents,s),l=o=>{n[o]||(n[o]={affectedEvents:r[o]||pa,mutatedEvents:i[o]||pa,isEvent:e.isEvent})};for(let o in r)l(o);for(let o in i)l(o)}return n}}function Dk(t,e,n){let r=[];t&&r.push(t),e&&r.push(e);let s={"":Iv(r)};return n&&Object.assign(s,n),s}function Yv(t,e,n,r){return{dow:t.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!Ut(r.activeRange,t))),isOther:!!(r&&!Ut(r.currentRange,t)),isToday:!!(e&&Ut(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function ud(t,e){let n=["fc-day",`fc-day-${P_[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const Rk=fe({year:"numeric",month:"long",day:"numeric"}),Ik=fe({week:"long"});function Gl(t,e,n="day",r=!0){const{dateEnv:s,options:i,calendarApi:l}=t;let o=s.format(e,n==="week"?Ik:Rk);if(i.navLinks){let c=s.toDate(e);const u=d=>{let h=n==="day"?i.navLinkDayClick:n==="week"?i.navLinkWeekClick:null;typeof h=="function"?h.call(l,s.toDate(e),d):(typeof h=="string"&&(n=h),l.zoomTo(e,n))};return Object.assign({title:Is(i.navLinkHint,[o,c],o),"data-navlink":""},r?vv(u):{onClick:u})}return{"aria-label":o}}let ga=null;function Ok(){return ga===null&&(ga=Pk()),ga}function Pk(){let t=document.createElement("div");Rs(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return qu(t),n}let ma;function Mk(){return ma||(ma=Lk()),ma}function Lk(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=Kv(t);return document.body.removeChild(t),e}function Kv(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function Bk(t,e=!1){let n=window.getComputedStyle(t),r=parseInt(n.borderLeftWidth,10)||0,s=parseInt(n.borderRightWidth,10)||0,i=parseInt(n.borderTopWidth,10)||0,l=parseInt(n.borderBottomWidth,10)||0,o=Kv(t),c=o.y-r-s,u=o.x-i-l,d={borderLeft:r,borderRight:s,borderTop:i,borderBottom:l,scrollbarBottom:u,scrollbarLeft:0,scrollbarRight:0};return Ok()&&n.direction==="rtl"?d.scrollbarLeft=c:d.scrollbarRight=c,e&&(d.paddingLeft=parseInt(n.paddingLeft,10)||0,d.paddingRight=parseInt(n.paddingRight,10)||0,d.paddingTop=parseInt(n.paddingTop,10)||0,d.paddingBottom=parseInt(n.paddingBottom,10)||0),d}function $k(t,e=!1,n){let r=dd(t),s=Bk(t,e),i={left:r.left+s.borderLeft+s.scrollbarLeft,right:r.right-s.borderRight-s.scrollbarRight,top:r.top+s.borderTop,bottom:r.bottom-s.borderBottom-s.scrollbarBottom};return e&&(i.left+=s.paddingLeft,i.right-=s.paddingRight,i.top+=s.paddingTop,i.bottom-=s.paddingBottom),i}function dd(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function Fk(t){let e=Zv(t),n=t.getBoundingClientRect();for(let r of e){let s=Qv(n,r.getBoundingClientRect());if(s)n=s;else return null}return n}function Zv(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class Kr{constructor(e,n,r,s){this.els=n;let i=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(i.left),s&&this.buildElVerticals(i.top)}buildElHorizontals(e){let n=[],r=[];for(let s of this.els){let i=s.getBoundingClientRect();n.push(i.left-e),r.push(i.right-e)}this.lefts=n,this.rights=r}buildElVerticals(e){let n=[],r=[];for(let s of this.els){let i=s.getBoundingClientRect();n.push(i.top-e),r.push(i.bottom-e)}this.tops=n,this.bottoms=r}leftToIndex(e){let{lefts:n,rights:r}=this,s=n.length,i;for(i=0;i<s;i+=1)if(e>=n[i]&&e<r[i])return i}topToIndex(e){let{tops:n,bottoms:r}=this,s=n.length,i;for(i=0;i<s;i+=1)if(e>=n[i]&&e<r[i])return i}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return Bi(this.tops||[],e.tops||[])&&Bi(this.bottoms||[],e.bottoms||[])&&Bi(this.lefts||[],e.lefts||[])&&Bi(this.rights||[],e.rights||[])}}function Bi(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(Math.round(t[r])!==Math.round(e[r]))return!1;return!0}class hd{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class Uk extends hd{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class Hk extends hd{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Tt extends ee{constructor(){super(...arguments),this.uid=sr()}prepareHits(){}queryHit(e,n,r,s){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Re(e,".fc-event-mirror")}isValidDateDownEl(e){return!Re(e,".fc-event:not(.fc-bg-event)")&&!Re(e,".fc-more-link")&&!Re(e,"a[data-navlink]")&&!Re(e,".fc-popover")}}class Jv{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let r of e)this.insertEntry(r,n);return n}insertEntry(e,n){let r=this.findInsertion(e);this.isInsertionValid(r,e)?this.insertEntryAt(e,r):this.handleInvalidInsertion(r,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,r){if(this.allowReslicing&&e.touchingEntry){const s=Object.assign(Object.assign({},n),{span:fd(n.span,e.touchingEntry.span)});r.push(s),this.splitEntry(n,e.touchingEntry,r)}else r.push(n)}splitEntry(e,n,r){let s=e.span,i=n.span;s.start<i.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.start,end:i.start}},r),s.end>i.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.end,end:s.end}},r)}insertEntryAt(e,n){let{entriesByLevel:r,levelCoords:s}=this;n.lateral===-1?(va(s,n.level,n.levelCoord),va(r,n.level,[e])):va(r[n.level],n.lateral,e),this.stackCnts[Wn(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:r,strictOrder:s,stackCnts:i}=this,l=n.length,o=0,c=-1,u=-1,d=null,h=0;for(let y=0;y<l;y+=1){const x=n[y];if(!s&&x>=o+this.getEntryThickness(e))break;let b=r[y],g,m=Mc(b,e.span.start,Pc),v=m[0]+m[1];for(;(g=b[v])&&g.span.start<e.span.end;){let w=x+this.getEntryThickness(g);w>o&&(o=w,d=g,c=y,u=v),w===o&&(h=Math.max(h,i[Wn(g)]+1)),v+=1}}let f=0;if(d)for(f=c+1;f<l&&n[f]<o;)f+=1;let p=-1;return f<l&&n[f]===o&&(p=Mc(r[f],e.span.end,Pc)[0]),{touchingLevel:c,touchingLateral:u,touchingEntry:d,stackCnt:h,levelCoord:o,level:f,lateral:p}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,r=e.length,s=[];for(let i=0;i<r;i+=1){let l=e[i],o=n[i];for(let c of l)s.push(Object.assign(Object.assign({},c),{thickness:this.getEntryThickness(c),levelCoord:o}))}return s}}function Pc(t){return t.span.end}function Wn(t){return t.index+":"+t.span.start}function zk(t){let e=[];for(let n of t){let r=[],s={span:n.span,entries:[n]};for(let i of e)fd(i.span,s.span)?s={entries:i.entries.concat(s.entries),span:Vk(i.span,s.span)}:r.push(i);r.push(s),e=r}return e}function Vk(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function fd(t,e){let n=Math.max(t.start,e.start),r=Math.min(t.end,e.end);return n<r?{start:n,end:r}:null}function va(t,e,n){t.splice(e,0,n)}function Mc(t,e,n){let r=0,s=t.length;if(!s||e<n(t[r]))return[0,0];if(e>n(t[s-1]))return[s,0];for(;r<s;){let i=Math.floor(r+(s-r)/2),l=n(t[i]);if(e<l)s=i;else if(e>l)r=i+1;else return[i,1]}return[r,0]}class Wk{constructor(e,n){this.emitter=new _o}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const pd={};function qk(t,e){return!t||e>10?fe({weekday:"short"}):e>1?fe({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):fe({weekday:"long"})}const Xv="fc-col-header-cell";function ey(t){return t.text}class Gk extends ee{render(){let{dateEnv:e,options:n,theme:r,viewApi:s}=this.context,{props:i}=this,{date:l,dateProfile:o}=i,c=Yv(l,i.todayRange,null,o),u=[Xv].concat(ud(c,r)),d=e.format(l,i.dayHeaderFormat),h=!c.isDisabled&&i.colCnt>1?Gl(this.context,l):{},f=e.toDate(l);e.namedTimeZoneImpl&&(f=_n(f,36e5));let p=Object.assign(Object.assign(Object.assign({date:f,view:s},i.extraRenderProps),{text:d}),c);return S(tt,{elTag:"th",elClasses:u,elAttrs:Object.assign({role:"columnheader",colSpan:i.colSpan,"data-date":c.isDisabled?void 0:Ku(l)},i.extraDataAttrs),renderProps:p,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:ey,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},y=>S("div",{className:"fc-scrollgrid-sync-inner"},!c.isDisabled&&S(y,{elTag:"a",elAttrs:h,elClasses:["fc-col-header-cell-cushion",i.isSticky&&"fc-sticky"]})))}}const Qk=fe({weekday:"long"});class Yk extends ee{render(){let{props:e}=this,{dateEnv:n,theme:r,viewApi:s,options:i}=this.context,l=ke(new Date(2592e5),e.dow),o={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},c=n.format(l,e.dayHeaderFormat),u=Object.assign(Object.assign(Object.assign(Object.assign({date:l},o),{view:s}),e.extraRenderProps),{text:c});return S(tt,{elTag:"th",elClasses:[Xv,...ud(o,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:u,generatorName:"dayHeaderContent",customGenerator:i.dayHeaderContent,defaultGenerator:ey,classNameGenerator:i.dayHeaderClassNames,didMount:i.dayHeaderDidMount,willUnmount:i.dayHeaderWillUnmount},d=>S("div",{className:"fc-scrollgrid-sync-inner"},S(d,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(l,Qk)}})))}}class ty extends ee{constructor(){super(...arguments),this.createDayHeaderFormatter=z(Kk)}render(){let{context:e}=this,{dates:n,dateProfile:r,datesRepDistinctDays:s,renderIntro:i}=this.props,l=this.createDayHeaderFormatter(e.options.dayHeaderFormat,s,n.length);return S(ss,{unit:"day"},(o,c)=>S("tr",{role:"row"},i&&i("day"),n.map(u=>s?S(Gk,{key:u.toISOString(),date:u,dateProfile:r,todayRange:c,colCnt:n.length,dayHeaderFormat:l}):S(Yk,{key:u.getUTCDay(),dow:u.getUTCDay(),dayHeaderFormat:l}))))}}function Kk(t,e,n){return t||qk(e,n)}class ny{constructor(e,n){let r=e.start,{end:s}=e,i=[],l=[],o=-1;for(;r<s;)n.isHiddenDay(r)?i.push(o+.5):(o+=1,i.push(o),l.push(r)),r=ke(r,1);this.dates=l,this.indices=i,this.cnt=l.length}sliceRange(e){let n=this.getDateDayIndex(e.start),r=this.getDateDayIndex(ke(e.end,-1)),s=Math.max(0,n),i=Math.min(this.cnt-1,r);return s=Math.ceil(s),i=Math.floor(i),s<=i?{firstIndex:s,lastIndex:i,isStart:n===s,isEnd:r===i}:null}getDateDayIndex(e){let{indices:n}=this,r=Math.floor(ir(this.dates[0],e));return r<0?n[0]-1:r>=n.length?n[n.length-1]+1:n[r]}}class ry{constructor(e,n){let{dates:r}=e,s,i,l;if(n){for(i=r[0].getUTCDay(),s=1;s<r.length&&r[s].getUTCDay()!==i;s+=1);l=Math.ceil(r.length/s)}else l=1,s=r.length;this.rowCnt=l,this.colCnt=s,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let r=[];for(let s=0;s<this.colCnt;s+=1)r.push(this.buildCell(n,s));e.push(r)}return e}buildCell(e,n){let r=this.daySeries.dates[e*this.colCnt+n];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,r=this.daySeries.sliceRange(e),s=[];if(r){let{firstIndex:i,lastIndex:l}=r,o=i;for(;o<=l;){let c=Math.floor(o/n),u=Math.min((c+1)*n,l+1);s.push({row:c,firstCol:o%n,lastCol:(u-1)%n,isStart:r.isStart&&o===i,isEnd:r.isEnd&&u-1===l}),o=u}}return s}}class sy{constructor(){this.sliceBusinessHours=z(this._sliceBusinessHours),this.sliceDateSelection=z(this._sliceDateSpan),this.sliceEventStore=z(this._sliceEventStore),this.sliceEventDrag=z(this._sliceInteraction),this.sliceEventResize=z(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,r,s,...i){let{eventUiBases:l}=e,o=this.sliceEventStore(e.eventStore,l,n,r,...i);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,r,l,s,...i),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,r,s,...i),fgEventSegs:o.fg,bgEventSegs:o.bg,eventDrag:this.sliceEventDrag(e.eventDrag,l,n,r,...i),eventResize:this.sliceEventResize(e.eventResize,l,n,r,...i),eventSelection:e.eventSelection}}sliceNowDate(e,n,r,s,...i){return this._sliceDateSpan({range:{start:e,end:_n(e,1)},allDay:!1},n,r,{},s,...i)}_sliceBusinessHours(e,n,r,s,...i){return e?this._sliceEventStore(er(e,$i(n,!!r),s),{},n,r,...i).bg:[]}_sliceEventStore(e,n,r,s,...i){if(e){let l=Bf(e,n,$i(r,!!s),s);return{bg:this.sliceEventRanges(l.bg,i),fg:this.sliceEventRanges(l.fg,i)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,r,s,...i){if(!e)return null;let l=Bf(e.mutatedEvents,n,$i(r,!!s),s);return{segs:this.sliceEventRanges(l.fg,i),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,r,s,i,...l){if(!e)return[];let o=$i(n,!!r),c=Xn(e.range,o);if(c){e=Object.assign(Object.assign({},e),{range:c});let u=yk(e,s,i),d=this.sliceRange(e.range,...l);for(let h of d)h.eventRange=u;return d}return[]}sliceEventRanges(e,n){let r=[];for(let s of e)r.push(...this.sliceEventRange(s,n));return r}sliceEventRange(e,n){let r=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(r={start:r.start,end:ke(r.start,1)});let s=this.sliceRange(r,...n);for(let i of s)i.eventRange=e,i.isStart=e.isStart&&i.isStart,i.isEnd=e.isEnd&&i.isEnd;return s}}function $i(t,e){let n=t.activeRange;return e?n:{start:_n(n.start,t.slotMinTime.milliseconds),end:_n(n.end,t.slotMaxTime.milliseconds-864e5)}}function iy(t,e,n){let{instances:r}=t.mutatedEvents;for(let s in r)if(!bo(e.validRange,r[s].range))return!1;return ly({eventDrag:t},n)}function Zk(t,e,n){return bo(e.validRange,t.range)?ly({dateSelection:t},n):!1}function ly(t,e){let n=e.getCurrentData(),r=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||Jk)(r,e)}function Jk(t,e,n={},r){return!(t.eventDrag&&!Xk(t,e,n,r)||t.dateSelection&&!eC(t,e,n,r))}function Xk(t,e,n,r){let s=e.getCurrentData(),i=t.eventDrag,l=i.mutatedEvents,o=l.defs,c=l.instances,u=ql(o,i.isEvent?t.eventUiBases:{"":s.selectionConfig});r&&(u=qt(u,r));let d=KE(t.eventStore,i.affectedEvents.instances),h=d.defs,f=d.instances,p=ql(h,t.eventUiBases);for(let y in c){let x=c[y],b=x.range,g=u[x.defId],m=o[x.defId];if(!oy(g.constraints,b,d,t.businessHours,e))return!1;let{eventOverlap:v}=e.options,w=typeof v=="function"?v:null;for(let N in f){let k=f[N];if(nd(b,k.range)&&(p[k.defId].overlap===!1&&i.isEvent||g.overlap===!1||w&&!w(new ue(e,h[k.defId],k),new ue(e,m,x))))return!1}let T=s.eventStore;for(let N of g.allows){let k=Object.assign(Object.assign({},n),{range:x.range,allDay:m.allDay}),D=T.defs[m.defId],H=T.instances[y],C;if(D?C=new ue(e,D,H):C=new ue(e,m),!N(od(k,e),C))return!1}}return!0}function eC(t,e,n,r){let s=t.eventStore,i=s.defs,l=s.instances,o=t.dateSelection,c=o.range,{selectionConfig:u}=e.getCurrentData();if(r&&(u=r(u)),!oy(u.constraints,c,s,t.businessHours,e))return!1;let{selectOverlap:d}=e.options,h=typeof d=="function"?d:null;for(let f in l){let p=l[f];if(nd(c,p.range)&&(u.overlap===!1||h&&!h(new ue(e,i[p.defId],p),null)))return!1}for(let f of u.allows){let p=Object.assign(Object.assign({},n),o);if(!f(od(p,e),null))return!1}return!0}function oy(t,e,n,r,s){for(let i of t)if(!nC(tC(i,e,n,r,s),e))return!1;return!0}function tC(t,e,n,r,s){return t==="businessHours"?ya(er(r,e,s)):typeof t=="string"?ya(So(n,i=>i.groupId===t)):typeof t=="object"&&t?ya(er(t,e,s)):[]}function ya(t){let{instances:e}=t,n=[];for(let r in e)n.push(e[r].range);return n}function nC(t,e){for(let n of t)if(bo(n,e))return!0;return!1}const Fi=/^(visible|hidden)$/;class rC extends ee{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,At(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:r}=e,s=n&&r,i=["fc-scroller"];return n&&(r?i.push("fc-scroller-liquid-absolute"):i.push("fc-scroller-liquid")),S("div",{ref:this.handleEl,className:i.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:s&&-(e.overcomeLeft||0)||"",right:s&&-(e.overcomeRight||0)||"",bottom:s&&-(e.overcomeBottom||0)||"",marginLeft:!s&&-(e.overcomeLeft||0)||"",marginRight:!s&&-(e.overcomeRight||0)||"",marginBottom:!s&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Fi.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let s=0;s<r.length;s+=1)if(r[s].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(Fi.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let s=0;s<r.length;s+=1)if(r[s].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return Fi.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Fi.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class $t{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,r)=>{let{depths:s,currentMap:i}=this,l=!1,o=!1;n!==null?(l=r in i,i[r]=n,s[r]=(s[r]||0)+1,o=!0):(s[r]-=1,s[r]||(delete i[r],delete this.callbackMap[r],l=!0)),this.masterCallback&&(l&&this.masterCallback(null,String(r)),o&&this.masterCallback(n,String(r)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),n}collect(e,n,r){return gE(this.currentMap,e,n,r)}getAll(){return ed(this.currentMap)}}function sC(t){let e=f_(t,".fc-scrollgrid-shrink"),n=0;for(let r of e)n=Math.max(n,j_(r));return Math.ceil(n)}function ay(t,e){return t.liquid&&e.liquid}function iC(t,e){return e.maxHeight!=null||ay(t,e)}function lC(t,e,n,r){let{expandRows:s}=n;return typeof e.content=="function"?e.content(n):S("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:s?n.clientHeight:""}},n.tableColGroupNode,S(r?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function oC(t,e){return Sn(t,e,wt)}function aC(t,e){let n=[];for(let r of t){let s=r.span||1;for(let i=0;i<s;i+=1)n.push(S("col",{style:{width:r.width==="shrink"?cC(e):r.width||"",minWidth:r.minWidth||""}}))}return S("colgroup",{},...n)}function cC(t){return t??4}function uC(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function dC(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function hC(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function Lc(t){return S("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function Ql(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function cy(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class gd extends ee{constructor(){super(...arguments),this.processCols=z(e=>e,oC),this.renderMicroColGroup=z(aC),this.scrollerRefs=new $t,this.scrollerElRefs=new $t(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:r}=this,s=e.sections||[],i=this.processCols(e.cols),l=this.renderMicroColGroup(i,n.shrinkWidth),o=dC(e.liquid,r);e.collapsibleWidth&&o.push("fc-scrollgrid-collapsible");let c=s.length,u=0,d,h=[],f=[],p=[];for(;u<c&&(d=s[u]).type==="header";)h.push(this.renderSection(d,l,!0)),u+=1;for(;u<c&&(d=s[u]).type==="body";)f.push(this.renderSection(d,l,!1)),u+=1;for(;u<c&&(d=s[u]).type==="footer";)p.push(this.renderSection(d,l,!0)),u+=1;let y=!Gv();const x={role:"rowgroup"};return S("table",{role:"grid",className:o.join(" "),style:{height:e.height}},!!(!y&&h.length)&&S("thead",x,...h),!!(!y&&f.length)&&S("tbody",x,...f),!!(!y&&p.length)&&S("tfoot",x,...p),y&&S("tbody",x,...h,...f,...p))}renderSection(e,n,r){return"outerContent"in e?S(ie,{key:e.key},e.outerContent):S("tr",{key:e.key,role:"presentation",className:hC(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,r))}renderChunkTd(e,n,r,s){if("outerContent"in r)return r.outerContent;let{props:i}=this,{forceYScrollbars:l,scrollerClientWidths:o,scrollerClientHeights:c}=this.state,u=iC(i,e),d=ay(i,e),h=i.liquid?l?"scroll":u?"auto":"hidden":"visible",f=e.key,p=lC(e,r,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!i.collapsibleWidth&&o[f]!==void 0?o[f]:null,clientHeight:c[f]!==void 0?c[f]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},s);return S(s?"th":"td",{ref:r.elRef,role:"presentation"},S("div",{className:`fc-scroller-harness${d?" fc-scroller-harness-liquid":""}`},S(rC,{ref:this.scrollerRefs.createRef(f),elRef:this.scrollerElRefs.createRef(f),overflowY:h,overflowX:i.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:d,liquidIsAbsolute:!0},p)))}_handleScrollerEl(e,n){let r=fC(this.props.sections,n);r&&At(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return uC(this.props.cols)?sC(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=Mk(),{scrollerRefs:n,scrollerElRefs:r}=this,s=!1,i={},l={};for(let o in n.currentMap){let c=n.currentMap[o];if(c&&c.needsYScrolling()){s=!0;break}}for(let o of this.props.sections){let c=o.key,u=r.currentMap[c];if(u){let d=u.parentNode;i[c]=Math.floor(d.getBoundingClientRect().width-(s?e.y:0)),l[c]=Math.floor(d.getBoundingClientRect().height)}}return{forceYScrollbars:s,scrollerClientWidths:i,scrollerClientHeights:l}}}gd.addStateEquality({scrollerClientWidths:wt,scrollerClientHeights:wt});function fC(t,e){for(let n of t)if(n.key===e)return n;return null}class md extends ee{constructor(){super(...arguments),this.buildPublicEvent=z((e,n,r)=>new ue(e,n,r)),this.handleEl=e=>{this.el=e,At(this.props.elRef,e),e&&$f(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:r}=n,{seg:s}=e,{eventRange:i}=s,{ui:l}=i,o={event:this.buildPublicEvent(n,i.def,i.instance),view:n.viewApi,timeText:e.timeText,textColor:l.textColor,backgroundColor:l.backgroundColor,borderColor:l.borderColor,isDraggable:!e.disableDragging&&ak(s,n),isStartResizable:!e.disableResizing&&ck(s,n),isEndResizable:!e.disableResizing&&uk(s),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!s.isStart,isEnd:!!s.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return S(tt,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...dk(o),...s.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:o,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&$f(this.el,this.props.seg)}}class vd extends ee{render(){let{props:e,context:n}=this,{options:r}=n,{seg:s}=e,{ui:i}=s.eventRange,l=r.eventTimeFormat||e.defaultTimeFormat,o=Hv(s,l,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return S(md,Object.assign({},e,{elTag:"a",elStyle:{borderColor:i.borderColor,backgroundColor:i.backgroundColor},elAttrs:Vv(s,n),defaultGenerator:pC,timeText:o}),(c,u)=>S(ie,null,S(c,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:u.textColor}}),!!u.isStartResizable&&S("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!u.isEndResizable&&S("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}vd.addPropsEquality({seg:wt});function pC(t){return S("div",{className:"fc-event-main-frame"},t.timeText&&S("div",{className:"fc-event-time"},t.timeText),S("div",{className:"fc-event-title-container"},S("div",{className:"fc-event-title fc-sticky"},t.event.title||S(ie,null,""))))}const yd=t=>S(Qt.Consumer,null,e=>{let{options:n}=e,r={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return S(tt,{elRef:t.elRef,elTag:t.elTag||"div",elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:r,generatorName:"nowIndicatorContent",customGenerator:n.nowIndicatorContent,classNameGenerator:n.nowIndicatorClassNames,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount},t.children)}),gC=fe({day:"numeric"});class xd extends ee{constructor(){super(...arguments),this.refineRenderProps=rl(mC)}render(){let{props:e,context:n}=this,{options:r}=n,s=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:r.monthStartFormat});return S(tt,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),s.isDisabled?{}:{"data-date":Ku(e.date)}),elClasses:[...ud(s,n.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:s,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:s.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount},e.children)}}function wd(t){return!!(t.dayCellContent||Dc("dayCellContent",t))}function mC(t){let{date:e,dateEnv:n,dateProfile:r,isMonthStart:s}=t,i=Yv(e,t.todayRange,null,r),l=t.showDayNumber?n.format(e,s?t.monthStartFormat:gC):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},i),{isMonthStart:s,dayNumberText:l}),t.extraRenderProps)}class uy extends ee{render(){let{props:e}=this,{seg:n}=e;return S(md,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:vC,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function vC(t){let{title:e}=t.event;return e&&S("div",{className:"fc-event-title"},t.event.title)}function dy(t){return S("div",{className:`fc-${t}`})}const hy=t=>S(Qt.Consumer,null,e=>{let{dateEnv:n,options:r}=e,{date:s}=t,i=r.weekNumberFormat||t.defaultFormat,l=n.computeWeekNumber(s),o=n.format(s,i),c={num:l,text:o,date:s};return S(tt,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:c,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:yC,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},t.children)});function yC(t){return t.text}const xa=10;class xC extends ee{constructor(){super(...arguments),this.state={titleId:xo()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&At(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=gv(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:r,state:s}=this,i=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return XS(S("div",Object.assign({},r.extraAttrs,{id:r.id,className:i.join(" "),"aria-labelledby":s.titleId,ref:this.handleRootEl}),S("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},S("span",{className:"fc-popover-title",id:s.titleId},r.title),S("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),S("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:r}=this.props,{rootEl:s}=this,i=Fk(n);if(i){let l=s.getBoundingClientRect(),o=r?Re(n,".fc-scrollgrid").getBoundingClientRect().top:i.top,c=e?i.right-l.width:i.left;o=Math.max(o,xa),c=Math.min(c,document.documentElement.clientWidth-xa-l.width),c=Math.max(c,xa);let u=s.offsetParent.getBoundingClientRect();Rs(s,{top:o-u.top,left:c-u.left})}}}class wC extends Tt{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:r}=this,{startDate:s,todayRange:i,dateProfile:l}=r,o=n.format(s,e.dayPopoverFormat);return S(xd,{elRef:this.handleRootEl,date:s,dateProfile:l,todayRange:i},(c,u,d)=>S(xC,{elRef:d.ref,id:r.id,title:o,extraClassNames:["fc-more-popover"].concat(d.className||[]),extraAttrs:d,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},wd(e)&&S(c,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,n,r,s){let{rootEl:i,props:l}=this;return e>=0&&e<r&&n>=0&&n<s?{dateProfile:l.dateProfile,dateSpan:Object.assign({allDay:!l.forceTimed,range:{start:l.startDate,end:l.endDate}},l.extraDateSpan),dayEl:i,rect:{left:0,top:0,right:r,bottom:s},layer:1}:null}}class fy extends ee{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:xo()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&At(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:r}=this,{moreLinkClick:s}=r.options,i=Uf(n).start;function l(o){let{def:c,instance:u,range:d}=o.eventRange;return{event:new ue(r,c,u),start:r.dateEnv.toDate(d.start),end:r.dateEnv.toDate(d.end),isStart:o.isStart,isEnd:o.isEnd}}typeof s=="function"&&(s=s({date:i,allDay:!!n.allDayDate,allSegs:n.allSegs.map(l),hiddenSegs:n.hiddenSegs.map(l),jsEvent:e,view:r.viewApi})),!s||s==="popover"?this.setState({isPopoverOpen:!0}):typeof s=="string"&&r.calendarApi.zoomTo(i,s)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return S(Qt.Consumer,null,r=>{let{viewApi:s,options:i,calendarApi:l}=r,{moreLinkText:o}=i,{moreCnt:c}=e,u=Uf(e),d=typeof o=="function"?o.call(l,c):`+${c} ${o}`,h=Is(i.moreLinkHint,[c],d),f={num:c,shortText:`+${c}`,text:d,view:s};return S(ie,null,!!e.moreCnt&&S(tt,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),vv(this.handleClick)),{title:h,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:f,generatorName:"moreLinkContent",customGenerator:i.moreLinkContent,defaultGenerator:e.defaultGenerator||bC,classNameGenerator:i.moreLinkClassNames,didMount:i.moreLinkDidMount,willUnmount:i.moreLinkWillUnmount},e.children),n.isPopoverOpen&&S(wC,{id:n.popoverId,startDate:u.start,endDate:u.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Re(this.linkEl,".fc-view-harness"))}}function bC(t){return t.text}function Uf(t){if(t.allDayDate)return{start:t.allDayDate,end:ke(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:py(e),end:_C(e)}}function py(t){return t.reduce(SC).eventRange.range.start}function SC(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function _C(t){return t.reduce(EC).eventRange.range.end}function EC(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class kC{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class CC extends kC{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let r=!1;e.isActive?(n.set(e.id,e),r=!0):n.has(e.id)&&(n.delete(e.id),r=!0),r&&this.set(n)}}const jC=[],gy={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},my=Object.assign(Object.assign({},gy),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function NC(t){let e=t.length>0?t[0].code:"en",n=jC.concat(t),r={en:my};for(let s of n)r[s.code]=s;return{map:r,defaultCode:e}}function vy(t,e){return typeof t=="object"&&!Array.isArray(t)?yy(t.code,[t.code],t):AC(t,e)}function AC(t,e){let n=[].concat(t||[]),r=TC(n,e)||my;return yy(t,n,r)}function TC(t,e){for(let n=0;n<t.length;n+=1){let r=t[n].toLocaleLowerCase().split("-");for(let s=r.length;s>0;s-=1){let i=r.slice(0,s).join("-");if(e[i])return e[i]}}return null}function yy(t,e,n){let r=Xu([gy,n],["buttonText"]);delete r.code;let{week:s}=r;return delete r.week,{codeArg:t,codes:e,week:s,simpleNumberFormat:new Intl.NumberFormat(t),options:r}}function Yt(t){return{id:sr(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function DC(t,e){let n={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function s(i){for(let l of i){const o=l.name,c=n[o];c===void 0?(n[o]=l.id,s(l.deps),r=IC(r,l)):c!==l.id&&console.warn(`Duplicate plugin '${o}'`)}}return t&&s(t),s(e),r}function RC(){let t=[],e=[],n;return(r,s)=>((!n||!Sn(r,t)||!Sn(s,e))&&(n=DC(r,s)),t=r,e=s,n)}function IC(t,e){return{premiumReleaseDate:OC(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function OC(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class Nn extends ui{}Nn.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Nn.prototype.baseIconClass="fc-icon";Nn.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Nn.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Nn.prototype.iconOverrideOption="buttonIcons";Nn.prototype.iconOverrideCustomButtonOption="icon";Nn.prototype.iconOverridePrefix="fc-icon-";function PC(t,e){let n={},r;for(r in t)Bc(r,n,t,e);for(r in e)Bc(r,n,t,e);return n}function Bc(t,e,n,r){if(e[t])return e[t];let s=MC(t,e,n,r);return s&&(e[t]=s),s}function MC(t,e,n,r){let s=n[t],i=r[t],l=d=>s&&s[d]!==null?s[d]:i&&i[d]!==null?i[d]:null,o=l("component"),c=l("superType"),u=null;if(c){if(c===t)throw new Error("Can't have a custom view type that references itself");u=Bc(c,e,n,r)}return!o&&u&&(o=u.component),o?{type:t,component:o,defaults:Object.assign(Object.assign({},u?u.defaults:{}),s?s.rawOptions:{}),overrides:Object.assign(Object.assign({},u?u.overrides:{}),i?i.rawOptions:{})}:null}function Hf(t){return qt(t,LC)}function LC(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=zf(e):n&&!(n.prototype instanceof ee)&&(n=zf(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function zf(t){return e=>S(Qt.Consumer,null,n=>S(tt,{elTag:"div",elClasses:Cv(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function BC(t,e,n,r){let s=Hf(t),i=Hf(e.views),l=PC(s,i);return qt(l,o=>$C(o,i,e,n,r))}function $C(t,e,n,r,s){let i=t.overrides.duration||t.defaults.duration||r.duration||n.duration,l=null,o="",c="",u={};if(i&&(l=FC(i),l)){let f=Tc(l);o=f.unit,f.value===1&&(c=o,u=e[o]?e[o].rawOptions:{})}let d=f=>{let p=f.buttonText||{},y=t.defaults.buttonTextKey;return y!=null&&p[y]!=null?p[y]:p[t.type]!=null?p[t.type]:p[c]!=null?p[c]:null},h=f=>{let p=f.buttonHints||{},y=t.defaults.buttonTextKey;return y!=null&&p[y]!=null?p[y]:p[t.type]!=null?p[t.type]:p[c]!=null?p[c]:null};return{type:t.type,component:t.component,duration:l,durationUnit:o,singleUnit:c,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},u),t.overrides),buttonTextOverride:d(r)||d(n)||t.overrides.buttonText,buttonTextDefault:d(s)||t.defaults.buttonText||d(Os)||t.type,buttonTitleOverride:h(r)||h(n)||t.overrides.buttonHint,buttonTitleDefault:h(s)||t.defaults.buttonHint||h(Os)}}let Vf={};function FC(t){let e=JSON.stringify(t),n=Vf[e];return n===void 0&&(n=K(t),Vf[e]=n),n}function UC(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function HC(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function zC(t,e,n){let r=t.initialDate;return r!=null?e.createMarker(r):n.getDateMarker()}function VC(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function WC(t,e,n,r){let s;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||n);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(s=r.buildPrev(t,n),s.isValid)return s;break;case"NEXT":if(s=r.buildNext(t,n),s.isValid)return s;break}return t}function qC(t,e,n){let r=e?e.activeRange:null;return wy({},XC(t,n),r,n)}function GC(t,e,n,r){let s=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return wy(t,e.sources,s,r);case"REMOVE_EVENT_SOURCE":return YC(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?by(t,s,r):t;case"FETCH_EVENT_SOURCES":return bd(t,e.sourceIds?bv(e.sourceIds):Sy(t,r),s,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return JC(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function QC(t,e,n){let r=e?e.activeRange:null;return bd(t,Sy(t,n),r,!0,n)}function xy(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function wy(t,e,n,r){let s={};for(let i of e)s[i.sourceId]=i;return n&&(s=by(s,n,r)),Object.assign(Object.assign({},t),s)}function YC(t,e){return Jn(t,n=>n.sourceId!==e)}function by(t,e,n){return bd(t,Jn(t,r=>KC(r,e,n)),e,!1,n)}function KC(t,e,n){return _y(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function bd(t,e,n,r,s){let i={};for(let l in t){let o=t[l];e[l]?i[l]=ZC(o,n,r,s):i[l]=o}return i}function ZC(t,e,n,r){let{options:s,calendarApi:i}=r,l=r.pluginHooks.eventSourceDefs[t.sourceDefId],o=sr();return l.fetch({eventSource:t,range:e,isRefetch:n,context:r},c=>{let{rawEvents:u}=c;s.eventSourceSuccess&&(u=s.eventSourceSuccess.call(i,u,c.response)||u),t.success&&(u=t.success.call(i,u,c.response)||u),r.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:o,fetchRange:e,rawEvents:u})},c=>{let u=!1;s.eventSourceFailure&&(s.eventSourceFailure.call(i,c),u=!0),t.failure&&(t.failure(c),u=!0),u||console.warn(c.message,c),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:o,fetchRange:e,error:c})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:o})}function JC(t,e,n,r){let s=t[e];return s&&n===s.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},s),{isFetching:!1,fetchRange:r})}):t}function Sy(t,e){return Jn(t,n=>_y(n,e))}function XC(t,e){let n=Pv(e),r=[].concat(t.eventSources||[]),s=[];t.initialEvents&&r.unshift(t.initialEvents),t.events&&r.unshift(t.events);for(let i of r){let l=Ov(i,e,n);l&&s.push(l)}return s}function _y(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function ej(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function tj(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function nj(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function rj(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function sj(t,e,n,r,s){let i=t.headerToolbar?Wf(t.headerToolbar,t,e,n,r,s):null,l=t.footerToolbar?Wf(t.footerToolbar,t,e,n,r,s):null;return{header:i,footer:l}}function Wf(t,e,n,r,s,i){let l={},o=[],c=!1;for(let u in t){let d=t[u],h=ij(d,e,n,r,s,i);l[u]=h.widgets,o.push(...h.viewsWithButtons),c=c||h.hasTitle}return{sectionWidgets:l,viewsWithButtons:o,hasTitle:c}}function ij(t,e,n,r,s,i){let l=e.direction==="rtl",o=e.customButtons||{},c=n.buttonText||{},u=e.buttonText||{},d=n.buttonHints||{},h=e.buttonHints||{},f=t?t.split(" "):[],p=[],y=!1;return{widgets:f.map(b=>b.split(",").map(g=>{if(g==="title")return y=!0,{buttonName:g};let m,v,w,T,N,k;if(m=o[g])w=D=>{m.click&&m.click.call(D.target,D,D.target)},(T=r.getCustomButtonIconClass(m))||(T=r.getIconClass(g,l))||(N=m.text),k=m.hint||m.text;else if(v=s[g]){p.push(g),w=()=>{i.changeView(g)},(N=v.buttonTextOverride)||(T=r.getIconClass(g,l))||(N=v.buttonTextDefault);let D=v.buttonTextOverride||v.buttonTextDefault;k=Is(v.buttonTitleOverride||v.buttonTitleDefault||e.viewHint,[D,g],D)}else if(i[g])if(w=()=>{i[g]()},(N=c[g])||(T=r.getIconClass(g,l))||(N=u[g]),g==="prevYear"||g==="nextYear"){let D=g==="prevYear"?"prev":"next";k=Is(d[D]||h[D],[u.year||"year","year"],u[g])}else k=D=>Is(d[g]||h[g],[u[D]||D,D],u[g]);return{buttonName:g,buttonClick:w,buttonIcon:T,buttonText:N,buttonHint:k}})),viewsWithButtons:p,hasTitle:y}}class lj{constructor(e,n,r){this.type=e,this.getCurrentData=n,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let oj={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const aj=Yt({name:"array-event-source",eventSourceDefs:[oj]});let cj={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:r}=t.context,s=t.eventSource.meta;xk(s.bind(null,Wv(t.range,r)),i=>e({rawEvents:i}),n)}};const uj=Yt({name:"func-event-source",eventSourceDefs:[cj]}),dj={method:String,extraParams:A,startParam:String,endParam:String,timeZoneParam:String};let hj={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:r}=t.eventSource,s=pj(r,t.range,t.context);wk(r.method,r.url,s).then(([i,l])=>{e({rawEvents:i,response:l})},n)}};const fj=Yt({name:"json-event-source",eventSourceRefiners:dj,eventSourceDefs:[hj]});function pj(t,e,n){let{dateEnv:r,options:s}=n,i,l,o,c,u={};return i=t.startParam,i==null&&(i=s.startParam),l=t.endParam,l==null&&(l=s.endParam),o=t.timeZoneParam,o==null&&(o=s.timeZoneParam),typeof t.extraParams=="function"?c=t.extraParams():c=t.extraParams||{},Object.assign(u,c),u[i]=r.formatIso(e.start),u[l]=r.formatIso(e.end),r.timeZone!=="local"&&(u[o]=r.timeZone),u}const gj={daysOfWeek:A,startTime:K,endTime:K,duration:K,startRecur:A,endRecur:A};let mj={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},r;return t.duration&&(r=t.duration),!r&&t.startTime&&t.endTime&&(r=D_(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:r,typeData:n}}return null},expand(t,e,n){let r=Xn(e,{start:t.startRecur,end:t.endRecur});return r?yj(t.daysOfWeek,t.startTime,t.dateEnv,n,r):[]}};const vj=Yt({name:"simple-recurring-event",recurringTypes:[mj],eventRefiners:gj});function yj(t,e,n,r,s){let i=t?bv(t):null,l=le(s.start),o=s.end,c=[];for(e&&(e.milliseconds<0?o=ke(o,1):e.milliseconds>=1e3*60*60*24&&(l=ke(l,-1)));l<o;){let u;(!i||i[l.getUTCDay()])&&(e?u=r.add(l,e):u=l,c.push(r.createMarker(n.toDate(u)))),l=ke(l,1)}return c}const xj=Yt({name:"change-handler",optionChangeHandlers:{events(t,e){qf([t],e)},eventSources:qf}});function qf(t,e){let n=ed(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let r=[];for(let s of t){let i=!1;for(let l=0;l<n.length;l+=1)if(n[l]._raw===s){n.splice(l,1),i=!0;break}i||r.push(s)}for(let s of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:s.sourceId});for(let s of r)e.calendarApi.addEventSource(s)}function wj(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},Wv(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function bj(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",Vn(t,e))}const Sj=[aj,uj,fj,vj,xj,Yt({name:"misc",isLoadingFuncs:[t=>xy(t.eventSources)],propSetHandlers:{dateProfile:wj,eventStore:bj}})];class _j{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new Wu(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],r;for(;r=e.shift();)this.runTask(r),n.push(r);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function Ej(t,e,n){let r;return/^(year|month)$/.test(t.currentRangeUnit)?r=t.currentRange:r=t.activeRange,n.formatRange(r.start,r.end,fe(e.titleFormat||kj(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function kj(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=Bl(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class Gf{constructor(){this.resetListeners=new Set}handleInput(e,n){const r=this.dateEnv;if(e!==r&&(typeof n=="function"?this.nowFn=n:r||(this.nowAnchorDate=e.toDate(n?e.createMarker(n):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,r))for(const s of this.resetListeners.values())s()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class Cj{constructor(e){this.computeCurrentViewData=z(this._computeCurrentViewData),this.organizeRawLocales=z(NC),this.buildLocale=z(vy),this.buildPluginHooks=RC(),this.buildDateEnv=z(jj),this.buildTheme=z(Nj),this.parseToolbars=z(sj),this.buildViewSpecs=z(BC),this.buildDateProfileGenerator=rl(Aj),this.buildViewApi=z(Tj),this.buildViewUiProps=rl(Ij),this.buildEventUiBySource=z(Dj,wt),this.buildEventUiBases=z(Rj),this.parseContextBusinessHours=rl(Oj),this.buildTitle=z(Ej),this.nowManager=new Gf,this.emitter=new _o,this.actionRunner=new _j(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=f=>{this.actionRunner.request(f)},this.props=e,this.actionRunner.pause(),this.nowManager=new Gf;let n={},r=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),s=r.calendarOptions.initialView||r.pluginHooks.initialView,i=this.computeCurrentViewData(s,r,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(i.options);let l={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},o=zC(r.calendarOptions,r.dateEnv,this.nowManager),c=i.dateProfileGenerator.build(o);Ut(c.activeRange,o)||(o=c.currentRange.start);for(let f of r.pluginHooks.contextInit)f(l);let u=qC(r.calendarOptions,c,l),d={dynamicOptionOverrides:n,currentViewType:s,currentDate:o,dateProfile:c,businessHours:this.parseContextBusinessHours(l),eventSources:u,eventUiBases:{},eventStore:Ze(),renderableEventStore:Ze(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(l).selectionConfig},h=Object.assign(Object.assign({},l),d);for(let f of r.pluginHooks.reducers)Object.assign(d,f(null,null,h));wa(d,l)&&this.emitter.trigger("loading",!0),this.state=d,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:r}=this;n===void 0?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:r,emitter:s}=this,i=VC(r.dynamicOptionOverrides,e),l=this.computeOptionsData(n.optionOverrides,i,n.calendarApi),o=UC(r.currentViewType,e),c=this.computeCurrentViewData(o,l,n.optionOverrides,i);n.calendarApi.currentDataManager=this,s.setThisContext(n.calendarApi),s.setOptions(c.options);let u={nowManager:this.nowManager,dateEnv:l.dateEnv,options:l.calendarOptions,pluginHooks:l.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:s,getCurrentData:this.getCurrentData},{currentDate:d,dateProfile:h}=r;this.data&&this.data.dateProfileGenerator!==c.dateProfileGenerator&&(h=c.dateProfileGenerator.build(d)),d=HC(d,e),h=WC(h,e,d,c.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Ut(h.currentRange,d))&&(d=h.currentRange.start);let f=GC(r.eventSources,e,h,u),p=qE(r.eventStore,e,f,h,u),x=xy(f)&&!c.options.progressiveEventRendering&&r.renderableEventStore||p,{eventUiSingleBase:b,selectionConfig:g}=this.buildViewUiProps(u),m=this.buildEventUiBySource(f),v=this.buildEventUiBases(x.defs,b,m),w={dynamicOptionOverrides:i,currentViewType:o,currentDate:d,dateProfile:h,eventSources:f,eventStore:p,renderableEventStore:x,selectionConfig:g,eventUiBases:v,businessHours:this.parseContextBusinessHours(u),dateSelection:ej(r.dateSelection,e),eventSelection:tj(r.eventSelection,e),eventDrag:nj(r.eventDrag,e),eventResize:rj(r.eventResize,e)},T=Object.assign(Object.assign({},u),w);for(let D of l.pluginHooks.reducers)Object.assign(w,D(r,e,T));let N=wa(r,u),k=wa(w,u);!N&&k?s.trigger("loading",!0):N&&!k&&s.trigger("loading",!1),this.state=w,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,r=this.data,s=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),i=this.computeCurrentViewData(n.currentViewType,s,e.optionOverrides,n.dynamicOptionOverrides),l=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,i.options,s.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},s),i),n),o=s.pluginHooks.optionChangeHandlers,c=r&&r.calendarOptions,u=s.calendarOptions;if(c&&c!==u){c.timeZone!==u.timeZone&&(n.eventSources=l.eventSources=QC(l.eventSources,n.dateProfile,l),n.eventStore=l.eventStore=Mf(l.eventStore,r.dateEnv,l.dateEnv),n.renderableEventStore=l.renderableEventStore=Mf(l.renderableEventStore,r.dateEnv,l.dateEnv));for(let d in o)(this.optionsForHandling.indexOf(d)!==-1||c[d]!==u[d])&&o[d](u[d],l)}this.optionsForHandling=[],e.onData&&e.onData(l)}computeOptionsData(e,n,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:s,pluginHooks:i,localeDefaults:l,availableLocaleData:o,extra:c}=this.processRawCalendarOptions(e,n);Qf(c);let u=this.buildDateEnv(s.timeZone,s.locale,s.weekNumberCalculation,s.firstDay,s.weekText,i,o,s.defaultRangeSeparator),d=this.buildViewSpecs(i.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,l),h=this.buildTheme(s,i),f=this.parseToolbars(s,this.stableOptionOverrides,h,d,r);return this.stableCalendarOptionsData={calendarOptions:s,pluginHooks:i,dateEnv:u,viewSpecs:d,theme:h,toolbarConfig:f,localeDefaults:l,availableRawLocales:o.map}}processRawCalendarOptions(e,n){let{locales:r,locale:s}=da([Os,e,n]),i=this.organizeRawLocales(r),l=i.map,o=this.buildLocale(s||i.defaultCode,l).options,c=this.buildPluginHooks(e.plugins||[],Sj),u=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Tf),Df),Rf),c.listenerRefiners),c.optionRefiners),d={},h=da([Os,o,e,n]),f={},p=this.currentCalendarOptionsInput,y=this.currentCalendarOptionsRefined,x=!1;for(let b in h)this.optionsForRefining.indexOf(b)===-1&&(h[b]===p[b]||On[b]&&b in p&&On[b](p[b],h[b]))?f[b]=y[b]:u[b]?(f[b]=u[b](h[b]),x=!0):d[b]=p[b];return x&&(this.currentCalendarOptionsInput=h,this.currentCalendarOptionsRefined=f,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:c,availableLocaleData:i,localeDefaults:o,extra:d}}_computeCurrentViewData(e,n,r,s){let i=n.viewSpecs[e];if(!i)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:l,extra:o}=this.processRawViewOptions(i,n.pluginHooks,n.localeDefaults,r,s);Qf(o),this.nowManager.handleInput(n.dateEnv,l.now);let c=this.buildDateProfileGenerator({dateProfileGeneratorClass:i.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:i.duration,durationUnit:i.durationUnit,usesMinMaxTime:i.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:l.slotMinTime,slotMaxTime:l.slotMaxTime,showNonCurrentDates:l.showNonCurrentDates,dayCount:l.dayCount,dateAlignment:l.dateAlignment,dateIncrement:l.dateIncrement,hiddenDays:l.hiddenDays,weekends:l.weekends,validRangeInput:l.validRange,visibleRangeInput:l.visibleRange,fixedWeekCount:l.fixedWeekCount}),u=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:i,options:l,dateProfileGenerator:c,viewApi:u}}processRawViewOptions(e,n,r,s,i){let l=da([Os,e.optionDefaults,r,s,e.optionOverrides,i]),o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Tf),Df),Rf),uE),n.listenerRefiners),n.optionRefiners),c={},u=this.currentViewOptionsInput,d=this.currentViewOptionsRefined,h=!1,f={};for(let p in l)l[p]===u[p]||On[p]&&On[p](l[p],u[p])?c[p]=d[p]:(l[p]===this.currentCalendarOptionsInput[p]||On[p]&&On[p](l[p],this.currentCalendarOptionsInput[p])?p in this.currentCalendarOptionsRefined&&(c[p]=this.currentCalendarOptionsRefined[p]):o[p]?c[p]=o[p](l[p]):f[p]=l[p],h=!0);return h&&(this.currentViewOptionsInput=l,this.currentViewOptionsRefined=c),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:f}}}function jj(t,e,n,r,s,i,l,o){let c=vy(e||l.defaultCode,l.map);return new bE({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:i.namedTimeZonedImpl,locale:c,weekNumberCalculation:n,firstDay:r,weekText:s,cmdFormatter:i.cmdFormatter,defaultSeparator:o})}function Nj(t,e){let n=e.themeClasses[t.themeSystem]||Nn;return new n(t)}function Aj(t){let e=t.dateProfileGeneratorClass||Av;return new e(t)}function Tj(t,e,n){return new lj(t,e,n)}function Dj(t){return qt(t,e=>e.ui)}function Rj(t,e,n){let r={"":e};for(let s in t){let i=t[s];i.sourceId&&n[i.sourceId]&&(r[s]=n[i.sourceId])}return r}function Ij(t){let{options:e}=t;return{eventUiSingleBase:Wl({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:Wl({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function wa(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function Oj(t){return tk(t.options.businessHours,t)}function Qf(t,e){for(let n in t)console.warn(`Unknown option '${n}'`)}class Pj extends ee{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return S("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:r}=this.context,s=[],i=!0;for(let l of e){let{buttonName:o,buttonClick:c,buttonText:u,buttonIcon:d,buttonHint:h}=l;if(o==="title")i=!1,s.push(S("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let f=o===n.activeButton,p=!n.isTodayEnabled&&o==="today"||!n.isPrevEnabled&&o==="prev"||!n.isNextEnabled&&o==="next",y=[`fc-${o}-button`,r.getClass("button")];f&&y.push(r.getClass("buttonActive")),s.push(S("button",{type:"button",title:typeof h=="function"?h(n.navUnit):h,disabled:p,"aria-pressed":f,className:y.join(" "),onClick:c},u||(d?S("span",{className:d,role:"img"}):"")))}}if(s.length>1){let l=i&&r.getClass("buttonGroup")||"";return S("div",{className:l},...s)}return s[0]}}class Yf extends ee{render(){let{model:e,extraClassName:n}=this.props,r=!1,s,i,l=e.sectionWidgets,o=l.center;return l.left?(r=!0,s=l.left):s=l.start,l.right?(r=!0,i=l.right):i=l.end,S("div",{className:[n||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",s||[]),this.renderSection("center",o||[]),this.renderSection("end",i||[]))}renderSection(e,n){let{props:r}=this;return S(Pj,{key:e,widgetGroups:n,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class Mj extends ee{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,At(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:r}=e,s=["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],i="",l="";return r?n.availableWidth!==null?i=n.availableWidth/r:l=`${1/r*100}%`:i=e.height||"",S("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:s.join(" "),style:{height:i,paddingBottom:l}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class Lj extends rs{constructor(e){super(e),this.handleSegClick=(n,r)=>{let{component:s}=this,{context:i}=s,l=Yr(r);if(l&&s.isValidSegDownEl(n.target)){let o=Re(n.target,".fc-event-forced-url"),c=o?o.querySelector("a[href]").href:"";i.emitter.trigger("eventClick",{el:r,event:new ue(s.context,l.eventRange.def,l.eventRange.instance),jsEvent:n,view:i.viewApi}),c&&!n.defaultPrevented&&(window.location.href=c)}},this.destroy=mv(e.el,"click",".fc-event",this.handleSegClick)}}class Bj extends rs{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,r)=>{Yr(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",n,r))},this.handleSegLeave=(n,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,r))},this.removeHoverListeners=m_(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,r){let{component:s}=this,{context:i}=s,l=Yr(r);(!n||s.isValidSegDownEl(n.target))&&i.emitter.trigger(e,{el:r,event:new ue(i,l.eventRange.def,l.eventRange.instance),jsEvent:n,view:i.viewApi})}}class $j extends lr{constructor(){super(...arguments),this.buildViewContext=z(EE),this.buildViewPropTransformers=z(Uj),this.buildToolbarProps=z(Fj),this.headerRef=Le(),this.footerRef=Le(),this.interactionsStore={},this.state={viewLabelId:xo()},this.registerInteractiveComponent=(e,n)=>{let r=_k(e,n),l=[Lj,Bj].concat(this.props.pluginHooks.componentInteractions).map(o=>new o(r));this.interactionsStore[e.uid]=l,Oc[e.uid]=r},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let r of n)r.destroy();delete this.interactionsStore[e.uid]}delete Oc[e.uid]},this.resizeRunner=new Wu(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:r}=e,s=!1,i="",l;e.isHeightAuto||e.forPrint?i="":r.height!=null?s=!0:r.contentHeight!=null?i=r.contentHeight:l=Math.max(r.aspectRatio,.5);let o=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return S(Qt.Provider,{value:o},S(ss,{unit:"day"},u=>{let d=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,u,e.viewTitle);return S(ie,null,n.header&&S(Yf,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:c},d)),S(Mj,{liquid:s,height:i,aspectRatio:l,labeledById:c},this.renderView(e),this.buildAppendContent()),n.footer&&S(Yf,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},d)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let r in n)n[r](e[r],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:r}=n.pluginHooks;for(let s in r)n[s]!==e[s]&&r[s](n[s],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(r=>r(e));return S(ie,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:r}=e,s={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},i=this.buildViewPropTransformers(n.viewPropsTransformers);for(let o of i)Object.assign(s,o.transform(s,e));let l=r.component;return S(l,Object.assign({},s))}}function Fj(t,e,n,r,s,i){let l=n.build(s,void 0,!1),o=n.buildPrev(e,r,!1),c=n.buildNext(e,r,!1);return{title:i,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:l.isValid&&!Ut(e.currentRange,s),isPrevEnabled:o.isValid,isNextEnabled:c.isValid}}function Uj(t){return t.map(e=>new e)}class Hj extends kk{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;Hl(()=>{ei(S(Sk,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(s,i,l,o)=>(this.setClassNames(s),this.setHeight(i),S(kv.Provider,{value:this.customContentRenderId},S($j,Object.assign({isHeightAuto:l,forPrint:o},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,ei(null,this.el),this.setClassNames([]),this.setHeight(""))},o_(e),this.el=e,this.renderRunner=new Wu(this.handleRenderRequest),new Cj({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Hl(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!Sn(e,this.currentClassNames)){let{classList:n}=this.el;for(let r of this.currentClassNames)n.remove(r);for(let r of e)n.add(r);this.currentClassNames=e}}setHeight(e){pv(this.el,"height",e)}}const zj=parseInt(String(ll.version).split(".")[0]),Vj=zj<18;class Ey extends P.Component{constructor(){super(...arguments),this.elRef=P.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(ll.createElement(Wj,{key:n.id,customRendering:n}));return ll.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new CC;this.handleCustomRendering=e.handle.bind(e),this.calendar=new Hj(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Dl.flushSync(()=>{})});let n;e.subscribe(r=>{const s=Date.now(),i=!n;(Vj||i||this.isUpdating||this.isUnmounting||s-n<100?ky:Dl.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{n=s,i?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}Ey.act=ky;class Wj extends P.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,r=typeof n=="function"?n(e.renderProps):n;return Dl.createPortal(r,e.containerEl)}}function ky(t){t()}class qj extends Tt{constructor(){super(...arguments),this.headerElRef=Le()}renderSimpleLayout(e,n){let{props:r,context:s}=this,i=[],l=Ql(s.options);return e&&i.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),i.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),S(zl,{elClasses:["fc-daygrid"],viewSpec:s.viewSpec},S(gd,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:i}))}renderHScrollLayout(e,n,r,s){let i=this.context.pluginHooks.scrollGridImpl;if(!i)throw new Error("No ScrollGrid implementation");let{props:l,context:o}=this,c=!l.forPrint&&Ql(o.options),u=!l.forPrint&&cy(o.options),d=[];return e&&d.push({type:"header",key:"header",isSticky:c,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),u&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:Lc}]}),S(zl,{elClasses:["fc-daygrid"],viewSpec:o.viewSpec},S(i,{liquid:!l.isHeightAuto&&!l.forPrint,forPrint:l.forPrint,collapsibleWidth:l.forPrint,colGroups:[{cols:[{span:r,minWidth:s}]}],sections:d}))}}function il(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.row].push(r);return n}function Ui(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.firstCol].push(r);return n}function Kf(t,e){let n=[];if(t){for(let r=0;r<e;r+=1)n[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let r of t.segs)n[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)n[r]=null;return n}const Cy=fe({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function jy(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class Ny extends ee{render(){let{props:e}=this;return S(vd,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:Cy,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class Ay extends ee{render(){let{props:e,context:n}=this,{options:r}=n,{seg:s}=e,i=r.eventTimeFormat||Cy,l=Hv(s,i,n,!0,e.defaultDisplayEventEnd);return S(md,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Vv(e.seg,n),defaultGenerator:Gj,timeText:l,isResizing:!1,isDateSelecting:!1}))}}function Gj(t){return S(ie,null,S("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&S("div",{className:"fc-event-time"},t.timeText),S("div",{className:"fc-event-title"},t.event.title||S(ie,null,"")))}class Qj extends ee{constructor(){super(...arguments),this.compileSegs=z(Yj)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return S(fy,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let s=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return S(ie,null,n.map(i=>{let l=i.eventRange.instance.instanceId;return S("div",{className:"fc-daygrid-event-harness",key:l,style:{visibility:s[l]?"hidden":""}},jy(i)?S(Ay,Object.assign({seg:i,isDragging:!1,isSelected:l===e.eventSelection,defaultDisplayEventEnd:!1},xn(i,e.todayRange))):S(Ny,Object.assign({seg:i,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:l===e.eventSelection,defaultDisplayEventEnd:!1},xn(i,e.todayRange))))}))}})}}function Yj(t){let e=[],n=[];for(let r of t)e.push(r.seg),r.isVisible||n.push(r.seg);return{allSegs:e,invisibleSegs:n}}const Kj=fe({week:"narrow"});class Zj extends Tt{constructor(){super(...arguments),this.rootElRef=Le(),this.state={dayNumberId:xo()},this.handleRootEl=e=>{At(this.rootElRef,e),At(this.props.elRef,e)}}render(){let{context:e,props:n,state:r,rootElRef:s}=this,{options:i,dateEnv:l}=e,{date:o,dateProfile:c}=n;const u=n.showDayNumber&&Xj(o,c.currentRange,l);return S(xd,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:Jj,date:o,dateProfile:c,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:u,extraRenderProps:n.extraRenderProps},(d,h)=>S("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&S(hy,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Gl(e,o,"week"),date:o,defaultFormat:Kj}),!h.isDisabled&&(n.showDayNumber||wd(i)||n.forceDayTop)?S("div",{className:"fc-daygrid-day-top"},S(d,{elTag:"a",elClasses:["fc-daygrid-day-number",u&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Gl(e,o)),{id:r.dayNumberId})})):n.showDayNumber?S("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},S("a",{className:"fc-daygrid-day-number"},"")):void 0,S("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,S("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},S(Qj,{allDayDate:o,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:s,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),S("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}}function Jj(t){return t.dayNumberText||S(ie,null,"")}function Xj(t,e,n){const{start:r,end:s}=e,i=_n(s,-1),l=n.getYear(r),o=n.getMonth(r),c=n.getYear(i),u=n.getMonth(i);return!(l===c&&o===u)&&(t.valueOf()===r.valueOf()||n.getDay(t)===1&&t.valueOf()<s.valueOf())}function Ty(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function Dy(t){return Ty(t)+":"+t.lastCol}function eN(t,e,n,r,s,i,l){let o=new rN(g=>{let m=t[g.index].eventRange.instance.instanceId+":"+g.span.start+":"+(g.span.end-1);return s[m]||1});o.allowReslicing=!0,o.strictOrder=r,e===!0||n===!0?(o.maxCoord=i,o.hiddenConsumes=!0):typeof e=="number"?o.maxStackCnt=e:typeof n=="number"&&(o.maxStackCnt=n,o.hiddenConsumes=!0);let c=[],u=[];for(let g=0;g<t.length;g+=1){let m=t[g],v=Dy(m);s[v]!=null?c.push({index:g,span:{start:m.firstCol,end:m.lastCol+1}}):u.push(m)}let d=o.addSegs(c),h=o.toRects(),{singleColPlacements:f,multiColPlacements:p,leftoverMargins:y}=tN(h,t,l),x=[],b=[];for(let g of u){p[g.firstCol].push({seg:g,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let m=g.firstCol;m<=g.lastCol;m+=1)f[m].push({seg:Br(g,m,m+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let g=0;g<l.length;g+=1)x.push(0);for(let g of d){let m=t[g.index],v=g.span;p[v.start].push({seg:Br(m,v.start,v.end,l),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let w=v.start;w<v.end;w+=1)x[w]+=1,f[w].push({seg:Br(m,w,w+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let g=0;g<l.length;g+=1)b.push(y[g]);return{singleColPlacements:f,multiColPlacements:p,moreCnts:x,moreMarginTops:b}}function tN(t,e,n){let r=nN(t,n.length),s=[],i=[],l=[];for(let o=0;o<n.length;o+=1){let c=r[o],u=[],d=0,h=0;for(let p of c){let y=e[p.index];u.push({seg:Br(y,o,o+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:p.levelCoord,marginTop:p.levelCoord-d}),d=p.levelCoord+p.thickness}let f=[];d=0,h=0;for(let p of c){let y=e[p.index],x=p.span.end-p.span.start>1,b=p.span.start===o;h+=p.levelCoord-d,d=p.levelCoord+p.thickness,x?(h+=p.thickness,b&&f.push({seg:Br(y,p.span.start,p.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:p.levelCoord,marginTop:0})):b&&(f.push({seg:Br(y,p.span.start,p.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:p.levelCoord,marginTop:h}),h=0)}s.push(u),i.push(f),l.push(h)}return{singleColPlacements:s,multiColPlacements:i,leftoverMargins:l}}function nN(t,e){let n=[];for(let r=0;r<e;r+=1)n.push([]);for(let r of t)for(let s=r.span.start;s<r.span.end;s+=1)n[s].push(r);return n}function Br(t,e,n,r){if(t.firstCol===e&&t.lastCol===n-1)return t;let s=t.eventRange,i=s.range,l=Xn(i,{start:r[e].date,end:ke(r[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:s.def,ui:Object.assign(Object.assign({},s.ui),{durationEditable:!1}),instance:s.instance,range:l},isStart:t.isStart&&l.start.valueOf()===i.start.valueOf(),isEnd:t.isEnd&&l.end.valueOf()===i.end.valueOf()})}class rN extends Jv{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:r}=this,s=i=>!this.forceHidden[Wn(i)];for(let i=0;i<r.length;i+=1)r[i]=r[i].filter(s);return n}handleInvalidInsertion(e,n,r){const{entriesByLevel:s,forceHidden:i}=this,{touchingEntry:l,touchingLevel:o,touchingLateral:c}=e;if(this.hiddenConsumes&&l){const u=Wn(l);if(!i[u])if(this.allowReslicing){const d=Object.assign(Object.assign({},l),{span:fd(l.span,n.span)}),h=Wn(d);i[h]=!0,s[o][c]=d,r.push(d),this.splitEntry(l,n,r)}else i[u]=!0,r.push(l)}super.handleInvalidInsertion(e,n,r)}}class Ry extends Tt{constructor(){super(...arguments),this.cellElRefs=new $t,this.frameElRefs=new $t,this.fgElRefs=new $t,this.segHarnessRefs=new $t,this.rootElRef=Le(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:r}=this,{options:s}=r,i=e.cells.length,l=Ui(e.businessHourSegs,i),o=Ui(e.bgEventSegs,i),c=Ui(this.getHighlightSegs(),i),u=Ui(this.getMirrorSegs(),i),{singleColPlacements:d,multiColPlacements:h,moreCnts:f,moreMarginTops:p}=eN(Uv(e.fgEventSegs,s.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,s.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),y=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return S("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((x,b)=>{let g=this.renderFgSegs(b,e.forPrint?d[b]:h[b],e.todayRange,y),m=this.renderFgSegs(b,sN(u[b],h),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return S(Zj,{key:x.key,elRef:this.cellElRefs.createRef(x.key),innerElRef:this.frameElRefs.createRef(x.key),dateProfile:e.dateProfile,date:x.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&b===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:x.extraRenderProps,extraDataAttrs:x.extraDataAttrs,extraClassNames:x.extraClassNames,extraDateSpan:x.extraDateSpan,moreCnt:f[b],moreMarginTop:p[b],singlePlacements:d[b],fgContentElRef:this.fgElRefs.createRef(x.key),fgContent:S(ie,null,S(ie,null,g),S(ie,null,m)),bgContent:S(ie,null,this.renderFillSegs(c[b],"highlight"),this.renderFillSegs(l[b],"non-business"),this.renderFillSegs(o[b],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let r=this.props;this.updateSizing(!wt(e,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,r,s,i,l,o){let{context:c}=this,{eventSelection:u}=this.props,{framePositions:d}=this.state,h=this.props.cells.length===1,f=i||l||o,p=[];if(d)for(let y of n){let{seg:x}=y,{instanceId:b}=x.eventRange.instance,g=y.isVisible&&!s[b],m=y.isAbsolute,v="",w="";m&&(c.isRtl?(w=0,v=d.lefts[x.lastCol]-d.lefts[x.firstCol]):(v=0,w=d.rights[x.firstCol]-d.rights[x.lastCol])),p.push(S("div",{className:"fc-daygrid-event-harness"+(m?" fc-daygrid-event-harness-abs":""),key:Ty(x),ref:f?null:this.segHarnessRefs.createRef(Dy(x)),style:{visibility:g?"":"hidden",marginTop:m?"":y.marginTop,top:m?y.absoluteTop:"",left:v,right:w}},jy(x)?S(Ay,Object.assign({seg:x,isDragging:i,isSelected:b===u,defaultDisplayEventEnd:h},xn(x,r))):S(Ny,Object.assign({seg:x,isDragging:i,isResizing:l,isDateSelecting:o,isSelected:b===u,defaultDisplayEventEnd:h},xn(x,r)))))}return p}renderFillSegs(e,n){let{isRtl:r}=this.context,{todayRange:s}=this.props,{framePositions:i}=this.state,l=[];if(i)for(let o of e){let c=r?{right:0,left:i.lefts[o.lastCol]-i.lefts[o.firstCol]}:{left:0,right:i.rights[o.firstCol]-i.rights[o.lastCol]};l.push(S("div",{key:zv(o.eventRange),className:"fc-daygrid-bg-harness",style:c},n==="bg-event"?S(uy,Object.assign({seg:o},xn(o,s))):dy(n)))}return S(ie,{},...l)}updateSizing(e){let{props:n,state:r,frameElRefs:s}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let c=n.cells.map(u=>s.currentMap[u.key]);if(c.length){let u=this.rootElRef.current,d=new Kr(u,c,!0,!1);(!r.framePositions||!r.framePositions.similarTo(d))&&this.setState({framePositions:new Kr(u,c,!0,!1)})}}const i=this.state.segHeights,l=this.querySegHeights(),o=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},i),l),maxContentHeight:o?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let r in e){let s=Math.round(e[r].getBoundingClientRect().height);n[r]=Math.max(n[r]||0,s)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],r=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}}Ry.addStateEquality({segHeights:wt});function sN(t,e){if(!t.length)return[];let n=iN(e);return t.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:n[r.eventRange.instance.instanceId],marginTop:0}))}function iN(t){let e={};for(let n of t)for(let r of n)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}class lN extends Tt{constructor(){super(...arguments),this.splitBusinessHourSegs=z(il),this.splitBgEventSegs=z(oN),this.splitFgEventSegs=z(il),this.splitDateSelectionSegs=z(il),this.splitEventDrag=z(Kf),this.splitEventResize=z(Kf),this.rowRefs=new $t}render(){let{props:e,context:n}=this,r=e.cells.length,s=this.splitBusinessHourSegs(e.businessHourSegs,r),i=this.splitBgEventSegs(e.bgEventSegs,r),l=this.splitFgEventSegs(e.fgEventSegs,r),o=this.splitDateSelectionSegs(e.dateSelectionSegs,r),c=this.splitEventDrag(e.eventDrag,r),u=this.splitEventResize(e.eventResize,r),d=r>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return S(ss,{unit:"day"},(h,f)=>S(ie,null,e.cells.map((p,y)=>S(Ry,{ref:this.rowRefs.createRef(y),key:p.length?p[0].date.toISOString():y,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:f,dateProfile:e.dateProfile,cells:p,renderIntro:e.renderRowIntro,businessHourSegs:s[y],eventSelection:e.eventSelection,bgEventSegs:i[y],fgEventSegs:l[y],dateSelectionSegs:o[y],eventDrag:c[y],eventResize:u[y],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:d,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new Kr(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new Kr(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:r,rowPositions:s}=this,i=r.leftToIndex(e),l=s.topToIndex(n);if(l!=null&&i!=null){let o=this.props.cells[l][i];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(l,i),allDay:!0},o.extraDateSpan),dayEl:this.getCellEl(l,i),rect:{left:r.lefts[i],right:r.rights[i],top:s.tops[l],bottom:s.bottoms[l]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let r=this.props.cells[e][n].date,s=ke(r,1);return{start:r,end:s}}}function oN(t,e){return il(t.filter(aN),e)}function aN(t){return t.eventRange.def.allDay}class cN extends Tt{constructor(){super(...arguments),this.elRef=Le(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:r,expandRows:s}=e,i=r===!0||n===!0;i&&!s&&(i=!1,n=null,r=null);let l=["fc-daygrid-body",i?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",s?"":"fc-daygrid-body-natural"];return S("div",{ref:this.elRef,className:l.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},S("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:s?e.clientHeight:""}},e.colGroupNode,S("tbody",{role:"presentation"},S(lN,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=uN(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),r=n.closest(".fc-scroller"),s=e.getBoundingClientRect().top-n.getBoundingClientRect().top;r.scrollTop=s?s+1:0}this.needsScrollReset=!1}}}function uN(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${G_(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${Ku(e.currentDate)}"]`)),n}class dN extends sy{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class Iy extends Tt{constructor(){super(...arguments),this.slicer=new dN,this.tableRef=Le()}render(){let{props:e,context:n}=this;return S(cN,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class hN extends qj{constructor(){super(...arguments),this.buildDayTableModel=z(fN),this.headerRef=Le(),this.tableRef=Le()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:r}=this,s=this.buildDayTableModel(r.dateProfile,n),i=e.dayHeaders&&S(ty,{ref:this.headerRef,dateProfile:r.dateProfile,dates:s.headerDates,datesRepDistinctDays:s.rowCnt===1}),l=o=>S(Iy,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:s,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:o.tableColGroupNode,tableMinWidth:o.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:o.clientWidth,clientHeight:o.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(i,l,s.colCnt,e.dayMinWidth):this.renderSimpleLayout(i,l)}}function fN(t,e){let n=new ny(t.renderRange,e);return new ry(n,/year|month|week/.test(t.currentRangeUnit))}class pN extends Av{buildRenderRange(e,n,r){let s=super.buildRenderRange(e,n,r),{props:i}=this;return gN({currentRange:s,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:i.fixedWeekCount,dateEnv:i.dateEnv})}}function gN(t){let{dateEnv:e,currentRange:n}=t,{start:r,end:s}=n,i;if(t.snapToWeek&&(r=e.startOfWeek(r),i=e.startOfWeek(s),i.valueOf()!==s.valueOf()&&(s=kf(i,1))),t.fixedWeekCount){let l=e.startOfWeek(e.startOfMonth(ke(n.end,-1))),o=Math.ceil(M_(l,s));s=kf(s,6-o)}return{start:r,end:s}}var mN=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';Vu(mN);var vN=Yt({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:hN,dateProfileGeneratorClass:pN},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class yN extends Tk{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?lk(e)?["timed","allDay"]:["allDay"]:["timed"]}}const xN=fe({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function Oy(t){let e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return S(Qt.Consumer,null,n=>{if(!t.isLabeled)return S("td",{className:e.join(" "),"data-time":t.isoTimeStr});let{dateEnv:r,options:s,viewApi:i}=n,l=s.slotLabelFormat==null?xN:Array.isArray(s.slotLabelFormat)?fe(s.slotLabelFormat[0]):fe(s.slotLabelFormat),o={level:0,time:t.time,date:r.toDate(t.date),view:i,text:r.format(t.date,l)};return S(tt,{elTag:"td",elClasses:e,elAttrs:{"data-time":t.isoTimeStr},renderProps:o,generatorName:"slotLabelContent",customGenerator:s.slotLabelContent,defaultGenerator:wN,classNameGenerator:s.slotLabelClassNames,didMount:s.slotLabelDidMount,willUnmount:s.slotLabelWillUnmount},c=>S("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},S(c,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function wN(t){return t.text}class bN extends ee{render(){return this.props.slatMetas.map(e=>S("tr",{key:e.key},S(Oy,Object.assign({},e))))}}const SN=fe({week:"short"}),_N=5;class EN extends Tt{constructor(){super(...arguments),this.allDaySplitter=new yN,this.headerElRef=Le(),this.rootElRef=Le(),this.scrollerElRef=Le(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let n=this.scrollerElRef.current;n&&(n.scrollTop=e)},this.renderHeadAxis=(e,n="")=>{let{options:r}=this.context,{dateProfile:s}=this.props,i=s.renderRange,o=ir(i.start,i.end)===1?Gl(this.context,i.start,"week"):{};return r.weekNumbers&&e==="day"?S(hy,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:i.start,defaultFormat:SN},c=>S("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:n}},S(c,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:o}))):S("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},S("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},this.renderTableRowAxis=e=>{let{options:n,viewApi:r}=this.context,s={text:n.allDayText,view:r};return S(tt,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:s,generatorName:"allDayContent",customGenerator:n.allDayContent,defaultGenerator:kN,classNameGenerator:n.allDayClassNames,didMount:n.allDayDidMount,willUnmount:n.allDayWillUnmount},i=>S("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},S(i,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,n,r){let{context:s,props:i}=this,l=[],o=Ql(s.options);return e&&l.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),n&&(l.push({type:"body",key:"all-day",chunk:{content:n}}),l.push({type:"body",key:"all-day-divider",outerContent:S("tr",{role:"presentation",className:"fc-scrollgrid-section"},S("td",{className:"fc-timegrid-divider "+s.theme.getClass("tableCellShaded")}))})),l.push({type:"body",key:"body",liquid:!0,expandRows:!!s.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:r}}),S(zl,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:s.viewSpec},S(gd,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[{width:"shrink"}],sections:l}))}renderHScrollLayout(e,n,r,s,i,l,o){let c=this.context.pluginHooks.scrollGridImpl;if(!c)throw new Error("No ScrollGrid implementation");let{context:u,props:d}=this,h=!d.forPrint&&Ql(u.options),f=!d.forPrint&&cy(u.options),p=[];e&&p.push({type:"header",key:"header",isSticky:h,syncRowHeights:!0,chunks:[{key:"axis",rowContent:x=>S("tr",{role:"presentation"},this.renderHeadAxis("day",x.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),n&&(p.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:x=>S("tr",{role:"presentation"},this.renderTableRowAxis(x.rowSyncHeights[0]))},{key:"cols",content:n}]}),p.push({key:"all-day-divider",type:"body",outerContent:S("tr",{role:"presentation",className:"fc-scrollgrid-section"},S("td",{colSpan:2,className:"fc-timegrid-divider "+u.theme.getClass("tableCellShaded")}))}));let y=u.options.nowIndicator;return p.push({type:"body",key:"body",liquid:!0,expandRows:!!u.options.expandRows,chunks:[{key:"axis",content:x=>S("div",{className:"fc-timegrid-axis-chunk"},S("table",{"aria-hidden":!0,style:{height:x.expandRows?x.clientHeight:""}},x.tableColGroupNode,S("tbody",null,S(bN,{slatMetas:l}))),S("div",{className:"fc-timegrid-now-indicator-container"},S(ss,{unit:y?"minute":"day"},b=>{let g=y&&o&&o.safeComputeTop(b);return typeof g=="number"?S(yd,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:g},isAxis:!0,date:b}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:r}]}),f&&p.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:Lc},{key:"cols",content:Lc}]}),S(zl,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:u.viewSpec},S(c,{liquid:!d.isHeightAuto&&!d.forPrint,forPrint:d.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:s,minWidth:i}]}],sections:p}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:n}=this.context.options;return(e===!0||n===!0)&&(e=void 0,n=_N),{dayMaxEvents:e,dayMaxEventRows:n}}}function kN(t){return t.text}class CN{constructor(e,n,r){this.positions=e,this.dateProfile=n,this.slotDuration=r}safeComputeTop(e){let{dateProfile:n}=this;if(Ut(n.currentRange,e)){let r=le(e),s=e.valueOf()-r.valueOf();if(s>=mt(n.slotMinTime)&&s<mt(n.slotMaxTime))return this.computeTimeTop(K(s))}return null}computeDateTop(e,n){return n||(n=le(e)),this.computeTimeTop(K(e.valueOf()-n.valueOf()))}computeTimeTop(e){let{positions:n,dateProfile:r}=this,s=n.els.length,i=(e.milliseconds-mt(r.slotMinTime))/mt(this.slotDuration),l,o;return i=Math.max(0,i),i=Math.min(s,i),l=Math.floor(i),l=Math.min(l,s-1),o=i-l,n.tops[l]+n.getHeight(l)*o}}class jN extends ee{render(){let{props:e,context:n}=this,{options:r}=n,{slatElRefs:s}=e;return S("tbody",null,e.slatMetas.map((i,l)=>{let o={time:i.time,date:n.dateEnv.toDate(i.date),view:n.viewApi};return S("tr",{key:i.key,ref:s.createRef(i.key)},e.axis&&S(Oy,Object.assign({},i)),S(tt,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!i.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":i.isoTimeStr},renderProps:o,generatorName:"slotLaneContent",customGenerator:r.slotLaneContent,classNameGenerator:r.slotLaneClassNames,didMount:r.slotLaneDidMount,willUnmount:r.slotLaneWillUnmount}))}))}}class NN extends ee{constructor(){super(...arguments),this.rootElRef=Le(),this.slatElRefs=new $t}render(){let{props:e,context:n}=this;return S("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},S("table",{"aria-hidden":!0,className:n.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,S(jN,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:n}=this;n.onCoords&&n.clientWidth!==null&&this.rootElRef.current.offsetHeight&&n.onCoords(new CN(new Kr(this.rootElRef.current,AN(this.slatElRefs.currentMap,n.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function AN(t,e){return e.map(n=>t[n.key])}function ps(t,e){let n=[],r;for(r=0;r<e;r+=1)n.push([]);if(t)for(r=0;r<t.length;r+=1)n[t[r].col].push(t[r]);return n}function Zf(t,e){let n=[];if(t){for(let r=0;r<e;r+=1)n[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let r of t.segs)n[r.col].segs.push(r)}else for(let r=0;r<e;r+=1)n[r]=null;return n}class TN extends ee{render(){let{props:e}=this;return S(fy,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>My(e.hiddenSegs,e),defaultGenerator:DN,forceTimed:!0},n=>S(n,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function DN(t){return t.shortText}function RN(t,e,n){let r=new Jv;e!=null&&(r.strictOrder=e),n!=null&&(r.maxStackCnt=n);let s=r.addSegs(t),i=zk(s),l=IN(r);return l=LN(l,1),{segRects:BN(l),hiddenGroups:i}}function IN(t){const{entriesByLevel:e}=t,n=Sd((r,s)=>r+":"+s,(r,s)=>{let i=MN(t,r,s),l=Jf(i,n),o=e[r][s];return[Object.assign(Object.assign({},o),{nextLevelNodes:l[0]}),o.thickness+l[1]]});return Jf(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,n)[0]}function Jf(t,e){if(!t)return[[],0];let{level:n,lateralStart:r,lateralEnd:s}=t,i=r,l=[];for(;i<s;)l.push(e(n,i)),i+=1;return l.sort(ON),[l.map(PN),l[0][1]]}function ON(t,e){return e[1]-t[1]}function PN(t){return t[0]}function MN(t,e,n){let{levelCoords:r,entriesByLevel:s}=t,i=s[e][n],l=r[e]+i.thickness,o=r.length,c=e;for(;c<o&&r[c]<l;c+=1);for(;c<o;c+=1){let u=s[c],d,h=Mc(u,i.span.start,Pc),f=h[0]+h[1],p=f;for(;(d=u[p])&&d.span.start<i.span.end;)p+=1;if(f<p)return{level:c,lateralStart:f,lateralEnd:p}}return null}function LN(t,e){const n=Sd((r,s,i)=>Wn(r),(r,s,i)=>{let{nextLevelNodes:l,thickness:o}=r,c=o+i,u=o/c,d,h=[];if(!l.length)d=e;else for(let p of l)if(d===void 0){let y=n(p,s,c);d=y[0],h.push(y[1])}else{let y=n(p,d,0);h.push(y[1])}let f=(d-s)*u;return[d-f,Object.assign(Object.assign({},r),{thickness:f,nextLevelNodes:h})]});return t.map(r=>n(r,0,0)[1])}function BN(t){let e=[];const n=Sd((s,i,l)=>Wn(s),(s,i,l)=>{let o=Object.assign(Object.assign({},s),{levelCoord:i,stackDepth:l,stackForward:0});return e.push(o),o.stackForward=r(s.nextLevelNodes,i+s.thickness,l+1)+1});function r(s,i,l){let o=0;for(let c of s)o=Math.max(n(c,i,l),o);return o}return r(t,0,0),e}function Sd(t,e){const n={};return(...r)=>{let s=t(...r);return s in n?n[s]:n[s]=e(...r)}}function Xf(t,e,n=null,r=0){let s=[];if(n)for(let i=0;i<t.length;i+=1){let l=t[i],o=n.computeDateTop(l.start,e),c=Math.max(o+(r||0),n.computeDateTop(l.end,e));s.push({start:Math.round(o),end:Math.round(c)})}return s}function $N(t,e,n,r){let s=[],i=[];for(let u=0;u<t.length;u+=1){let d=e[u];d?s.push({index:u,thickness:1,span:d}):i.push(t[u])}let{segRects:l,hiddenGroups:o}=RN(s,n,r),c=[];for(let u of l)c.push({seg:t[u.index],rect:u});for(let u of i)c.push({seg:u,rect:null});return{segPlacements:c,hiddenGroups:o}}const FN=fe({hour:"numeric",minute:"2-digit",meridiem:!1});class Py extends ee{render(){return S(vd,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:FN}))}}class UN extends ee{constructor(){super(...arguments),this.sortEventSegs=z(Uv)}render(){let{props:e,context:n}=this,{options:r}=n,s=r.selectMirror,i=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||s&&e.dateSelectionSegs||[],l=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},o=this.sortEventSegs(e.fgEventSegs,r.eventOrder);return S(xd,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},c=>S("div",{className:"fc-timegrid-col-frame"},S("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),S("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(o,l,!1,!1,!1)),S("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(i,{},!!e.eventDrag,!!e.eventResize,!!s,"mirror")),S("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),wd(r)&&S(c,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,n,r,s,i,l){let{props:o}=this;return o.forPrint?My(e,o):this.renderPositionedFgSegs(e,n,r,s,i,l)}renderPositionedFgSegs(e,n,r,s,i,l){let{eventMaxStack:o,eventShortHeight:c,eventOrderStrict:u,eventMinHeight:d}=this.context.options,{date:h,slatCoords:f,eventSelection:p,todayRange:y,nowDate:x}=this.props,b=r||s||i,g=Xf(e,h,f,d),{segPlacements:m,hiddenGroups:v}=$N(e,g,u,o);return S(ie,null,this.renderHiddenGroups(v,e),m.map(w=>{let{seg:T,rect:N}=w,k=T.eventRange.instance.instanceId,D=b||!!(!n[k]&&N),H=ba(N&&N.span),C=!b&&N?this.computeSegHStyle(N):{left:0,right:0},B=!!N&&N.stackForward>0,R=!!N&&N.span.end-N.span.start<c;return S("div",{className:"fc-timegrid-event-harness"+(B?" fc-timegrid-event-harness-inset":""),key:l||k,style:Object.assign(Object.assign({visibility:D?"":"hidden"},H),C)},S(Py,Object.assign({seg:T,isDragging:r,isResizing:s,isDateSelecting:i,isSelected:k===p,isShort:R},xn(T,y,x))))}))}renderHiddenGroups(e,n){let{extraDateSpan:r,dateProfile:s,todayRange:i,nowDate:l,eventSelection:o,eventDrag:c,eventResize:u}=this.props;return S(ie,null,e.map(d=>{let h=ba(d.span),f=HN(d.entries,n);return S(TN,{key:wv(py(f)),hiddenSegs:f,top:h.top,bottom:h.bottom,extraDateSpan:r,dateProfile:s,todayRange:i,nowDate:l,eventSelection:o,eventDrag:c,eventResize:u})}))}renderFillSegs(e,n){let{props:r,context:s}=this,l=Xf(e,r.date,r.slatCoords,s.options.eventMinHeight).map((o,c)=>{let u=e[c];return S("div",{key:zv(u.eventRange),className:"fc-timegrid-bg-harness",style:ba(o)},n==="bg-event"?S(uy,Object.assign({seg:u},xn(u,r.todayRange,r.nowDate))):dy(n))});return S(ie,null,l)}renderNowIndicator(e){let{slatCoords:n,date:r}=this.props;return n?e.map((s,i)=>S(yd,{key:i,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:n.computeDateTop(s.start,r)},isAxis:!1,date:r})):null}computeSegHStyle(e){let{isRtl:n,options:r}=this.context,s=r.slotEventOverlap,i=e.levelCoord,l=e.levelCoord+e.thickness,o,c;s&&(l=Math.min(1,i+(l-i)*2)),n?(o=1-l,c=i):(o=i,c=1-l);let u={zIndex:e.stackDepth+1,left:o*100+"%",right:c*100+"%"};return s&&!e.stackForward&&(u[n?"marginLeft":"marginRight"]=10*2),u}}function My(t,{todayRange:e,nowDate:n,eventSelection:r,eventDrag:s,eventResize:i}){let l=(s?s.affectedInstances:null)||(i?i.affectedInstances:null)||{};return S(ie,null,t.map(o=>{let c=o.eventRange.instance.instanceId;return S("div",{key:c,style:{visibility:l[c]?"hidden":""}},S(Py,Object.assign({seg:o,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:c===r,isShort:!1},xn(o,e,n))))}))}function ba(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function HN(t,e){return t.map(n=>e[n.index])}class zN extends ee{constructor(){super(...arguments),this.splitFgEventSegs=z(ps),this.splitBgEventSegs=z(ps),this.splitBusinessHourSegs=z(ps),this.splitNowIndicatorSegs=z(ps),this.splitDateSelectionSegs=z(ps),this.splitEventDrag=z(Zf),this.splitEventResize=z(Zf),this.rootElRef=Le(),this.cellElRefs=new $t}render(){let{props:e,context:n}=this,r=n.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),s=e.cells.length,i=this.splitFgEventSegs(e.fgEventSegs,s),l=this.splitBgEventSegs(e.bgEventSegs,s),o=this.splitBusinessHourSegs(e.businessHourSegs,s),c=this.splitNowIndicatorSegs(e.nowIndicatorSegs,s),u=this.splitDateSelectionSegs(e.dateSelectionSegs,s),d=this.splitEventDrag(e.eventDrag,s),h=this.splitEventResize(e.eventResize,s);return S("div",{className:"fc-timegrid-cols",ref:this.rootElRef},S("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,S("tbody",{role:"presentation"},S("tr",{role:"row"},e.axis&&S("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},S("div",{className:"fc-timegrid-col-frame"},S("div",{className:"fc-timegrid-now-indicator-container"},typeof r=="number"&&S(yd,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:r},isAxis:!0,date:e.nowDate})))),e.cells.map((f,p)=>S(UN,{key:f.key,elRef:this.cellElRefs.createRef(f.key),dateProfile:e.dateProfile,date:f.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:f.extraRenderProps,extraDataAttrs:f.extraDataAttrs,extraClassNames:f.extraClassNames,extraDateSpan:f.extraDateSpan,fgEventSegs:i[p],bgEventSegs:l[p],businessHourSegs:o[p],nowIndicatorSegs:c[p],dateSelectionSegs:u[p],eventDrag:d[p],eventResize:h[p],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new Kr(this.rootElRef.current,VN(this.cellElRefs.currentMap,e.cells),!0,!1))}}function VN(t,e){return e.map(n=>t[n.key])}class WN extends Tt{constructor(){super(...arguments),this.processSlotOptions=z(qN),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:n}=this.props,{slatCoords:r}=this.state;if(n&&r){if(e.time){let s=r.computeTimeTop(e.time);s=Math.ceil(s),s&&(s+=1),n(s)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:n}=this;return S("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},S(NN,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),S(zN,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:n.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,n){let{dateEnv:r,options:s}=this.context,{colCoords:i}=this,{dateProfile:l}=this.props,{slatCoords:o}=this.state,{snapDuration:c,snapsPerSlot:u}=this.processSlotOptions(this.props.slotDuration,s.snapDuration),d=i.leftToIndex(e),h=o.positions.topToIndex(n);if(d!=null&&h!=null){let f=this.props.cells[d],p=o.positions.tops[h],y=o.positions.getHeight(h),x=(n-p)/y,b=Math.floor(x*u),g=h*u+b,m=this.props.cells[d].date,v=Ac(l.slotMinTime,R_(c,g)),w=r.add(m,v),T=r.add(w,c);return{dateProfile:l,dateSpan:Object.assign({range:{start:w,end:T},allDay:!1},f.extraDateSpan),dayEl:i.els[d],rect:{left:i.lefts[d],right:i.rights[d],top:p,bottom:p+y},layer:0}}return null}}function qN(t,e){let n=e||t,r=Yu(t,n);return r===null&&(n=t,r=1),{snapDuration:n,snapsPerSlot:r}}class GN extends sy{sliceRange(e,n){let r=[];for(let s=0;s<n.length;s+=1){let i=Xn(e,n[s]);i&&r.push({start:i.start,end:i.end,isStart:i.start.valueOf()===e.start.valueOf(),isEnd:i.end.valueOf()===e.end.valueOf(),col:s})}return r}}class QN extends Tt{constructor(){super(...arguments),this.buildDayRanges=z(YN),this.slicer=new GN,this.timeColsRef=Le()}render(){let{props:e,context:n}=this,{dateProfile:r,dayTableModel:s}=e,{nowIndicator:i,nextDayThreshold:l}=n.options,o=this.buildDayRanges(s,r,n.dateEnv);return S(ss,{unit:i?"minute":"day"},(c,u)=>S(WN,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,r,null,n,o),{forPrint:e.forPrint,axis:e.axis,dateProfile:r,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:s.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:c,nowIndicatorSegs:i&&this.slicer.sliceNowDate(c,r,l,n,o),todayRange:u,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function YN(t,e,n){let r=[];for(let s of t.headerDates)r.push({start:n.add(s,e.slotMinTime),end:n.add(s,e.slotMaxTime)});return r}const ep=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function KN(t,e,n,r,s){let i=new Date(0),l=t,o=K(0),c=n||ZN(r),u=[];for(;mt(l)<mt(e);){let d=s.add(i,l),h=Yu(o,c)!==null;u.push({date:d,time:l,key:d.toISOString(),isoTimeStr:Q_(d),isLabeled:h}),l=Ac(l,r),o=Ac(o,r)}return u}function ZN(t){let e,n,r;for(e=ep.length-1;e>=0;e-=1)if(n=K(ep[e]),r=Yu(n,t),r!==null&&r>1)return n;return t}class JN extends EN{constructor(){super(...arguments),this.buildTimeColsModel=z(XN),this.buildSlatMetas=z(KN)}render(){let{options:e,dateEnv:n,dateProfileGenerator:r}=this.context,{props:s}=this,{dateProfile:i}=s,l=this.buildTimeColsModel(i,r),o=this.allDaySplitter.splitProps(s),c=this.buildSlatMetas(i.slotMinTime,i.slotMaxTime,e.slotLabelInterval,e.slotDuration,n),{dayMinWidth:u}=e,d=!u,h=u,f=e.dayHeaders&&S(ty,{dates:l.headerDates,dateProfile:i,datesRepDistinctDays:!0,renderIntro:d?this.renderHeadAxis:null}),p=e.allDaySlot!==!1&&(x=>S(Iy,Object.assign({},o.allDay,{dateProfile:i,dayTableModel:l,nextDayThreshold:e.nextDayThreshold,tableMinWidth:x.tableMinWidth,colGroupNode:x.tableColGroupNode,renderRowIntro:d?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:x.clientWidth,clientHeight:x.clientHeight,forPrint:s.forPrint},this.getAllDayMaxEventProps()))),y=x=>S(QN,Object.assign({},o.timed,{dayTableModel:l,dateProfile:i,axis:d,slotDuration:e.slotDuration,slatMetas:c,forPrint:s.forPrint,tableColGroupNode:x.tableColGroupNode,tableMinWidth:x.tableMinWidth,clientWidth:x.clientWidth,clientHeight:x.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:x.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return h?this.renderHScrollLayout(f,p,y,l.colCnt,u,c,this.state.slatCoords):this.renderSimpleLayout(f,p,y)}}function XN(t,e){let n=new ny(t.renderRange,e);return new ry(n,!1)}var eA='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';Vu(eA);const tA={allDaySlot:Boolean};var nA=Yt({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:tA,views:{timeGrid:{component:JN,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});pd.touchMouseIgnoreWait=500;let $c=0,Yl=0,Fc=!1;class Ly{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&rA(n)&&this.tryStart(n)){let r=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let r=this.createEventFromMouse(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let r=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let s=n.target;this.shouldIgnoreMove||s.addEventListener("touchmove",this.handleTouchMove),s.addEventListener("touchend",this.handleTouchEnd),s.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let r=this.createEventFromTouch(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=n=>{if(this.isDragging){let r=n.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,sA()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let r=window.scrollX-this.prevScrollX+this.prevPageX,s=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:s,deltaX:r-this.origPageX,deltaY:s-this.origPageY})}},this.containerEl=e,this.emitter=new _o,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),iA()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),lA()}tryStart(e){let n=this.querySubjectEl(e),r=e.target;return n&&(!this.handleSelector||Re(r,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){Fc=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Re(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return $c||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Fc=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let r=0,s=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,s=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:s}}createEventFromTouch(e,n){let r=e.touches,s,i,l=0,o=0;return r&&r.length?(s=r[0].pageX,i=r[0].pageY):(s=e.pageX,i=e.pageY),n?(this.origPageX=s,this.origPageY=i):(l=s-this.origPageX,o=i-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:s,pageY:i,deltaX:l,deltaY:o}}}function rA(t){return t.button===0&&!t.ctrlKey}function sA(){$c+=1,setTimeout(()=>{$c-=1},pd.touchMouseIgnoreWait)}function iA(){Yl+=1,Yl===1&&window.addEventListener("touchmove",By,{passive:!1})}function lA(){Yl-=1,Yl||window.removeEventListener("touchmove",By,{passive:!1})}function By(t){Fc&&t.preventDefault()}class oA{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=r-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let r=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(e,n){let r=this.mirrorEl,s=this.sourceEl.getBoundingClientRect();r.style.transition="top "+n+"ms,left "+n+"ms",Rs(r,{left:s.left,top:s.top}),v_(r,()=>{r.style.transition="",e()})}cleanup(){this.mirrorEl&&(qu(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Rs(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),Rs(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class $y extends hd{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class Fy extends $y{constructor(e,n){super(new Uk(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return $k(this.scrollController.el)}}class aA extends $y{constructor(e){super(new Hk,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const tp=typeof performance=="function"?performance.now:Date.now;class cA{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let n=tp();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let r=e-window.scrollX,s=n-window.scrollY,i=this.pointerScreenY===null?0:s-this.pointerScreenY,l=this.pointerScreenX===null?0:r-this.pointerScreenX;i<0?this.everMovedUp=!0:i>0&&(this.everMovedDown=!0),l<0?this.everMovedLeft=!0:l>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=s,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(tp()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:r}=e,{edgeThreshold:s}=this,i=s-e.distance,l=i*i/(s*s)*this.maxVelocity*n,o=1;switch(e.name){case"left":o=-1;case"right":r.setScrollLeft(r.getScrollLeft()+l*o);break;case"top":o=-1;case"bottom":r.setScrollTop(r.getScrollTop()+l*o);break}}computeBestEdge(e,n){let{edgeThreshold:r}=this,s=null,i=this.scrollCaches||[];for(let l of i){let o=l.clientRect,c=e-o.left,u=o.right-e,d=n-o.top,h=o.bottom-n;c>=0&&u>=0&&d>=0&&h>=0&&(d<=r&&this.everMovedUp&&l.canScrollUp()&&(!s||s.distance>d)&&(s={scrollCache:l,name:"top",distance:d}),h<=r&&this.everMovedDown&&l.canScrollDown()&&(!s||s.distance>h)&&(s={scrollCache:l,name:"bottom",distance:h}),c<=r&&this.everMovedLeft&&l.canScrollLeft()&&(!s||s.distance>c)&&(s={scrollCache:l,name:"left",distance:c}),u<=r&&this.everMovedRight&&l.canScrollRight()&&(!s||s.distance>u)&&(s={scrollCache:l,name:"right",distance:u}))}return s}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new aA(!1):new Fy(n,!1))}queryScrollEls(e){let n=[];for(let r of this.scrollQuery)typeof r=="object"?n.push(r):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(r)));return n}}class di extends Wk{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=s=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,y_(document.body),w_(document.body),s.isTouch||s.origEvent.preventDefault(),this.emitter.trigger("pointerdown",s),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(s.subjectEl,s.pageX,s.pageY),this.startDelay(s),this.minDistance||this.handleDistanceSurpassed(s)))},this.onPointerMove=s=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",s),!this.isDistanceSurpassed){let i=this.minDistance,l,{deltaX:o,deltaY:c}=s;l=o*o+c*c,l>=i*i&&this.handleDistanceSurpassed(s)}this.isDragging&&(s.origEvent.type!=="scroll"&&(this.mirror.handleMove(s.pageX,s.pageY),this.autoScroller.handleMove(s.pageX,s.pageY)),this.emitter.trigger("dragmove",s))}},this.onPointerUp=s=>{this.isInteracting&&(this.isInteracting=!1,x_(document.body),b_(document.body),this.emitter.trigger("pointerup",s),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(s)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new Ly(e);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),n&&(r.selector=n),this.mirror=new oA,this.autoScroller=new cA}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class uA{constructor(e){this.el=e,this.origRect=dd(e),this.scrollCaches=Zv(e).map(n=>new Fy(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let r={left:e,top:n};for(let s of this.scrollCaches)if(!dA(s.getEventTarget())&&!Ck(r,s.clientRect))return!1;return!0}}function dA(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class Eo{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:s}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(s.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):s.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new _o}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},r=n,s=e.subjectEl,i;s instanceof HTMLElement&&(i=dd(s),r=jk(r,i));let l=this.initialHit=this.queryHitForOffset(r.left,r.top);if(l){if(this.useSubjectCenter&&i){let o=Qv(i,l.rect);o&&(r=Nk(o))}this.coordAdjust=Ak(r,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!ko(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))}prepareHits(){this.offsetTrackers=qt(this.droppableStore,e=>(e.component.prepareHits(),new uA(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:r,offsetTrackers:s}=this,i=null;for(let l in r){let o=r[l].component,c=s[l];if(c&&c.isWithinClipping(e,n)){let u=c.computeLeft(),d=c.computeTop(),h=e-u,f=n-d,{origRect:p}=c,y=p.right-p.left,x=p.bottom-p.top;if(h>=0&&h<y&&f>=0&&f<x){let b=o.queryHit(h,f,y,x);b&&bo(b.dateProfile.activeRange,b.dateSpan.range)&&(this.disablePointCheck||c.el.contains(c.el.getRootNode().elementFromPoint(h+u-window.scrollX,f+d-window.scrollY)))&&(!i||b.layer>i.layer)&&(b.componentId=l,b.context=o.context,b.rect.left+=u,b.rect.right+=u,b.rect.top+=d,b.rect.bottom+=d,i=b)}}}return i}}function ko(t,e){return!t&&!e?!0:!!t!=!!e?!1:gk(t.dateSpan,e.dateSpan)}function Uy(t,e){let n={};for(let r of e.pluginHooks.datePointTransforms)Object.assign(n,r(t,e));return Object.assign(n,hA(t,e.dateEnv)),n}function hA(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class fA extends rs{constructor(e){super(e),this.handlePointerDown=r=>{let{dragging:s}=this,i=r.origEvent.target;s.setIgnoreMove(!this.component.isValidDateDownEl(i))},this.handleDragEnd=r=>{let{component:s}=this,{pointer:i}=this.dragging;if(!i.wasTouchScroll){let{initialHit:l,finalHit:o}=this.hitDragging;if(l&&o&&ko(l,o)){let{context:c}=s,u=Object.assign(Object.assign({},Uy(l.dateSpan,c)),{dayEl:l.dayEl,jsEvent:r.origEvent,view:c.viewApi||c.calendarApi.view});c.emitter.trigger("dateClick",u)}}},this.dragging=new di(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new Eo(this.dragging,cd(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class pA extends rs{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=l=>{let{component:o,dragging:c}=this,{options:u}=o.context,d=u.selectable&&o.isValidDateDownEl(l.origEvent.target);c.setIgnoreMove(!d),c.delay=l.isTouch?gA(o):null},this.handleDragStart=l=>{this.component.context.calendarApi.unselect(l)},this.handleHitUpdate=(l,o)=>{let{context:c}=this.component,u=null,d=!1;if(l){let h=this.hitDragging.initialHit;l.componentId===h.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(h,l)||(u=mA(h,l,c.pluginHooks.dateSelectionTransformers)),(!u||!Zk(u,l.dateProfile,c))&&(d=!0,u=null)}u?c.dispatch({type:"SELECT_DATES",selection:u}):o||c.dispatch({type:"UNSELECT_DATES"}),d?Gu():Qu(),o||(this.dragSelection=u)},this.handlePointerUp=l=>{this.dragSelection&&(Bv(this.dragSelection,l,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:r}=n.context,s=this.dragging=new di(e.el);s.touchScrollAllowed=!1,s.minDistance=r.selectMinDistance||0,s.autoScroller.isEnabled=r.dragScroll;let i=this.hitDragging=new Eo(this.dragging,cd(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function gA(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function mA(t,e,n){let r=t.dateSpan,s=e.dateSpan,i=[r.range.start,r.range.end,s.range.start,s.range.end];i.sort(C_);let l={};for(let o of n){let c=o(t,e);if(c===!1)return null;c&&Object.assign(l,c)}return l.range={start:i[0],end:i[3]},l.allDay=r.allDay,l}class hi extends rs{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=l=>{let o=l.origEvent.target,{component:c,dragging:u}=this,{mirror:d}=u,{options:h}=c.context,f=c.context;this.subjectEl=l.subjectEl;let p=this.subjectSeg=Yr(l.subjectEl),x=(this.eventRange=p.eventRange).instance.instanceId;this.relevantEvents=id(f.getCurrentData().eventStore,x),u.minDistance=l.isTouch?0:h.eventDragMinDistance,u.delay=l.isTouch&&x!==c.props.eventSelection?yA(c):null,h.fixedMirrorParent?d.parentNode=h.fixedMirrorParent:d.parentNode=Re(o,".fc"),d.revertDuration=h.dragRevertDuration;let b=c.isValidSegDownEl(o)&&!Re(o,".fc-event-resizer");u.setIgnoreMove(!b),this.isDragging=b&&l.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=l=>{let o=this.component.context,c=this.eventRange,u=c.instance.instanceId;l.isTouch?u!==this.component.props.eventSelection&&o.dispatch({type:"SELECT_EVENT",eventInstanceId:u}):o.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(o.calendarApi.unselect(l),o.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new ue(o,c.def,c.instance),jsEvent:l.origEvent,view:o.viewApi}))},this.handleHitUpdate=(l,o)=>{if(!this.isDragging)return;let c=this.relevantEvents,u=this.hitDragging.initialHit,d=this.component.context,h=null,f=null,p=null,y=!1,x={affectedEvents:c,mutatedEvents:Ze(),isEvent:!0};if(l){h=l.context;let b=h.options;d===h||b.editable&&b.droppable?(f=vA(u,l,this.eventRange.instance.range.start,h.getCurrentData().pluginHooks.eventDragMutationMassagers),f&&(p=ad(c,h.getCurrentData().eventUiBases,f,h),x.mutatedEvents=p,iy(x,l.dateProfile,h)||(y=!0,f=null,p=null,x.mutatedEvents=Ze()))):h=null}this.displayDrag(h,x),y?Gu():Qu(),o||(d===h&&ko(u,l)&&(f=null),this.dragging.setMirrorNeedsRevert(!f),this.dragging.setMirrorIsVisible(!l||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=h,this.validMutation=f,this.mutatedRelevantEvents=p)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=l=>{if(this.isDragging){let o=this.component.context,c=o.viewApi,{receivingContext:u,validMutation:d}=this,h=this.eventRange.def,f=this.eventRange.instance,p=new ue(o,h,f),y=this.relevantEvents,x=this.mutatedRelevantEvents,{finalHit:b}=this.hitDragging;if(this.clearDrag(),o.emitter.trigger("eventDragStop",{el:this.subjectEl,event:p,jsEvent:l.origEvent,view:c}),d){if(u===o){let g=new ue(o,x.defs[h.defId],f?x.instances[f.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:x});let m={oldEvent:p,event:g,relatedEvents:Vn(x,o,f),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:y})}},v={};for(let w of o.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(v,w(d,o));o.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},m),v),{el:l.subjectEl,delta:d.datesDelta,jsEvent:l.origEvent,view:c})),o.emitter.trigger("eventChange",m)}else if(u){let g={event:p,relatedEvents:Vn(y,o,f),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:y})}};o.emitter.trigger("eventLeave",Object.assign(Object.assign({},g),{draggedEl:l.subjectEl,view:c})),o.dispatch({type:"REMOVE_EVENTS",eventStore:y}),o.emitter.trigger("eventRemove",g);let m=x.defs[h.defId],v=x.instances[f.instanceId],w=new ue(u,m,v);u.dispatch({type:"MERGE_EVENTS",eventStore:x});let T={event:w,relatedEvents:Vn(x,u,v),revert(){u.dispatch({type:"REMOVE_EVENTS",eventStore:x})}};u.emitter.trigger("eventAdd",T),l.isTouch&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:f.instanceId}),u.emitter.trigger("drop",Object.assign(Object.assign({},Uy(b.dateSpan,u)),{draggedEl:l.subjectEl,jsEvent:l.origEvent,view:b.context.viewApi})),u.emitter.trigger("eventReceive",Object.assign(Object.assign({},T),{draggedEl:l.subjectEl,view:b.context.viewApi}))}}else o.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:r}=n.context,s=this.dragging=new di(e.el);s.pointer.selector=hi.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=r.dragScroll;let i=this.hitDragging=new Eo(this.dragging,Oc);i.useSubjectCenter=e.useEventCenter,i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let r=this.component.context,s=this.receivingContext;s&&s!==e&&(s===r?s.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:Ze(),isEvent:!0}}):s.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}hi.SELECTOR=".fc-event-draggable, .fc-event-resizable";function vA(t,e,n,r){let s=t.dateSpan,i=e.dateSpan,l=s.range.start,o=i.range.start,c={};s.allDay!==i.allDay&&(c.allDay=i.allDay,c.hasEnd=e.context.options.allDayMaintainDuration,i.allDay?l=le(n):l=n);let u=Nr(l,o,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);u.milliseconds&&(c.allDay=!1);let d={datesDelta:u,standardProps:c};for(let h of r)h(d,t,e);return d}function yA(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class xA extends rs{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=i=>{let{component:l}=this,o=this.querySegEl(i),c=Yr(o),u=this.eventRange=c.eventRange;this.dragging.minDistance=l.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(i.origEvent.target)||i.isTouch&&this.component.props.eventSelection!==u.instance.instanceId)},this.handleDragStart=i=>{let{context:l}=this.component,o=this.eventRange;this.relevantEvents=id(l.getCurrentData().eventStore,this.eventRange.instance.instanceId);let c=this.querySegEl(i);this.draggingSegEl=c,this.draggingSeg=Yr(c),l.calendarApi.unselect(),l.emitter.trigger("eventResizeStart",{el:c,event:new ue(l,o.def,o.instance),jsEvent:i.origEvent,view:l.viewApi})},this.handleHitUpdate=(i,l,o)=>{let{context:c}=this.component,u=this.relevantEvents,d=this.hitDragging.initialHit,h=this.eventRange.instance,f=null,p=null,y=!1,x={affectedEvents:u,mutatedEvents:Ze(),isEvent:!0};i&&(i.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,i)||(f=wA(d,i,o.subjectEl.classList.contains("fc-event-resizer-start"),h.range))),f&&(p=ad(u,c.getCurrentData().eventUiBases,f,c),x.mutatedEvents=p,iy(x,i.dateProfile,c)||(y=!0,f=null,p=null,x.mutatedEvents=null)),p?c.dispatch({type:"SET_EVENT_RESIZE",state:x}):c.dispatch({type:"UNSET_EVENT_RESIZE"}),y?Gu():Qu(),l||(f&&ko(d,i)&&(f=null),this.validMutation=f,this.mutatedRelevantEvents=p)},this.handleDragEnd=i=>{let{context:l}=this.component,o=this.eventRange.def,c=this.eventRange.instance,u=new ue(l,o,c),d=this.relevantEvents,h=this.mutatedRelevantEvents;if(l.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:u,jsEvent:i.origEvent,view:l.viewApi}),this.validMutation){let f=new ue(l,h.defs[o.defId],c?h.instances[c.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:h});let p={oldEvent:u,event:f,relatedEvents:Vn(h,l,c),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:d})}};l.emitter.trigger("eventResize",Object.assign(Object.assign({},p),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||K(0),endDelta:this.validMutation.endDelta||K(0),jsEvent:i.origEvent,view:l.viewApi})),l.emitter.trigger("eventChange",p)}else l.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,r=this.dragging=new di(e.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=n.context.options.dragScroll;let s=this.hitDragging=new Eo(this.dragging,cd(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Re(e.subjectEl,".fc-event")}}function wA(t,e,n,r){let s=t.context.dateEnv,i=t.dateSpan.range.start,l=e.dateSpan.range.start,o=Nr(i,l,s,t.largeUnit);if(n){if(s.add(r.start,o)<r.end)return{startDelta:o}}else if(s.add(r.end,o)>r.start)return{endDelta:o};return null}class bA{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let s=this.context.options.unselectCancel,i=gv(r.origEvent);this.matchesCancel=!!Re(i,s),this.matchesEvent=!!Re(i,hi.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:s}=this,{documentPointer:i}=this,l=s.getCurrentData();if(!i.wasTouchScroll){if(l.dateSelection&&!this.isRecentPointerDateSelect){let o=s.options.unselectAuto;o&&(!o||!this.matchesCancel)&&s.calendarApi.unselect(r)}l.eventSelection&&!this.matchesEvent&&s.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new Ly(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const SA={fixedMirrorParent:A},_A={dateClick:A,eventDragStart:A,eventDragStop:A,eventDrop:A,eventResizeStart:A,eventResizeStop:A,eventResize:A,drop:A,eventReceive:A,eventLeave:A};pd.dataAttrPrefix="";var EA=Yt({name:"@fullcalendar/interaction",componentInteractions:[fA,pA,hi,xA],calendarInteractions:[bA],elementDraggingImpl:di,optionRefiners:SA,listenerRefiners:_A});const Zr=[{name:"Haircut",duration:45,price:700},{name:"Beard trim",duration:15,price:300},{name:"Blowdry",duration:30,price:500},{name:"Face mask",duration:30,price:200},{name:"Colour",duration:60,price:1e3},{name:"Wax",duration:60,price:500},{name:"Massage",duration:45,price:900},{name:"Shave",duration:30,price:500}],kA=t=>Zr.find(e=>e.name===t),CA=t=>{const e=kA(t);return e?e.price:0},jA=({currentUser:t})=>{const[e,n]=P.useState([]),[r,s]=P.useState(!1),[i,l]=P.useState(""),[o,c]=P.useState("09:00"),[u,d]=P.useState(null),[h,f]=P.useState(!1),[p,y]=P.useState(null),[x,b]=P.useState({customerName:"",customerEmail:"",customerPhone:"",service:"Haircut",price:50,duration:60}),[g,m]=P.useState(!1);P.useEffect(()=>{v()},[t.id]);const v=async()=>{if(t.id)try{const I=(await W.getBookings(t.id)).map(E=>({id:E.id||"",title:`${E.service} - ${E.customer_name}`,start:`${E.date}T${E.time}`,end:w(E.date,E.time,60),color:E.status==="completed"?"#10B981":E.status==="cancelled"?"#EF4444":"#3B82F6",extendedProps:{customer:E.customer_name,customerEmail:"",service:E.service,price:E.price,phone:"",userId:E.user_id}}));n(I)}catch(R){console.error("Failed to load bookings:",R)}},w=(R,I,E)=>{const j=new Date(`${R}T${I}`);return new Date(j.getTime()+E*6e4).toISOString()},T=R=>{l(R.dateStr),s(!0)},N=R=>{const I=Zr.find(E=>E.name===R);I&&b(E=>({...E,service:R,price:I.price,duration:I.duration}))},k=async R=>{if(R.preventDefault(),!!t.id){m(!0);try{if(u){const I={customer_name:x.customerName,service:x.service,price:x.price,date:i,time:o};await W.updateBooking(u,I)&&(await v(),b({customerName:"",customerEmail:"",customerPhone:"",service:"Haircut",price:50,duration:60}),d(null),s(!1),alert("Booking updated successfully!"))}else{let I="";if(x.customerEmail){const j=await W.addCustomer({user_id:t.id,name:x.customerName,email:x.customerEmail,phone:x.customerPhone});I=(j==null?void 0:j.id)||""}await W.addBooking({user_id:t.id,customer_id:I,customer_name:x.customerName,service:x.service,price:x.price,date:i,time:o,status:"scheduled"})&&(await v(),b({customerName:"",customerEmail:"",customerPhone:"",service:"Haircut",price:50,duration:60}),s(!1),alert("Booking created successfully!"))}}catch(I){console.error("Failed to save booking:",I),alert("Failed to save booking. Please try again.")}finally{m(!1)}}},D=R=>{const I=R.event,E=I.extendedProps.userId===t.id,j=t.role==="Owner";if(!E&&!j){alert("You can only edit your own bookings.");return}y(I),f(!0)},H=async()=>{if(!(!p||!t.id))try{await W.updateBooking(p.id,{status:"completed"}),v(),f(!1),alert("Booking marked as completed!")}catch(R){console.error("Failed to update booking:",R),alert("Failed to update booking. Please try again.")}},C=()=>{p&&(b({customerName:p.extendedProps.customer,customerEmail:p.extendedProps.customerEmail||"",customerPhone:p.extendedProps.phone||"",service:p.extendedProps.service,price:p.extendedProps.price,duration:60}),l(p.start.toISOString().split("T")[0]),c(p.start.toISOString().split("T")[1].substring(0,5)),d(p.id),f(!1),s(!0))},B=async()=>{if(!(!p||!t.id))try{await W.deleteBooking(p.id),v(),f(!1),alert("Booking deleted successfully!")}catch(R){console.error("Failed to delete booking:",R),alert("Failed to delete booking. Please try again.")}};return a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Booking Calendar"}),a.jsx("p",{className:"text-gray-600",children:"Manage your appointments and bookings"})]}),a.jsx("button",{onClick:()=>s(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"+ New Booking"})]}),a.jsx(Ey,{plugins:[vN,nA,EA],initialView:"timeGridDay",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},events:e,dateClick:T,eventClick:D,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,height:"auto",slotMinTime:"08:00:00",slotMaxTime:"20:00:00",slotDuration:"00:30:00",businessHours:{daysOfWeek:[1,2,3,4,5,6],startTime:"09:00",endTime:"18:00"}}),r&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:u?"Edit Booking":"New Booking"}),a.jsx("button",{onClick:()=>{s(!1),d(null),b({customerName:"",customerEmail:"",customerPhone:"",service:"Haircut",price:50,duration:60})},className:"text-gray-400 hover:text-gray-600",children:""})]}),a.jsxs("form",{onSubmit:k,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),a.jsx("input",{type:"date",value:i,onChange:R=>l(R.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time"}),a.jsx("input",{type:"time",value:o,onChange:R=>c(R.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),a.jsx("input",{type:"text",value:x.customerName,onChange:R=>b(I=>({...I,customerName:R.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email (Optional)"}),a.jsx("input",{type:"email",value:x.customerEmail,onChange:R=>b(I=>({...I,customerEmail:R.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional email address"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Phone (Optional)"}),a.jsx("input",{type:"tel",value:x.customerPhone,onChange:R=>b(I=>({...I,customerPhone:R.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional phone number"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service"}),a.jsx("select",{value:x.service,onChange:R=>N(R.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:Zr.map(R=>a.jsx("option",{value:R.name,children:R.name},R.name))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ()"}),a.jsx("input",{type:"number",value:x.price,onChange:R=>b(I=>({...I,price:Number(R.target.value)})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",required:!0})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{s(!1),d(null),b({customerName:"",customerEmail:"",customerPhone:"",service:"Haircut",price:50,duration:60})},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:g,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:g?u?"Updating...":"Creating...":u?"Update Booking":"Create Booking"})]})]})]})})}),h&&p&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Booking Actions"}),a.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Customer:"})," ",p.extendedProps.customer]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Service:"})," ",p.extendedProps.service]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Price:"})," ",p.extendedProps.price]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Time:"})," ",new Date(p.start).toLocaleString()]})]})}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:H,className:"w-full flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:" Mark as Completed"}),a.jsx("button",{onClick:C,className:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:" Edit Booking"}),a.jsx("button",{onClick:B,className:"w-full flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:" Delete Booking"})]}),a.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:a.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"})})]})})})]})},NA=({currentUser:t})=>{const[e,n]=P.useState({total:0,bookings:0}),[r,s]=P.useState({total:0,bookings:0}),[i,l]=P.useState({total:0,bookings:0}),[o,c]=P.useState([]),[u,d]=P.useState(!0),[h,f]=P.useState({dailyTarget:500,weeklyTarget:3e3,monthlyTarget:12e3,barberCommission:60,apprenticeCommission:40,ownerCommission:100}),y=(()=>{switch(t.role){case"Owner":return h.ownerCommission;case"Barber":return h.barberCommission;case"Apprentice":return h.apprenticeCommission;default:return 0}})(),x=async()=>{try{const w=await W.getShopSettings(t.id||"");w&&f(w)}catch(w){console.error("Failed to load shop settings:",w)}},b=w=>({total:w.total*y/100,gross:w.total,bookings:w.bookings});P.useEffect(()=>{x(),g()},[t.id]);const g=async()=>{if(t.id){d(!0);try{const[w,T,N,k]=await Promise.all([W.getTodayEarnings(t.id),W.getWeekEarnings(t.id),W.getMonthEarnings(t.id),W.getRecentTransactions(t.id,10)]);n(w),s(T),l(N),c(k)}catch(w){console.error("Failed to load earnings data:",w)}finally{d(!1)}}},m=(w,T)=>Math.min(w/T*100,100),v=w=>w>=100?"bg-green-500":w>=75?"bg-blue-500":w>=50?"bg-yellow-500":"bg-red-500";return u?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-gray-500",children:"Loading earnings data..."})}):a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Earnings Tracker"}),t.role!=="Owner"&&a.jsx("div",{className:"text-sm bg-blue-50 border border-blue-200 rounded-lg px-3 py-2",children:a.jsxs("span",{className:"text-blue-700 font-medium",children:["Your Commission: ",y,"%"]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-green-50 rounded-lg p-6 border border-green-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Today"}),t.role==="Owner"?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-3xl font-bold text-green-900",children:["$",e.total]}),a.jsxs("p",{className:"text-sm text-green-600 mb-3",children:[e.bookings," bookings"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-3xl font-bold text-green-900",children:["$",b(e).total.toFixed(2)]}),a.jsxs("p",{className:"text-sm text-green-600 mb-1",children:[e.bookings," bookings"]}),a.jsxs("p",{className:"text-xs text-green-500",children:["Gross: $",e.total,"  ",y,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${v(m(e.total,h.dailyTarget))}`,style:{width:`${m(e.total,h.dailyTarget)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[m(e.total,h.dailyTarget).toFixed(1),"% of $",h.dailyTarget," target"]})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"This Week"}),t.role==="Owner"?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-3xl font-bold text-blue-900",children:["$",r.total]}),a.jsxs("p",{className:"text-sm text-blue-600 mb-3",children:[r.bookings," bookings"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-3xl font-bold text-blue-900",children:["$",b(r).total.toFixed(2)]}),a.jsxs("p",{className:"text-sm text-blue-600 mb-1",children:[r.bookings," bookings"]}),a.jsxs("p",{className:"text-xs text-blue-500",children:["Gross: $",r.total,"  ",y,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${v(m(r.total,h.weeklyTarget))}`,style:{width:`${m(r.total,h.weeklyTarget)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[m(r.total,h.weeklyTarget).toFixed(1),"% of $",h.weeklyTarget," target"]})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-6 border border-purple-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-2",children:"This Month"}),t.role==="Owner"?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-3xl font-bold text-purple-900",children:["$",i.total]}),a.jsxs("p",{className:"text-sm text-purple-600 mb-3",children:[i.bookings," bookings"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-3xl font-bold text-purple-900",children:["$",b(i).total.toFixed(2)]}),a.jsxs("p",{className:"text-sm text-purple-600 mb-1",children:[i.bookings," bookings"]}),a.jsxs("p",{className:"text-xs text-purple-500",children:["Gross: $",i.total,"  ",y,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${v(m(i.total,h.monthlyTarget))}`,style:{width:`${m(i.total,h.monthlyTarget)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[m(i.total,h.monthlyTarget).toFixed(1),"% of $",h.monthlyTarget," target"]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Transactions"})}),a.jsx("div",{className:"divide-y divide-gray-200",children:o.length===0?a.jsxs("div",{className:"px-6 py-8 text-center text-gray-500",children:[a.jsx("p",{children:"No completed bookings yet"}),a.jsx("p",{className:"text-sm",children:"Complete bookings to see your earnings here"})]}):o.map(w=>a.jsxs("div",{className:"px-6 py-4 flex justify-between items-center hover:bg-gray-50",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-gray-900",children:[w.service," - ",w.customer_name]}),a.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(w.date).toLocaleDateString()," at ",w.time]})]}),a.jsx("div",{className:"text-right",children:t.role==="Owner"?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"font-semibold text-green-600",children:["$",w.price]}),a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:w.status})]}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"font-semibold text-green-600",children:["$",(w.price*y/100).toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["$",w.price,"  ",y,"%"]})]})})]},w.id))})]}),a.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[a.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Quick Stats"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Average per booking:"}),a.jsxs("span",{className:"font-medium",children:["",e.bookings>0?Math.round(e.total/e.bookings):0]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Total customers served:"}),a.jsx("span",{className:"font-medium",children:i.bookings})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Weekly average:"}),a.jsxs("span",{className:"font-medium",children:["",Math.round(r.total/7),"/day"]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[a.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Goal Tracking"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-1",children:[a.jsxs("span",{className:"text-gray-600",children:["Daily Goal: ",h.dailyTarget]}),a.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(e.total/h.dailyTarget*100),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(e.total/h.dailyTarget*100,100)}%`}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-1",children:[a.jsxs("span",{className:"text-gray-600",children:["Monthly Goal: ",h.monthlyTarget]}),a.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(i.total/h.monthlyTarget*100),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${Math.min(i.total/h.monthlyTarget*100,100)}%`}})})]})]})]})]})]})},AA=({currentUser:t})=>{const[e,n]=P.useState([]),[r,s]=P.useState([]),[i,l]=P.useState(!1),[o,c]=P.useState(!1),[u,d]=P.useState(!1),[h,f]=P.useState(null),[p,y]=P.useState(null),[x,b]=P.useState(""),[g,m]=P.useState({name:"",email:"",phone:""}),[v,w]=P.useState({service:"Haircut",date:"",time:"09:00",price:700}),[T,N]=P.useState(!1);P.useEffect(()=>{k()},[t.id]),P.useEffect(()=>{D()},[e,x]),P.useEffect(()=>{const j=L=>{L.target.closest(".dropdown-container")||y(null)};return document.addEventListener("click",j),()=>document.removeEventListener("click",j)},[]);const k=async()=>{if(t.id)try{const j=await W.getCustomers(t.id),L=await Promise.all(j.map(async V=>{try{const _=await W.getCustomerBookings(V.id),O=_.reduce((X,Z)=>X+Z.price,0),F=_.length>0?_.sort((X,Z)=>new Date(Z.date).getTime()-new Date(X.date).getTime())[0].date:null;return{...V,total_bookings:_.length,total_spent:O,last_visit:F}}catch{return{...V,total_bookings:0,total_spent:0,last_visit:null}}}));n(L)}catch(j){console.error("Failed to load customers:",j)}},D=()=>{if(!x){s(e);return}const j=e.filter(L=>{var V,_;return L.name.toLowerCase().includes(x.toLowerCase())||((V=L.email)==null?void 0:V.toLowerCase().includes(x.toLowerCase()))||((_=L.phone)==null?void 0:_.includes(x))});s(j)},H=async j=>{if(j.preventDefault(),!!t.id){N(!0);try{await W.addCustomer({user_id:t.id,name:g.name,email:g.email,phone:g.phone})&&(await k(),m({name:"",email:"",phone:""}),l(!1))}catch(L){console.error("Failed to add customer:",L),alert("Failed to add customer. Please try again.")}finally{N(!1)}}},C=async j=>{if(j.preventDefault(),!(!h||!t.id)){N(!0);try{await W.updateCustomer(h.id,{name:g.name,email:g.email,phone:g.phone}),await k(),c(!1),f(null),m({name:"",email:"",phone:""})}catch(L){console.error("Failed to update customer:",L),alert("Failed to update customer. Please try again.")}finally{N(!1)}}},B=async j=>{if(confirm("Are you sure you want to delete this customer? This action cannot be undone."))try{await W.deleteCustomer(j),await k(),y(null)}catch(L){console.error("Failed to delete customer:",L),alert("Failed to delete customer. Please try again.")}},R=async j=>{if(j.preventDefault(),!(!h||!t.id)){N(!0);try{await W.addBooking({user_id:t.id,customer_id:h.id,customer_name:h.name,service:v.service,date:v.date,time:v.time,price:v.price,status:"scheduled"})&&(await k(),d(!1),f(null),w({service:"Haircut",date:"",time:"09:00",price:700}),alert("Appointment booked successfully!"))}catch(L){console.error("Failed to book appointment:",L),alert("Failed to book appointment. Please try again.")}finally{N(!1)}}},I=j=>{f(j),m({name:j.name,email:j.email||"",phone:j.phone||""}),c(!0),y(null)},E=j=>{f(j),w({service:"Haircut",date:new Date().toISOString().split("T")[0],time:"09:00",price:700}),d(!0),y(null)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Customer Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage your customer database and relationships"})]}),a.jsxs("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(xm,{className:"w-4 h-4"}),"Add Customer"]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(wm,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",value:x,onChange:j=>b(j.target.value),placeholder:"Search customers by name, email, or phone...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(zn,{className:"w-8 h-8 text-blue-500 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zn,{className:"w-8 h-8 text-green-500 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bookings"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.reduce((j,L)=>j+(L.total_bookings||0),0)})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 text-purple-500 mr-3 flex items-center justify-center font-bold",children:""}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",e.reduce((j,L)=>j+(L.total_spent||0),0).toFixed(2)]})]})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Customers (",r.length,")"]}),r.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[a.jsx(zn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 text-lg mb-2",children:x?"No customers found":"No customers yet"}),a.jsx("p",{className:"text-gray-400 text-sm mb-4",children:x?"Try adjusting your search terms":"Add your first customer to get started"}),!x&&a.jsx("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Customer"})]}):a.jsx("div",{className:"grid gap-4",children:r.map(j=>a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900 text-lg",children:j.name}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[j.email&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(mm,{className:"w-4 h-4 mr-1"}),j.email]}),j.phone&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(bw,{className:"w-4 h-4 mr-1"}),j.phone]})]})]}),a.jsxs("div",{className:"relative dropdown-container",children:[a.jsx("button",{onClick:L=>{L.stopPropagation(),y(p===j.id?null:j.id)},className:"text-gray-400 hover:text-gray-600 focus:outline-none p-1",children:a.jsx(vm,{className:"w-5 h-5"})}),p===j.id&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg z-50 border",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>E(j),className:"flex items-center px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 w-full text-left",children:[a.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Book Appointment"]}),a.jsxs("button",{onClick:()=>I(j),className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:[a.jsx(ym,{className:"w-4 h-4 mr-2"}),"Edit Customer"]}),a.jsxs("button",{onClick:()=>B(j.id),className:"flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[a.jsx(Sm,{className:"w-4 h-4 mr-2"}),"Delete Customer"]})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[a.jsx("div",{className:"font-semibold text-gray-900",children:j.total_bookings||0}),a.jsx("div",{className:"text-gray-600",children:"Bookings"})]}),a.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[a.jsxs("div",{className:"font-semibold text-gray-900",children:["",(j.total_spent||0).toFixed(2)]}),a.jsx("div",{className:"text-gray-600",children:"Spent"})]}),a.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[a.jsx("div",{className:"font-semibold text-gray-900",children:j.last_visit?new Date(j.last_visit).toLocaleDateString():"Never"}),a.jsx("div",{className:"text-gray-600",children:"Last Visit"})]})]})]},j.id))})]}),i&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-screen overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Add New Customer"}),a.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600 text-xl",children:""})]}),a.jsxs("form",{onSubmit:H,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name *"}),a.jsx("input",{type:"text",value:g.name,onChange:j=>m(L=>({...L,name:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:g.email,onChange:j=>m(L=>({...L,email:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),a.jsx("input",{type:"tel",value:g.phone,onChange:j=>m(L=>({...L,phone:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:T,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:T?"Adding...":"Add Customer"})]})]})]})})}),o&&h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-screen overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Edit Customer"}),a.jsx("button",{onClick:()=>{c(!1),f(null)},className:"text-gray-400 hover:text-gray-600 text-xl",children:""})]}),a.jsxs("form",{onSubmit:C,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name *"}),a.jsx("input",{type:"text",value:g.name,onChange:j=>m(L=>({...L,name:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:g.email,onChange:j=>m(L=>({...L,email:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),a.jsx("input",{type:"tel",value:g.phone,onChange:j=>m(L=>({...L,phone:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{c(!1),f(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:T,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:T?"Updating...":"Update Customer"})]})]})]})})}),u&&h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-screen overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Book Appointment"}),a.jsx("button",{onClick:()=>{d(!1),f(null)},className:"text-gray-400 hover:text-gray-600 text-xl",children:""})]}),a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"font-medium text-blue-900",children:h.name}),h.email&&a.jsx("div",{className:"text-sm text-blue-700",children:h.email}),h.phone&&a.jsx("div",{className:"text-sm text-blue-700",children:h.phone})]}),a.jsxs("form",{onSubmit:R,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service *"}),a.jsxs("select",{value:v.service,onChange:j=>{const L=j.target.value,V=CA(L);w(_=>({..._,service:L,price:V}))},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select a service..."}),Zr.map(j=>a.jsxs("option",{value:j.name,children:[j.name," (",j.duration,"min - ",j.price,")"]},j.name))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),a.jsx("input",{type:"date",value:v.date,onChange:j=>w(L=>({...L,date:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",min:new Date().toISOString().split("T")[0],required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time *"}),a.jsx("select",{value:v.time,onChange:j=>w(L=>({...L,time:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:Array.from({length:20},(j,L)=>{const V=Math.floor(L/2)+9,_=L%2===0?"00":"30",O=`${V.toString().padStart(2,"0")}:${_}`;return a.jsx("option",{value:O,children:O},O)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price () *"}),a.jsx("input",{type:"number",value:v.price,onChange:j=>w(L=>({...L,price:Number(j.target.value)})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01",required:!0})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{d(!1),f(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:T,className:"flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:T?"Booking...":"Book Appointment"})]})]})]})})})]})},TA=({currentUser:t})=>{const[e,n]=P.useState([]),[r,s]=P.useState(!1),[i,l]=P.useState(null),[o,c]=P.useState(!1),[u,d]=P.useState(new Date().toISOString().slice(0,7)),[h,f]=P.useState({category:"Rent",amount:"",description:"",date:new Date().toISOString().split("T")[0],receipt:""}),p=["Rent","Utilities","Supplies","Marketing","Insurance","Equipment","Maintenance","Professional Services","Training","Other"];P.useEffect(()=>{y()},[u]);const y=async()=>{c(!0);try{const w=`${u}-01`,T=`${u}-31`,N=await W.getExpenseRecords(t.id,w,T);n(N)}catch(w){console.error("Failed to load expenses:",w)}finally{c(!1)}},x=async w=>{w.preventDefault(),c(!0);try{const T={category:h.category,amount:parseFloat(h.amount),description:h.description,date:h.date,receipt:h.receipt||void 0};i?await W.addExpenseRecord(t.id,T):await W.addExpenseRecord(t.id,T),f({category:"Rent",amount:"",description:"",date:new Date().toISOString().split("T")[0],receipt:""}),s(!1),l(null),await y()}catch(T){console.error("Failed to save expense:",T),alert("Failed to save expense. Please try again.")}finally{c(!1)}},b=()=>{const w={};let T=0;return e.forEach(N=>{w[N.category]=(w[N.category]||0)+N.amount,T+=N.amount}),{totals:w,grandTotal:T}},g=()=>{const w=`Category,Amount,Description,Date,Receipt
${e.map(D=>`${D.category},${D.amount},"${D.description}",${D.date},"${D.receipt||""}"`).join(`
`)}

TOTALS
${Object.entries(b().totals).map(([D,H])=>`${D},${H},,Monthly Total,`).join(`
`)}
Grand Total,${b().grandTotal},,${u},`,T=new Blob([w],{type:"text/csv;charset=utf-8;"}),N=document.createElement("a"),k=URL.createObjectURL(T);N.setAttribute("href",k),N.setAttribute("download",`expenses-${u}.csv`),N.style.visibility="hidden",document.body.appendChild(N),N.click(),document.body.removeChild(N)};if((t==null?void 0:t.role)!=="Owner")return a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(Mu,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Access Denied"}),a.jsx("p",{className:"text-gray-500",children:"Only shop owners can manage expenses."})]});const{totals:m,grandTotal:v}=b();return a.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Expense Management"}),a.jsx("p",{className:"text-gray-600",children:"Track business expenses for tax reporting"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:g,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center",children:[a.jsx(pm,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),a.jsxs("button",{onClick:()=>s(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 flex items-center",children:[a.jsx(xm,{className:"w-4 h-4 mr-2"}),"Add Expense"]})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Zn,{className:"w-5 h-5 text-gray-600"}),a.jsx("label",{className:"font-medium text-gray-700",children:"View Month:"}),a.jsx("input",{type:"month",value:u,onChange:w=>d(w.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"ml-auto text-lg font-semibold text-gray-800",children:["Total: $",v.toFixed(2)]})]})}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:Object.entries(m).map(([w,T])=>a.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:w}),a.jsxs("div",{className:"text-xl font-bold text-gray-800",children:["$",T.toFixed(2)]})]},w))}),(r||i)&&a.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:i?"Edit Expense":"Add New Expense"}),a.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),a.jsx("select",{value:h.category,onChange:w=>f({...h,category:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:p.map(w=>a.jsx("option",{value:w,children:w},w))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),a.jsx("input",{type:"number",step:"0.01",value:h.amount,onChange:w=>f({...h,amount:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),a.jsx("input",{type:"date",value:h.date,onChange:w=>f({...h,date:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt/Reference"}),a.jsx("input",{type:"text",value:h.receipt,onChange:w=>f({...h,receipt:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Receipt number or reference"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("input",{type:"text",value:h.description,onChange:w=>f({...h,description:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Description of expense",required:!0})]}),a.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[a.jsxs("button",{type:"submit",disabled:o,className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 disabled:opacity-50",children:[o?"Saving...":i?"Update":"Add"," Expense"]}),a.jsx("button",{type:"button",onClick:()=>{s(!1),l(null),f({category:"Rent",amount:"",description:"",date:new Date().toISOString().split("T")[0],receipt:""})},className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600",children:"Cancel"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("h3",{className:"text-lg font-semibold",children:["Expense Records - ",u]})}),o?a.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading expenses..."}):e.length===0?a.jsx("div",{className:"p-8 text-center text-gray-500",children:"No expenses recorded for this month"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(w=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(w.date).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:w.category})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:w.description}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900",children:["$",w.amount.toFixed(2)]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.receipt||"-"})]},w.id))})]})})]})]})},DA=({currentUser:t})=>{const[e,n]=P.useState([]),[r,s]=P.useState([]),[i,l]=P.useState(!1),[o,c]=P.useState("all"),[u,d]=P.useState("all"),[h,f]=P.useState(""),[p,y]=P.useState(""),[x,b]=P.useState([]),[g,m]=P.useState(!1),[v,w]=P.useState(null),[T,N]=P.useState(null);P.useEffect(()=>{(t==null?void 0:t.role)==="Owner"&&(k(),D())},[t]),P.useEffect(()=>{H()},[e,o,u,h,p]),P.useEffect(()=>{const _=O=>{O.target.closest(".dropdown-container")||N(null)};return document.addEventListener("click",_),()=>document.removeEventListener("click",_)},[]);const k=async()=>{l(!0);try{const _=await W.getAllShopBookings(t.id);n(_)}catch(_){console.error("Failed to load staff bookings:",_)}finally{l(!1)}},D=async()=>{try{const O=(await W.getAllUsers()).filter(F=>F.role!=="Owner");b(O)}catch(_){console.error("Failed to load staff:",_)}},H=()=>{let _=[...e];o!=="all"&&(_=_.filter(O=>O.user_id===o)),u!=="all"&&(_=_.filter(O=>O.status===u)),h&&(_=_.filter(O=>O.date===h)),p&&(_=_.filter(O=>O.customer_name.toLowerCase().includes(p.toLowerCase())||O.service.toLowerCase().includes(p.toLowerCase()))),s(_)},C=_=>{switch(_){case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"scheduled":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},B=_=>{switch(_){case"Barber":return"bg-purple-100 text-purple-800";case"Apprentice":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},R=()=>r.filter(_=>_.status==="completed").reduce((_,O)=>_+O.price,0),I=()=>{const _=new Date().toISOString().split("T")[0];return r.filter(O=>O.date===_)},E=()=>{const _=new Date().toISOString().split("T")[0];return r.filter(O=>O.date>=_&&O.status==="scheduled")},j=_=>{w(_),m(!0),N(null)},L=async _=>{if(confirm(" Are you sure you want to delete this booking? This action cannot be undone."))try{l(!0),await W.deleteBooking(_)?(await k(),alert(" Booking deleted successfully!")):alert(" Failed to delete booking. Please try again.")}catch(O){console.error("Failed to delete booking:",O),alert(" Failed to delete booking. Please try again.")}finally{l(!1)}},V=async()=>{var _;if(v){if(!((_=v.customer_name)!=null&&_.trim())){alert(" Customer name is required");return}if(!v.service){alert(" Service selection is required");return}if(!v.date){alert(" Date is required");return}if(!v.time){alert(" Time is required");return}try{l(!0),await W.updateBooking(v.id,{customer_name:v.customer_name,service:v.service,price:v.price,date:v.date,time:v.time,status:v.status})?(await k(),m(!1),w(null),alert(" Booking updated successfully!")):alert(" Failed to update booking. Please try again.")}catch(O){console.error("Failed to update booking:",O),alert(" Failed to update booking. Please try again.")}finally{l(!1)}}};return(t==null?void 0:t.role)!=="Owner"?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(gm,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Access Denied"}),a.jsx("p",{className:"text-gray-500",children:"Only shop owners can view staff bookings."})]}):a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Staff Bookings Overview"}),a.jsx("p",{className:"text-gray-600",children:"Monitor and manage all staff appointments"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bookings"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]}),a.jsx(Zn,{className:"w-8 h-8 text-blue-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Bookings"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I().length})]}),a.jsx(Pu,{className:"w-8 h-8 text-green-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Upcoming"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E().length})]}),a.jsx(qr,{className:"w-8 h-8 text-orange-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Earnings"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",R().toFixed(2)]})]}),a.jsx(Et,{className:"w-8 h-8 text-purple-500"})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Staff Member"}),a.jsxs("select",{value:o,onChange:_=>c(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Staff"}),x.map(_=>a.jsxs("option",{value:_.id,children:[_.name," (",_.role,")"]},_.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),a.jsxs("select",{value:u,onChange:_=>d(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"scheduled",children:"Scheduled"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),a.jsx("input",{type:"date",value:h,onChange:_=>f(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(wm,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",value:p,onChange:_=>y(_.target.value),placeholder:"Customer or service...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:()=>{c("all"),d("all"),f(""),y("")},className:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 flex items-center justify-center",children:[a.jsx(xw,{className:"w-4 h-4 mr-2"}),"Clear"]})})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("h3",{className:"text-lg font-semibold",children:["Staff Bookings (",r.length,")"]})}),i?a.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-500",children:"Loading bookings..."}):r.length===0?a.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-500",children:"No bookings found matching your filters"}):a.jsx("div",{className:"grid gap-4",children:r.map(_=>{var O,F,X;return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:_.customer_name}),a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C(_.status)}`,children:_.status})]}),a.jsx("p",{className:"text-sm text-gray-600",children:_.service})]}),a.jsxs("div",{className:"relative dropdown-container",children:[a.jsx("button",{onClick:Z=>{Z.stopPropagation(),N(T===_.id?null:_.id)},className:"text-gray-400 hover:text-gray-600 focus:outline-none p-1",children:a.jsx(vm,{className:"w-5 h-5"})}),T===_.id&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-50 border",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:Z=>{Z.stopPropagation(),j(_)},className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:[a.jsx(ym,{className:"w-4 h-4 mr-2"}),"Edit Booking"]}),a.jsxs("button",{onClick:Z=>{Z.stopPropagation(),L(_.id)},className:"flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[a.jsx(Sm,{className:"w-4 h-4 mr-2"}),"Delete Booking"]})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Staff:"}),a.jsxs("div",{className:"mt-1",children:[a.jsx("div",{className:"text-gray-900",children:((O=_.users)==null?void 0:O.name)||"Unknown"}),a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B(((F=_.users)==null?void 0:F.role)||"")}`,children:((X=_.users)==null?void 0:X.role)||"Unknown"})]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Date & Time:"}),a.jsxs("div",{className:"mt-1",children:[a.jsx("div",{className:"text-gray-900",children:new Date(_.date).toLocaleDateString()}),a.jsx("div",{className:"text-gray-600",children:_.time})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-100",children:[a.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["",_.price.toFixed(2)]}),a.jsx("div",{className:"text-xs text-gray-500",children:_.created_at?new Date(_.created_at).toLocaleDateString():"N/A"})]})]},_.id)})})]}),g&&v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Booking"}),a.jsx("button",{onClick:()=>{m(!1),w(null)},className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:""})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Customer Information"}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),a.jsx("input",{type:"text",value:v.customer_name||"",onChange:_=>w({...v,customer_name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter customer name",required:!0})]})})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Service Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service *"}),a.jsxs("select",{value:v.service,onChange:_=>w({...v,service:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select a service"}),Zr.map(_=>a.jsxs("option",{value:_.name,children:[_.name," (",_.duration,"min - ",_.price,")"]},_.name))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price () *"}),a.jsx("input",{type:"number",step:"0.01",value:v.price,onChange:_=>w({...v,price:parseFloat(_.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00",required:!0})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Schedule"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),a.jsx("input",{type:"date",value:v.date,onChange:_=>w({...v,date:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time *"}),a.jsx("input",{type:"time",value:v.time,onChange:_=>w({...v,time:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),a.jsxs("select",{value:v.status,onChange:_=>w({...v,status:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"scheduled",children:"Scheduled"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[a.jsx("button",{onClick:()=>{m(!1),w(null)},className:"px-6 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:i,children:"Cancel"}),a.jsx("button",{onClick:V,disabled:i,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Updating...":"Update Booking"})]})]})]})})})]})},RA=({currentUser:t})=>{var R,I;const[e,n]=P.useState([]),[r,s]=P.useState([]),[i,l]=P.useState(null),[o,c]=P.useState(!1),[u,d]=P.useState(!1),[h,f]=P.useState(""),[p,y]=P.useState("bookings"),[x,b]=P.useState([]),[g,m]=P.useState({dailyTarget:500,weeklyTarget:3e3,monthlyTarget:12e3,openTime:"09:00",closeTime:"18:00",appointmentDuration:30,walkInAllowed:!0,barberCommission:60,apprenticeCommission:40,ownerCommission:100});P.useEffect(()=>{(t==null?void 0:t.role)==="Owner"&&(w(),T(),N(),v())},[t]);const v=async()=>{try{const E=await W.getShopSettings(t.id);E&&m(E)}catch(E){console.error("Failed to load shop settings:",E)}},w=async()=>{try{const E=await W.getAllUsers();n(E.filter(j=>j.id!==t.id))}catch{f("Failed to load users")}},T=async()=>{try{const E=await W.getDailySalesReport();s(E)}catch(E){console.error("Failed to load sales data:",E)}},N=async()=>{try{const E=new Date,j=new Date(E),L=E.getDay(),V=L===0?-6:1-L;j.setDate(E.getDate()+V),j.setHours(0,0,0,0);const _=new Date(j);_.setDate(j.getDate()+6),_.setHours(23,59,59,999);const F=(await W.getAllShopBookings(t.id)).filter(Z=>{const ct=new Date(Z.date);return ct>=j&&ct<=_}),X=await Promise.all((await W.getAllUsers()).map(async Z=>{const ct=F.filter(Kt=>Kt.user_id===Z.id&&Kt.status==="completed"),Dt=ct.reduce((Kt,Rt)=>Kt+Rt.price,0);return{...Z,weeklyEarnings:Dt,serviceCount:ct.length,bookings:ct}}));b(X)}catch(E){console.error("Failed to load staff bookings:",E),f("Failed to load staff booking data")}},k=async(E,j)=>{d(!0);try{await W.updateUserRole(E,j),await w(),c(!1),l(null)}catch{f("Failed to promote user")}finally{d(!1)}},D=async E=>{if(window.confirm("Are you sure you want to remove this user? This action cannot be undone.")){d(!0);try{await W.deleteUser(E),await w()}catch{f("Failed to remove user")}finally{d(!1)}}},H=async()=>{d(!0);try{await W.updateShopSettings(t.id,g),alert("Settings updated successfully!")}catch(E){console.error("Failed to update settings:",E),f("Failed to update settings")}finally{d(!1)}},C=async()=>{try{const E=await W.generateXReport(),j=window.open("","_blank");j&&j.document.write(`
          <html>
            <head><title>X Report - ${new Date().toLocaleDateString()}</title></head>
            <body style="font-family: monospace; padding: 20px;">
              <h2>X REPORT - SALES SUMMARY</h2>
              <p>Date: ${new Date().toLocaleDateString()}</p>
              <p>Time: ${new Date().toLocaleTimeString()}</p>
              <hr>
              <p>Total Sales: $${E.totalSales}</p>
              <p>Total Bookings: ${E.totalBookings}</p>
              <p>Average Booking Value: $${E.averageValue}</p>
              <hr>
              <h3>SALES BY BARBER:</h3>
              ${E.barberSales.map(L=>`<p>${L.name}: $${L.sales} (${L.bookings} bookings)</p>`).join("")}
              <hr>
              <p>Report Generated: ${new Date().toLocaleString()}</p>
            </body>
          </html>
        `)}catch{f("Failed to generate X Report")}},B=async()=>{try{const E=await W.generateZReport(),j=window.open("","_blank");j&&j.document.write(`
          <html>
            <head><title>Z Report - End of Day</title></head>
            <body style="font-family: monospace; padding: 20px;">
              <h2>Z REPORT - END OF DAY</h2>
              <p>Date: ${new Date().toLocaleDateString()}</p>
              <p>Time: ${new Date().toLocaleTimeString()}</p>
              <hr>
              <p>FINAL DAILY TOTALS:</p>
              <p>Total Sales: $${E.totalSales}</p>
              <p>Total Bookings: ${E.totalBookings}</p>
              <p>Cash Sales: $${E.cashSales}</p>
              <p>Card Sales: $${E.cardSales}</p>
              <hr>
              <h3>DAILY TARGET ANALYSIS:</h3>
              <p>Daily Target: $${g.dailyTarget}</p>
              <p>Actual Sales: $${E.totalSales}</p>
              <p>Variance: $${E.totalSales-g.dailyTarget}</p>
              <p>Achievement: ${(E.totalSales/g.dailyTarget*100).toFixed(1)}%</p>
              <hr>
              <p>** END OF DAY REPORT **</p>
            </body>
          </html>
        `)}catch{f("Failed to generate Z Report")}};return(t==null?void 0:t.role)!=="Owner"?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(bm,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Access Denied"}),a.jsx("p",{className:"text-gray-500",children:"Only shop owners can access this panel."})]}):a.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Admin Panel"}),a.jsx("p",{className:"text-gray-600",children:"Manage your barbershop operations"})]}),h&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:[h,a.jsx("button",{onClick:()=>f(""),className:"float-right font-bold",children:""})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6",children:a.jsx("nav",{className:"-mb-px grid grid-cols-4 gap-0.5 sm:flex sm:space-x-0",children:[{id:"bookings",label:"Staff Bookings",icon:Zn,shortLabel:"Staff"},{id:"users",label:"User Management",icon:qr,shortLabel:"Users"},{id:"reports",label:"POS Reports",icon:Pr,shortLabel:"Reports"},{id:"payroll",label:"Payroll",icon:Et,shortLabel:"Payroll"},{id:"expenses",label:"Expenses",icon:Mu,shortLabel:"Expenses"},{id:"settings",label:"Shop Settings",icon:Oh,shortLabel:"Settings"},{id:"analytics",label:"Analytics",icon:Rh,shortLabel:"Analytics"}].map(({id:E,label:j,icon:L,shortLabel:V})=>a.jsxs("button",{onClick:()=>y(E),className:`py-2 px-1 border-b-2 font-medium text-xs sm:text-sm flex flex-col sm:flex-row items-center justify-center sm:justify-start space-y-0.5 sm:space-y-0 sm:space-x-2 ${p===E?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[a.jsx(L,{className:"w-4 h-4 sm:w-4 sm:h-4"}),a.jsx("span",{className:"hidden sm:inline",children:j}),a.jsx("span",{className:"sm:hidden text-center leading-tight",children:V})]},E))})}),p==="users"&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[a.jsx(qr,{className:"w-5 h-5 mr-2"}),"Staff Management"]}),a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Staff Member"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(E=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center",children:a.jsx(zn,{className:"w-5 h-5 text-white"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),a.jsx("div",{className:"text-sm text-gray-500",children:E.email})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${E.role==="Barber"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:E.role})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E.created_at?new Date(E.created_at).toLocaleDateString():"Unknown"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[E.role==="Apprentice"&&a.jsxs("button",{onClick:()=>{l(E),c(!0)},className:"text-green-600 hover:text-green-900 flex items-center",children:[a.jsx(_m,{className:"w-4 h-4 mr-1"}),"Promote"]}),a.jsxs("button",{onClick:()=>E.id&&D(E.id),className:"text-red-600 hover:text-red-900 flex items-center",children:[a.jsx(_w,{className:"w-4 h-4 mr-1"}),"Remove"]})]})]},E.id))})]}),e.length===0&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No staff members found. Invite barbers and apprentices to join your shop."})]})]})}),p==="bookings"&&a.jsx(DA,{currentUser:t}),p==="reports"&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(Pr,{className:"w-5 h-5 mr-2"}),"Daily Reports"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:C,className:"w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 flex items-center justify-center",children:[a.jsx(Pu,{className:"w-4 h-4 mr-2"}),"Generate X Report (Current Sales)"]}),a.jsxs("button",{onClick:B,className:"w-full bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 flex items-center justify-center",children:[a.jsx(Pr,{className:"w-4 h-4 mr-2"}),"Generate Z Report (End of Day)"]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Today's Summary"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Daily Target:"}),a.jsxs("span",{className:"font-semibold",children:["$",g.dailyTarget]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Current Sales:"}),a.jsxs("span",{className:"font-semibold text-green-600",children:["$",((R=r.find(E=>E.date===new Date().toISOString().split("T")[0]))==null?void 0:R.total)||0]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Bookings Today:"}),a.jsx("span",{className:"font-semibold",children:((I=r.find(E=>E.date===new Date().toISOString().split("T")[0]))==null?void 0:I.bookings)||0})]})]})]})]})}),p==="payroll"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Gross Pay"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",x.reduce((E,j)=>{const L=j.role==="Barber"?g.barberCommission:j.role==="Apprentice"?g.apprenticeCommission:100;return E+(j.weeklyEarnings||0)*L/100},0).toFixed(2)]})]}),a.jsx(Et,{className:"w-8 h-8 text-blue-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Net Pay"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",x.reduce((E,j)=>{const L=j.role==="Barber"?g.barberCommission:j.role==="Apprentice"?g.apprenticeCommission:100,V=(j.weeklyEarnings||0)*L/100,_=V*.2,O=V>1e3?V*.15:0,F=V-_-O;return E+F},0).toFixed(2)]})]}),a.jsx(Et,{className:"w-8 h-8 text-green-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Deductions"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["",x.reduce((E,j)=>{const L=j.role==="Barber"?g.barberCommission:j.role==="Apprentice"?g.apprenticeCommission:100,V=(j.weeklyEarnings||0)*L/100,_=V*.2,O=V>1e3?V*.15:0;return E+_+O},0).toFixed(2)]})]}),a.jsx(Et,{className:"w-8 h-8 text-red-500"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[a.jsx(Et,{className:"w-5 h-5 mr-2"}),"Staff Payroll Summary - This Week"]}),a.jsx("div",{className:"space-y-4 md:hidden",children:x.map(E=>{const j=E.weeklyEarnings||0,L=E.role==="Barber"?g.barberCommission:E.role==="Apprentice"?g.apprenticeCommission:100,V=j*L/100,_=V*.2,O=V>1e3?V*.15:0,F=V-_-O;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center mr-3",children:a.jsx(zn,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),a.jsx("div",{className:"text-sm text-gray-500",children:E.role})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Commission Rate:"}),a.jsxs("div",{className:"font-semibold",children:[L,"%"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Services:"}),a.jsxs("div",{className:"font-semibold",children:[E.serviceCount||0," services"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Gross Sales:"}),a.jsxs("div",{className:"font-semibold",children:["",j.toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Gross Pay:"}),a.jsxs("div",{className:"font-semibold text-blue-600",children:["",V.toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Social Insurance:"}),a.jsxs("div",{className:"font-semibold text-red-600",children:["-",_.toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Income Tax:"}),a.jsxs("div",{className:"font-semibold text-red-600",children:["-",O.toFixed(2)]})]}),a.jsxs("div",{className:"col-span-2 pt-2 border-t border-gray-200",children:[a.jsx("span",{className:"text-gray-600",children:"Net Pay:"}),a.jsxs("div",{className:"font-bold text-green-600 text-lg",children:["",F.toFixed(2)]})]})]})]},E.id)})}),a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Staff Member"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission Rate"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross Sales"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross Pay"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Social Insurance"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Income Tax"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Pay"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Services"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(E=>{const j=E.weeklyEarnings||0,L=E.role==="Barber"?g.barberCommission:E.role==="Apprentice"?g.apprenticeCommission:100,V=j*L/100,_=V*.2,O=V>1e3?V*.15:0,F=V-_-O;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center",children:a.jsx(zn,{className:"w-5 h-5 text-white"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),a.jsx("div",{className:"text-sm text-gray-500",children:E.role})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[L,"%"]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",j.toFixed(2)]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:["",V.toFixed(2)]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-sm font-semibold text-red-600",children:["-",_.toFixed(2)]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-sm font-semibold text-red-600",children:["-",O.toFixed(2)]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-sm font-bold text-green-600",children:["",F.toFixed(2)]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[E.serviceCount||0," services"]})]},E.id)})})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payroll Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Social Insurance Rate:"}),a.jsx("span",{className:"font-semibold",children:"20%"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Income Tax Rate:"}),a.jsx("span",{className:"font-semibold",children:"15% (if > 1000)"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Barber Commission:"}),a.jsxs("span",{className:"font-semibold",children:[g.barberCommission,"%"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Apprentice Commission:"}),a.jsxs("span",{className:"font-semibold",children:[g.apprenticeCommission,"%"]})]})]})]})]})]}),p==="settings"&&a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[a.jsx(Oh,{className:"w-5 h-5 mr-2"}),"Shop Settings"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Sales Targets"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Daily Target ($)"}),a.jsx("input",{type:"number",value:g.dailyTarget,onChange:E=>m({...g,dailyTarget:Number(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weekly Target ($)"}),a.jsx("input",{type:"number",value:g.weeklyTarget,onChange:E=>m({...g,weeklyTarget:Number(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Target ($)"}),a.jsx("input",{type:"number",value:g.monthlyTarget,onChange:E=>m({...g,monthlyTarget:Number(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Operating Hours"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opening Time"}),a.jsx("input",{type:"time",value:g.openTime,onChange:E=>m({...g,openTime:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Closing Time"}),a.jsx("input",{type:"time",value:g.closeTime,onChange:E=>m({...g,closeTime:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Appointment Duration (minutes)"}),a.jsxs("select",{value:g.appointmentDuration,onChange:E=>m({...g,appointmentDuration:Number(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:15,children:"15 minutes"}),a.jsx("option",{value:30,children:"30 minutes"}),a.jsx("option",{value:45,children:"45 minutes"}),a.jsx("option",{value:60,children:"60 minutes"})]})]})]})]}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[a.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center",children:[a.jsx(Et,{className:"w-5 h-5 mr-2"}),"Staff Commission Rates"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barber Commission (%)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",min:"0",max:"100",value:g.barberCommission,onChange:E=>m({...g,barberCommission:Number(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"absolute right-3 top-2 text-gray-500",children:"%"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How much barbers earn per service"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apprentice Commission (%)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",min:"0",max:"100",value:g.apprenticeCommission,onChange:E=>m({...g,apprenticeCommission:Number(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"absolute right-3 top-2 text-gray-500",children:"%"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How much apprentices earn per service"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner Commission (%)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",min:"0",max:"100",value:g.ownerCommission,onChange:E=>m({...g,ownerCommission:Number(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"absolute right-3 top-2 text-gray-500",children:"%"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your commission rate"})]})]}),a.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Commission Examples (on $30 service):"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-green-700",children:"Barber: "}),a.jsxs("span",{children:["$",(30*g.barberCommission/100).toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-700",children:"Apprentice: "}),a.jsxs("span",{children:["$",(30*g.apprenticeCommission/100).toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-purple-700",children:"Owner: "}),a.jsxs("span",{children:["$",(30*g.ownerCommission/100).toFixed(2)]})]})]})]})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{onClick:H,disabled:u,className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 disabled:opacity-50",children:u?"Saving...":"Save Settings"})})]}),p==="expenses"&&a.jsx(TA,{currentUser:t}),p==="analytics"&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Week"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",r.slice(-7).reduce((E,j)=>E+j.total,0)]})]}),a.jsx(Lu,{className:"w-8 h-8 text-green-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Weekly Target"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",g.weeklyTarget]})]}),a.jsx(Et,{className:"w-8 h-8 text-blue-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Achievement"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(r.slice(-7).reduce((E,j)=>E+j.total,0)/g.weeklyTarget*100).toFixed(1),"%"]})]}),a.jsx(Rh,{className:"w-8 h-8 text-purple-500"})]})})]})}),o&&i&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Promote User"}),a.jsxs("p",{className:"text-gray-600 mb-4",children:["Promote ",i.name," from Apprentice to Barber?"]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>(i==null?void 0:i.id)&&k(i.id,"Barber"),disabled:u,className:"flex-1 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 disabled:opacity-50",children:u?"Promoting...":"Promote to Barber"}),a.jsx("button",{onClick:()=>{c(!1),l(null)},className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})})]})},IA=({currentUser:t,onBookingCreated:e})=>{const[n,r]=P.useState([]),[s,i]=P.useState(""),[l,o]=P.useState(""),[c,u]=P.useState(""),[d,h]=P.useState(""),[f,p]=P.useState(""),[y,x]=P.useState(""),[b,g]=P.useState(!1),[m,v]=P.useState("");P.useEffect(()=>{(t==null?void 0:t.role)==="Owner"&&w()},[t]);const w=async()=>{try{console.log("Loading barbers...");const k=await W.getAllBarbers();console.log("Loaded barbers:",k),r(k),k.length===0&&v("No barbers found. Please ensure staff accounts are set up.")}catch(k){console.error("Failed to load barbers:",k),v("Failed to load barbers")}},T=async k=>{if(k.preventDefault(),!s){v("Please select a barber");return}if(!l.trim()){v("Please enter customer name");return}if(!c){v("Please select a service");return}if(!d||parseFloat(d)<=0){v("Please enter a valid price");return}if(!f){v("Please select a date");return}if(!y){v("Please select a time");return}g(!0),v("");try{const D={user_id:s,customer_id:"",customer_name:l.trim(),service:c,price:parseFloat(d),date:f,time:y,status:"scheduled"};console.log("Creating booking with data:",D);const H=await W.addBooking(D);if(console.log("Booking creation result:",H),H)o(""),u(""),h(""),p(""),x(""),i(""),e(),alert("Booking created successfully!");else throw new Error("Booking creation returned null")}catch(D){console.error("Booking creation error:",D);const H=D instanceof Error?D.message:"Unknown error occurred";v(`Failed to create booking: ${H}`)}finally{g(!1)}},N=()=>{const k=[];for(let D=9;D<=17;D++)for(let H=0;H<60;H+=30){const C=`${D.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`;k.push(C)}return k};return(t==null?void 0:t.role)!=="Owner"?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(qr,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Access Denied"}),a.jsx("p",{className:"text-gray-500",children:"Only shop owners can book appointments for other barbers."})]}):a.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Book Appointment for Staff"}),a.jsx("p",{className:"text-gray-600",children:"Create bookings for your barbers and apprentices"})]}),m&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:m}),a.jsxs("form",{onSubmit:T,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(qr,{className:"w-4 h-4 inline mr-1"}),"Select Barber/Apprentice"]}),a.jsxs("select",{value:s,onChange:k=>i(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Choose a barber..."}),n.map(k=>a.jsxs("option",{value:k.id,children:[k.name," (",k.role,")"]},k.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(zn,{className:"w-4 h-4 inline mr-1"}),"Customer Name"]}),a.jsx("input",{type:"text",value:l,onChange:k=>o(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter customer's full name",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service"}),a.jsxs("select",{value:c,onChange:k=>u(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select a service..."}),Zr.map(k=>a.jsxs("option",{value:k.name,children:[k.name," (",k.duration,"min - ",k.price,")"]},k.name))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Et,{className:"w-4 h-4 inline mr-1"}),"Price"]}),a.jsx("input",{type:"number",value:d,onChange:k=>h(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Zn,{className:"w-4 h-4 inline mr-1"}),"Date"]}),a.jsx("input",{type:"date",value:f,onChange:k=>p(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:new Date().toISOString().split("T")[0],required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Pu,{className:"w-4 h-4 inline mr-1"}),"Time"]}),a.jsxs("select",{value:y,onChange:k=>x(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select time..."}),N().map(k=>a.jsx("option",{value:k,children:k},k))]})]})]}),a.jsx("button",{type:"submit",disabled:b,className:"w-full bg-blue-500 text-white py-3 px-4 rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:b?"Creating Booking...":"Create Booking"})]}),n.length===0&&a.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsx("p",{className:"text-yellow-800",children:"No barbers or apprentices found. Add staff members to your shop first."})})]})},de=t=>`${t.toFixed(2)}`,OA=({currentUser:t})=>{const[e,n]=P.useState("current-month"),[r,s]=P.useState("profit-loss"),[i,l]=P.useState(!1),[o,c]=P.useState(null),u=[{value:"current-month",label:"Current Month"},{value:"last-month",label:"Last Month"},{value:"current-quarter",label:"Current Quarter"},{value:"last-quarter",label:"Last Quarter"},{value:"current-year",label:"Current Year"},{value:"last-year",label:"Last Year"},{value:"custom",label:"Custom Period"}],d=[{value:"profit-loss",label:"Profit & Loss Statement",icon:Lu},{value:"tax-report",label:"TRNC Tax Report",icon:Mu},{value:"vat-report",label:"VAT Return",icon:Pr},{value:"payroll-summary",label:"Payroll Summary",icon:Et},{value:"transaction-log",label:"Transaction Log",icon:vw}];P.useEffect(()=>{h()},[e,r]);const h=async()=>{l(!0);try{const C=f(e);switch(r){case"profit-loss":const B=await p(C);c(B);break;case"tax-report":const R=await y(C);c(R);break;case"vat-report":const I=await x(C);c(I);break;case"payroll-summary":const E=await b(C);c(E);break;case"transaction-log":const j=await g(C);c(j);break}}catch(C){console.error("Failed to generate report:",C)}finally{l(!1)}},f=C=>{const B=new Date,R=B.getFullYear(),I=B.getMonth();switch(C){case"current-month":return{start:new Date(R,I,1),end:new Date(R,I+1,0)};case"last-month":return{start:new Date(R,I-1,1),end:new Date(R,I,0)};case"current-quarter":const E=Math.floor(I/3)*3;return{start:new Date(R,E,1),end:new Date(R,E+3,0)};case"current-year":return{start:new Date(R,0,1),end:new Date(R,11,31)};default:return{start:new Date(R,I,1),end:new Date(R,I+1,0)}}},p=async C=>{const B=await W.getBookingsByDateRange(t.id,C.start.toISOString().split("T")[0],C.end.toISOString().split("T")[0]),R=B.filter(_=>_.status==="completed").reduce((_,O)=>_+O.price,0),I=await m(B),E=await W.getExpenseRecords(t.id,C.start.toISOString().split("T")[0],C.end.toISOString().split("T")[0]),j={rent:0,utilities:0,supplies:0,marketing:0,insurance:0,other:0};E.forEach(_=>{const O=_.category.toLowerCase();O in j?j[O]+=_.amount:j.other+=_.amount});const L=Object.values(j).reduce((_,O)=>_+O,0),V=I+L;return{period:`${C.start.toLocaleDateString()} - ${C.end.toLocaleDateString()}`,revenue:{services:R,products:0,other:0,total:R},expenses:{salaries:I,rent:j.rent,utilities:j.utilities,supplies:j.supplies,marketing:j.marketing,insurance:j.insurance,other:j.other,total:V},grossProfit:R-I,netProfit:R-V}},y=async C=>{const B=await p(C),R=.18,I=.15,E=.2,j=B.revenue.total*R,L=B.expenses.total*R*.3,V=B.netProfit>0?B.netProfit*I:0,_=B.expenses.salaries*E;return{period:B.period,totalRevenue:B.revenue.total,totalExpenses:B.expenses.total,netIncome:B.netProfit,vatCollected:j,vatPaid:L,vatOwed:j-L,socialInsurance:_,incomeTax:V}},x=async C=>{const B=await y(C);return{period:B.period,taxableSupplies:B.totalRevenue,outputVAT:B.vatCollected,inputVAT:B.vatPaid,netVATDue:B.vatOwed,sections:{section1:{value:B.totalRevenue,vat:B.vatCollected},section2:{value:0,vat:0},section3:{value:0,vat:0}}}},b=async C=>{const R=(await W.getAllUsers()).filter(E=>E.role!=="Owner"),I=await Promise.all(R.map(async E=>{const j=await W.getEarningsByDateRange(E.id,C.start.toISOString().split("T")[0],C.end.toISOString().split("T")[0]),L=E.role==="Barber"?60:40,V=j.total,_=V*L/100,O=_*.2,F=_>1e3?_*.15:0,X=_-O-F;return{name:E.name,role:E.role,grossSales:V,commissionRate:L,grossCommission:_,socialInsurance:O,incomeTax:F,netPay:X,services:j.bookings}}));return{period:`${C.start.toLocaleDateString()} - ${C.end.toLocaleDateString()}`,employees:I,totals:{grossSales:I.reduce((E,j)=>E+j.grossSales,0),totalCommissions:I.reduce((E,j)=>E+j.grossCommission,0),totalSocialInsurance:I.reduce((E,j)=>E+j.socialInsurance,0),totalIncomeTax:I.reduce((E,j)=>E+j.incomeTax,0),totalNetPay:I.reduce((E,j)=>E+j.netPay,0)}}},g=async C=>{const B=await W.getBookingsByDateRange(t.id,C.start.toISOString().split("T")[0],C.end.toISOString().split("T")[0]);return{period:`${C.start.toLocaleDateString()} - ${C.end.toLocaleDateString()}`,transactions:B.map(R=>{var I;return{date:R.date,time:R.time,customer:R.customer_name,service:R.service,amount:R.price,vat:R.price*.18,status:R.status,receipt:`RCP-${(I=R.id)==null?void 0:I.slice(-6).toUpperCase()}`}}),summary:{totalTransactions:B.length,totalValue:B.reduce((R,I)=>R+I.price,0),totalVAT:B.reduce((R,I)=>R+I.price*.18,0),completedTransactions:B.filter(R=>R.status==="completed").length}}},m=async C=>{let B=0;for(const R of C)if(R.status==="completed"){const I=await W.getUserById(R.user_id);if(I&&I.role!=="Owner"){const E=I.role==="Barber"?60:40;B+=R.price*E/100}}return B},v=()=>{if(!o)return;let C="";const B=new Date().toLocaleDateString();switch(r){case"profit-loss":C=w(o,B);break;case"tax-report":C=T(o,B);break;case"vat-report":C=N(o,B);break;case"payroll-summary":C=k(o,B);break;case"transaction-log":C=D(o,B);break}const R=new Blob([C],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a"),E=URL.createObjectURL(R);I.setAttribute("href",E),I.setAttribute("download",`${r}-${e}-${B}.csv`),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I)},w=(C,B)=>`PROFIT & LOSS STATEMENT - ${t.shop_name}
Generated: ${B}
Period: ${C.period}

REVENUE
Services,${C.revenue.services}
Products,${C.revenue.products}
Other Income,${C.revenue.other}
Total Revenue,${C.revenue.total}

EXPENSES
Staff Commissions,${C.expenses.salaries}
Rent,${C.expenses.rent}
Utilities,${C.expenses.utilities}
Supplies,${C.expenses.supplies}
Marketing,${C.expenses.marketing}
Insurance,${C.expenses.insurance}
Other Expenses,${C.expenses.other}
Total Expenses,${C.expenses.total}

PROFIT ANALYSIS
Gross Profit,${C.grossProfit}
Net Profit,${C.netProfit}
Profit Margin,${(C.netProfit/C.revenue.total*100).toFixed(2)}%`,T=(C,B)=>`TRNC TAX REPORT - ${t.shop_name}
Generated: ${B}
Period: ${C.period}

INCOME SUMMARY
Total Revenue,${C.totalRevenue}
Total Expenses,${C.totalExpenses}
Net Income,${C.netIncome}

VAT CALCULATION
VAT Collected (18%),${C.vatCollected}
VAT Paid,${C.vatPaid}
VAT Owed,${C.vatOwed}

SOCIAL CONTRIBUTIONS
Social Insurance,${C.socialInsurance}
Income Tax,${C.incomeTax}

TOTAL TAX OBLIGATION,${C.vatOwed+C.socialInsurance+C.incomeTax}`,N=(C,B)=>`VAT RETURN - ${t.shop_name}
Generated: ${B}
Period: ${C.period}

SECTION 1 - STANDARD RATE SUPPLIES (18%)
Value of Supplies,${C.sections.section1.value}
Output VAT,${C.sections.section1.vat}

SECTION 2 - ZERO RATE SUPPLIES
Value of Supplies,${C.sections.section2.value}
Output VAT,${C.sections.section2.vat}

SECTION 3 - EXEMPT SUPPLIES
Value of Supplies,${C.sections.section3.value}

VAT SUMMARY
Total Taxable Supplies,${C.taxableSupplies}
Total Output VAT,${C.outputVAT}
Total Input VAT,${C.inputVAT}
Net VAT Due,${C.netVATDue}`,k=(C,B)=>{let R=`PAYROLL SUMMARY - ${t.shop_name}
Generated: ${B}
Period: ${C.period}

Employee,Role,Gross Sales,Commission Rate,Gross Commission,Social Insurance,Income Tax,Net Pay,Services
`;return C.employees.forEach(I=>{R+=`${I.name},${I.role},${I.grossSales},${I.commissionRate}%,${I.grossCommission},${I.socialInsurance},${I.incomeTax},${I.netPay},${I.services}
`}),R+=`
TOTALS
Total Gross Sales,${C.totals.grossSales}
Total Commissions,${C.totals.totalCommissions}
Total Social Insurance,${C.totals.totalSocialInsurance}
Total Income Tax,${C.totals.totalIncomeTax}
Total Net Pay,${C.totals.totalNetPay}`,R},D=(C,B)=>{let R=`TRANSACTION LOG - ${t.shop_name}
Generated: ${B}
Period: ${C.period}

Date,Time,Customer,Service,Amount,VAT,Status,Receipt No
`;return C.transactions.forEach(I=>{R+=`${I.date},${I.time},${I.customer},${I.service},${I.amount},${I.vat},${I.status},${I.receipt}
`}),R+=`
SUMMARY
Total Transactions,${C.summary.totalTransactions}
Total Value,${C.summary.totalValue}
Total VAT,${C.summary.totalVAT}
Completed Transactions,${C.summary.completedTransactions}`,R},H=()=>{window.print()};return(t==null?void 0:t.role)!=="Owner"?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(Pr,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Access Denied"}),a.jsx("p",{className:"text-gray-500",children:"Only shop owners can access accounting reports."})]}):a.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Accounting Reports"}),a.jsx("p",{className:"text-gray-600",children:"TRNC compliant financial reports for your accountant"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),a.jsx("select",{value:r,onChange:C=>s(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:d.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Period"}),a.jsx("select",{value:e,onChange:C=>n(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:u.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]}),a.jsxs("div",{className:"flex items-end space-x-2",children:[a.jsxs("button",{onClick:v,className:"flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center justify-center",children:[a.jsx(pm,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),a.jsx("button",{onClick:H,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 flex items-center justify-center",children:a.jsx(Sw,{className:"w-4 h-4"})})]})]})}),a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("strong",{children:"Real Financial Data:"})," Your reports now use actual expense data from your business. To input real expenses like rent, utilities, supplies, marketing, and insurance costs, go to the ",a.jsx("strong",{children:"Expense Manager"})," in your dashboard. All expenses you record will automatically appear in these accounting reports, giving you accurate financial insights for TRNC tax compliance."]}),a.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"If no expenses are recorded for a category, it will show $0.00 in the reports."})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:i?a.jsx("div",{className:"text-center py-8",children:a.jsx("div",{className:"text-gray-500",children:"Generating report..."})}):o?a.jsxs("div",{className:"print:shadow-none",children:[r==="profit-loss"&&a.jsx(PA,{data:o,shopName:t.shop_name}),r==="tax-report"&&a.jsx(MA,{data:o,shopName:t.shop_name}),r==="vat-report"&&a.jsx(LA,{data:o,shopName:t.shop_name}),r==="payroll-summary"&&a.jsx(BA,{data:o,shopName:t.shop_name}),r==="transaction-log"&&a.jsx($A,{data:o,shopName:t.shop_name})]}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Select a report type to generate"})})]})},PA=({data:t,shopName:e})=>a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:e}),a.jsx("h3",{className:"text-xl",children:"Profit & Loss Statement"}),a.jsx("p",{className:"text-gray-600",children:t.period})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold mb-4 text-green-700",children:"REVENUE"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Services"}),a.jsx("span",{children:de(t.revenue.services)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Products"}),a.jsx("span",{children:de(t.revenue.products)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Other Income"}),a.jsx("span",{children:de(t.revenue.other)})]}),a.jsxs("div",{className:"flex justify-between font-bold border-t pt-2",children:[a.jsx("span",{children:"Total Revenue"}),a.jsx("span",{children:de(t.revenue.total)})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold mb-4 text-red-700",children:"EXPENSES"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Staff Commissions"}),a.jsx("span",{children:de(t.expenses.salaries)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Rent"}),a.jsx("span",{children:de(t.expenses.rent)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Utilities"}),a.jsx("span",{children:de(t.expenses.utilities)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Supplies"}),a.jsx("span",{children:de(t.expenses.supplies)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Marketing"}),a.jsx("span",{children:de(t.expenses.marketing)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Insurance"}),a.jsx("span",{children:de(t.expenses.insurance)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Other"}),a.jsx("span",{children:de(t.expenses.other)})]}),a.jsxs("div",{className:"flex justify-between font-bold border-t pt-2",children:[a.jsx("span",{children:"Total Expenses"}),a.jsx("span",{children:de(t.expenses.total)})]})]})]})]}),a.jsxs("div",{className:"mt-8 pt-6 border-t",children:[a.jsx("h4",{className:"text-lg font-semibold mb-4",children:"PROFIT ANALYSIS"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-700",children:de(t.grossProfit)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Gross Profit"})]}),a.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-700",children:de(t.netProfit)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Net Profit"})]}),a.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:[(t.netProfit/t.revenue.total*100).toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Profit Margin"})]})]})]})]}),MA=({data:t,shopName:e})=>a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:e}),a.jsx("h3",{className:"text-xl",children:"TRNC Tax Report"}),a.jsx("p",{className:"text-gray-600",children:t.period})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold mb-4",children:"INCOME SUMMARY"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total Revenue"}),a.jsx("span",{children:de(t.totalRevenue)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total Expenses"}),a.jsx("span",{children:de(t.totalExpenses)})]}),a.jsxs("div",{className:"flex justify-between font-bold border-t pt-2",children:[a.jsx("span",{children:"Net Income"}),a.jsx("span",{children:de(t.netIncome)})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold mb-4",children:"TAX OBLIGATIONS"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"VAT Collected (18%)"}),a.jsx("span",{children:de(t.vatCollected)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"VAT Paid"}),a.jsx("span",{children:de(t.vatPaid)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Net VAT Owed"}),a.jsx("span",{children:de(t.vatOwed)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Social Insurance"}),a.jsx("span",{children:de(t.socialInsurance)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Income Tax"}),a.jsx("span",{children:de(t.incomeTax)})]}),a.jsxs("div",{className:"flex justify-between font-bold border-t pt-2 text-red-700",children:[a.jsx("span",{children:"Total Tax Due"}),a.jsx("span",{children:de(t.vatOwed+t.socialInsurance+t.incomeTax)})]})]})]})]})]}),LA=({data:t,shopName:e})=>a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:e}),a.jsx("h3",{className:"text-xl",children:"VAT Return"}),a.jsx("p",{className:"text-gray-600",children:t.period})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Section 1 - Standard Rate Supplies (18%)"}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Value of Supplies:"}),a.jsxs("span",{children:["$",t.sections.section1.value.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Output VAT:"}),a.jsxs("span",{children:["$",t.sections.section1.vat.toFixed(2)]})]})]}),a.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"VAT Summary"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total Output VAT:"}),a.jsxs("span",{children:["$",t.outputVAT.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total Input VAT:"}),a.jsxs("span",{children:["$",t.inputVAT.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between font-bold border-t pt-2",children:[a.jsx("span",{children:"Net VAT Due:"}),a.jsxs("span",{children:["$",t.netVATDue.toFixed(2)]})]})]})]})]})]}),BA=({data:t,shopName:e})=>a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:e}),a.jsx("h3",{className:"text-xl",children:"Payroll Summary"}),a.jsx("p",{className:"text-gray-600",children:t.period})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full border-collapse border border-gray-300",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Employee"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Role"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Gross Sales"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Commission"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Social Insurance"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Income Tax"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Net Pay"})]})}),a.jsxs("tbody",{children:[t.employees.map((n,r)=>a.jsxs("tr",{children:[a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:n.name}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:n.role}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right",children:["$",n.grossSales.toFixed(2)]}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right",children:["$",n.grossCommission.toFixed(2)]}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right",children:["$",n.socialInsurance.toFixed(2)]}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right",children:["$",n.incomeTax.toFixed(2)]}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right font-bold",children:["$",n.netPay.toFixed(2)]})]},r)),a.jsxs("tr",{className:"bg-gray-50 font-bold",children:[a.jsx("td",{className:"border border-gray-300 px-4 py-2",colSpan:2,children:"TOTALS"}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right",children:["$",t.totals.grossSales.toFixed(2)]}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right",children:["$",t.totals.totalCommissions.toFixed(2)]}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right",children:["$",t.totals.totalSocialInsurance.toFixed(2)]}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right",children:["$",t.totals.totalIncomeTax.toFixed(2)]}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right",children:["$",t.totals.totalNetPay.toFixed(2)]})]})]})]})})]}),$A=({data:t,shopName:e})=>a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:e}),a.jsx("h3",{className:"text-xl",children:"Transaction Log"}),a.jsx("p",{className:"text-gray-600",children:t.period})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full border-collapse border border-gray-300",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Date"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Customer"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Service"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Amount"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"VAT"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Receipt"})]})}),a.jsx("tbody",{children:t.transactions.map((n,r)=>a.jsxs("tr",{children:[a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:n.date}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:n.customer}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:n.service}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right",children:["$",n.amount.toFixed(2)]}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right",children:["$",n.vat.toFixed(2)]}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:n.receipt})]},r))})]})}),a.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-700",children:t.summary.totalTransactions}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Transactions"})]}),a.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-700",children:["$",t.summary.totalValue.toFixed(2)]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Value"})]}),a.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[a.jsxs("div",{className:"text-2xl font-bold text-orange-700",children:["$",t.summary.totalVAT.toFixed(2)]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total VAT"})]}),a.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-700",children:t.summary.completedTransactions}),a.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]})]})]});function FA(){const[t,e]=P.useState(null),[n,r]=P.useState(!0),[s,i]=P.useState("calendar"),[l,o]=P.useState({email:"",password:"",name:"",role:"Barber",shopName:""}),[c,u]=P.useState(!1),[d,h]=P.useState(""),[f,p]=P.useState(!1);P.useEffect(()=>{const b=localStorage.getItem("current_barber_user");if(b)try{e(JSON.parse(b))}catch{localStorage.removeItem("current_barber_user")}},[]);const y=async b=>{b.preventDefault(),h(""),p(!0);try{if(n){if(!l.email.includes("@")||l.email.length<5){h("Please enter a valid email address");return}if(l.password.length<6){h("Password must be at least 6 characters long");return}const g=await W.login(l.email,l.password);if(g){const m={id:g.id,name:g.name,email:g.email,role:g.role,shop_name:g.shop_name};e(m),localStorage.setItem("current_barber_user",JSON.stringify(m))}else h("Invalid email or password")}else{if(!l.email.includes("@")||l.email.length<5){h("Please enter a valid email address");return}if(l.password.length<6){h("Password must be at least 6 characters long");return}if(l.name.length<2){h("Please enter your full name");return}if(l.role==="Owner"&&l.shopName.length<2){h("Please enter your shop name");return}const g={name:l.name,email:l.email,password:l.password,role:l.role,shop_name:l.role==="Owner"?l.shopName:"Default Shop"},m=await W.register(g);if(m){const v={id:m.id,name:m.name,email:m.email,role:m.role,shop_name:m.shop_name};e(v),localStorage.setItem("current_barber_user",JSON.stringify(v))}}}catch(g){h(g.message||"Something went wrong. Please try again.")}finally{p(!1)}},x=()=>{e(null),localStorage.removeItem("current_barber_user"),o({email:"",password:"",name:"",role:"Barber",shopName:""})};return t?a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center py-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ih,{className:"h-8 w-8 text-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Barber POS System"}),a.jsx("p",{className:"text-sm text-gray-500",children:t.shop_name})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"text-sm text-gray-700",children:[t.name," (",t.role,")"]}),a.jsx("button",{onClick:x,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Sign Out"})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-6 lg:px-8 py-4 sm:py-6",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-1 sm:flex sm:space-x-4 mb-6",children:[a.jsxs("button",{onClick:()=>i("calendar"),className:`flex flex-col sm:flex-row items-center justify-center px-1 sm:px-4 py-2 rounded-lg transition-colors text-xs sm:text-base ${s==="calendar"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(Zn,{className:"h-4 w-4 sm:h-4 sm:w-4 mb-1 sm:mb-0 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Calendar"}),a.jsx("span",{className:"sm:hidden text-center leading-tight",children:"Calendar"})]}),a.jsxs("button",{onClick:()=>i("earnings"),className:`flex flex-col sm:flex-row items-center justify-center px-1 sm:px-4 py-2 rounded-lg transition-colors text-xs sm:text-base ${s==="earnings"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(Lu,{className:"h-4 w-4 sm:h-4 sm:w-4 mb-1 sm:mb-0 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Earnings"}),a.jsx("span",{className:"sm:hidden text-center leading-tight",children:"Earnings"})]}),a.jsxs("button",{onClick:()=>i("customers"),className:`flex flex-col sm:flex-row items-center justify-center px-1 sm:px-4 py-2 rounded-lg transition-colors text-xs sm:text-base ${s==="customers"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(qr,{className:"h-4 w-4 sm:h-4 sm:w-4 mb-1 sm:mb-0 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Customers"}),a.jsx("span",{className:"sm:hidden text-center leading-tight",children:"Customers"})]}),(t==null?void 0:t.role)==="Owner"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("owner-booking"),className:`flex flex-col sm:flex-row items-center justify-center px-1 sm:px-4 py-2 rounded-lg transition-colors text-xs sm:text-base ${s==="owner-booking"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(_m,{className:"h-4 w-4 sm:h-4 sm:w-4 mb-1 sm:mb-0 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Book Staff"}),a.jsx("span",{className:"sm:hidden text-center leading-tight",children:"Book"})]}),a.jsxs("button",{onClick:()=>i("admin"),className:`flex flex-col sm:flex-row items-center justify-center px-1 sm:px-4 py-2 rounded-lg transition-colors text-xs sm:text-base ${s==="admin"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(bm,{className:"h-4 w-4 sm:h-4 sm:w-4 mb-1 sm:mb-0 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Admin"}),a.jsx("span",{className:"sm:hidden text-center leading-tight",children:"Admin"})]}),a.jsxs("button",{onClick:()=>i("accounting"),className:`flex flex-col sm:flex-row items-center justify-center px-1 sm:px-4 py-2 rounded-lg transition-colors text-xs sm:text-base ${s==="accounting"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(Pr,{className:"h-4 w-4 sm:h-4 sm:w-4 mb-1 sm:mb-0 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Accounting"}),a.jsx("span",{className:"sm:hidden text-center leading-tight",children:"Account"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s==="calendar"&&a.jsx(jA,{currentUser:t}),s==="earnings"&&a.jsx(NA,{currentUser:t}),s==="customers"&&a.jsx(AA,{currentUser:t}),s==="owner-booking"&&(t==null?void 0:t.role)==="Owner"&&a.jsx(IA,{currentUser:t,onBookingCreated:()=>{i("calendar")}}),s==="admin"&&(t==null?void 0:t.role)==="Owner"&&a.jsx(RA,{currentUser:t}),s==="accounting"&&(t==null?void 0:t.role)==="Owner"&&a.jsx(OA,{currentUser:t})]})]})]}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"mx-auto h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(Ih,{className:"h-6 w-6 text-blue-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Barber POS System"}),a.jsx("p",{className:"text-gray-600",children:n?"Sign in to your account":"Create your barber shop account"})]}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[!n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your full name",value:l.name,onChange:b=>o({...l,name:b.target.value}),required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:l.role,onChange:b=>o({...l,role:b.target.value}),children:[a.jsx("option",{value:"Barber",children:"Barber"}),a.jsx("option",{value:"Owner",children:"Owner"}),a.jsx("option",{value:"Apprentice",children:"Apprentice"})]})]}),l.role==="Owner"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shop Name"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your shop name",value:l.shopName,onChange:b=>o({...l,shopName:b.target.value}),required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(mm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"email",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email",value:l.email,onChange:b=>o({...l,email:b.target.value}),required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(ww,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:c?"text":"password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your password",value:l.password,onChange:b=>o({...l,password:b.target.value}),required:!0,minLength:6}),a.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>u(!c),children:c?a.jsx(yw,{className:"h-4 w-4"}):a.jsx(gm,{className:"h-4 w-4"})})]})]}),d&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsx("p",{className:"text-red-600 text-sm",children:d})}),a.jsx("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Processing...":n?"Sign In":"Create Account"}),a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:()=>r(!n),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:n?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});Sa.createRoot(document.getElementById("root")).render(a.jsx(ll.StrictMode,{children:a.jsx(FA,{})}));
