<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Email Test - Edge & Co</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea, select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #218838; }
        .status { margin-top: 20px; padding: 10px; border-radius: 4px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .info { background: #cce7ff; border: 1px solid #99d6ff; color: #0066cc; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="info">
        <h2>üöÄ Super Simple Email Solution</h2>
        <p>This uses Formspree.io - a free service that requires zero setup!</p>
    </div>
    
    <h1>üìß Edge & Co Booking Notification Test</h1>
    
    <form id="simpleEmailForm">
        <div class="form-group">
            <label for="email">Your Email (to receive the test):</label>
            <input type="email" id="email" name="email" required>
        </div>
        
        <div class="form-group">
            <label for="customer_name">Customer Name:</label>
            <input type="text" id="customer_name" name="customer_name" value="Test Customer" required>
        </div>
        
        <div class="form-group">
            <label for="service">Service:</label>
            <select id="service" name="service">
                <option value="Haircut">Haircut - $25</option>
                <option value="Beard Trim">Beard Trim - $15</option>
                <option value="Haircut & Beard">Haircut & Beard - $35</option>
                <option value="Hot Towel Shave">Hot Towel Shave - $30</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="appointment_date">Appointment Date:</label>
            <input type="datetime-local" id="appointment_date" name="appointment_date" required>
        </div>
        
        <div class="form-group">
            <label for="notification_type">Notification Type:</label>
            <select id="notification_type" name="notification_type">
                <option value="Booking Confirmation">Booking Confirmation</option>
                <option value="Appointment Reminder">Appointment Reminder (24hr)</option>
                <option value="Cancellation Notice">Cancellation Notice</option>
            </select>
        </div>
        
        <input type="hidden" name="_subject" value="Edge & Co Barbershop Notification">
        <input type="hidden" name="_next" value="">
        <input type="hidden" name="_template" value="table">
        
        <button type="submit">Send Test Email</button>
    </form>
    
    <div id="status"></div>
    
    <hr style="margin: 40px 0;">
    
    <h2>üîß How This Works</h2>
    <ol>
        <li><strong>Formspree.io</strong> - Free service that handles form submissions via email</li>
        <li><strong>No signup required</strong> - Just works immediately</li>
        <li><strong>Rate limit:</strong> 50 emails/month on free plan</li>
        <li><strong>Perfect for testing</strong> and low-volume notifications</li>
    </ol>
    
    <h3>üìã To integrate into your app:</h3>
    <pre style="background: #f8f9fa; padding: 15px; border-radius: 4px; overflow-x: auto;">
// Simple fetch request - no dependencies needed!
const response = await fetch('https://formspree.io/f/xwkgkqaj', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        email: customerEmail,
        customer_name: customerName,
        service: serviceBooked,
        appointment_date: appointmentDateTime,
        notification_type: 'Booking Confirmation',
        _subject: 'Edge & Co Booking Confirmation'
    })
});
    </pre>

    <script>
        // Set default date to tomorrow
        document.getElementById('appointment_date').value = new Date(Date.now() + 24*60*60*1000).toISOString().slice(0, 16);

        document.getElementById('simpleEmailForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = '<div class="status">üîÑ Sending email via Formspree...</div>';
            
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData);
            
            // Format the appointment date nicely
            data.appointment_date = new Date(data.appointment_date).toLocaleString();
            
            console.log('Sending email with data:', data);
            
            try {
                const response = await fetch('https://formspree.io/f/xwkgkqaj', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                if (response.ok) {
                    statusDiv.innerHTML = '<div class="status success">‚úÖ Email sent successfully! Check your inbox.</div>';
                } else {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                console.error('Error:', error);
                statusDiv.innerHTML = '<div class="status error">‚ùå Failed to send email: ' + error.message + '</div>';
            }
        });
    </script>
</body>
</html>
